;function openMenu(a){}function CreateUsageGraph(a){var b=["#acacac","#34C6CD","#FFB473","#2A4380","#FFD173","#0199AB","#FF7600","#123EAB","#FFAB00","#1A7074","#A64D00","#466FD5","#BE008A","#B4F200","#DF38B1","#EF002A"],c=new google.visualization.DataTable;c.addColumn("string","Week Start");var d=2*Math.PI/a[0].length;for(var e=1;e<a[0].length;e++){var f=Math.sin(e*d+0)*127+128,g=Math.sin(e*d+2)*127+128,h=Math.sin(e*d+4)*127+128;c.addColumn("number",a[0][e]),b.push(RGB2Color(f,g,h))}for(var e=1;e<a.length;e++)c.addRows([a[e]]);var i={backgroundColor:"#efeeef",title:"Distinct Logins a day by group by week",titlePosition:"out",colors:b,lineWidth:3,width:"100%",height:"100%",curveType:"function",explorer:{},hAxis:{textPosition:"none",slantedText:!0,slantedTextAngle:60},legend:{position:"top",textStyle:{fontSize:13}},chartArea:{left:60,top:70,width:"100%",height:"90%"},animation:{duration:1e3,easing:"out"},vAxis:{title:"Distinct Users"}},j=new google.visualization.LineChart(document.getElementById("usageByTime"));j.draw(c,i);var k=document.createElement("table");$(k).addClass("grid");for(var e=0;e<a[1].length;e++){var l=document.createElement("tr");for(var m=0;m<a.length;m++){var n=document.createElement("td");e==0&&(n=document.createElement("th")),$(n).addClass("graphCellHover"),$(n).hover(function(){$(this).closest("tr").addClass("graphRowHover")},function(){$(this).closest("tr").removeClass("graphRowHover")}),n.appendChild(document.createTextNode(a[m][e]));if(m===0){var o=UsersByGroup(a[m][e]);$(n).css("width","100px"),e!==0&&$(n).addClass("showing").addClass("rowHeader").attr("id","t"+e).attr("title","Hide/Show on graph \n\n"+UsersByGroup(a[m][e])),function(a,b,c){$(n).click(function(){view=new google.visualization.DataView(a),$(this).hasClass("showing")?$(this).closest("tr").find("td").each(function(){$(this).removeClass("showing").removeClass("graphCellHover").addClass("grapCellhHoverNotShow")}):$(this).closest("tr").find("td").each(function(){$(this).removeClass("grapCellhHoverNotShow").addClass("showing").addClass("graphCellHover")});var c=new Array;$(".rowHeader").each(function(){$(this).hasClass("showing")||c.push(parseInt($(this).attr("id").substr(1,$(this).attr("id").length-1)))}),view.hideColumns(c),j.draw(view,b)})}(c,i,e)}else $(n).addClass("cellNumberTight"),e>0&&($(n).attr("id","cell"+e+","+m),$(n).mouseover(function(){var a=j.series,b=$(this).attr("id").substr(4,$(this).attr("id").length-4).split(",")}));l.appendChild(n)}k.appendChild(l)}$("#graphDetails").html(k),$("#showFullScreen").on("click",function(a){$("#usageByTime").removeClass("graph").css({position:"fixed",left:0,top:0,"z-index":5,width:"100%",height:"100%",margin:0}),$(this).css("z-index",1);var b=document.createElement("div");$(b).addClass("float-right-absolute").click(function(){$("#usageByTime").css({position:"",left:"",top:"","z-index":"",width:"",height:"",margin:""}).addClass("graph"),$("#closeButtonDiv").remove(),j.draw(c,i),$("#showFullScreen").css("z-index",10)}).css({"min-width":"20px","min-height":"20px","background-image":"url(../Images/x-circle.png)","background-size":"cover",cursor:"pointer"}).attr("id","closeButtonDiv"),b.appendChild(document.createTextNode("  ")),document.body.appendChild(b),j.draw(c,i)})}function getUsageByWeeksJson(){var a=new Array,b=new Array,c=new Array;setTimeout(function(){$.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:"GetUsageByWeeks",async:!1,success:function(a){var b=new Array,c=new Array,d=new Array;c.push("Week Start");for(var e=0;e<a.length;e++)jQuery.inArray(a[e].WeekStart,b)===-1&&b.push(a[e].WeekStart),jQuery.inArray(a[e].Group,c)===-1&&c.push(a[e].Group);var f=c.slice(0);d.push(f),c.shift();for(var e=0;e<b.length;e++){var g=new Array;g.push(b[e]);for(var h=0;h<c.length;h++)g.push(a[e*c.length+h].DistinctLogins);d.push(g)}CreateUsageGraph(d)},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ajaxGetUsageByWeeks",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-g-j-ageubw-01")}})},5)}function UsersByGroup(a){var b="";return $.ajax({type:"POST",data:{userGroup:a},url:"GetUsersInGroup",async:!1,success:function(a){for(var c=0;c<a.length;c++)b+=a[c]+"\n"},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ajaxGetUsageByWeeks",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-g-j-ageubw-01")}}),b}function RGB2Color(a,b,c){return"#"+byte2Hex(a)+byte2Hex(b)+byte2Hex(c)}function byte2Hex(a){var b="0123456789ABCDEF";return String(b.substr(a>>4&15,1))+b.substr(a&15,1)}function expandCollapse(a,b,c){setTimeout(loadStart(),500),setTimeout(function(){b.src.match("expand")?(b.src="../../Images/collapse.gif",$("#"+a+" > tbody > tr").each(function(){$(this).attr("id")===c&&$(this).show()})):(b.src="../../Images/expand.gif",$("#"+a+" > tbody > tr").each(function(){$(this).attr("id")===c&&$(this).hide()}))},1e3),setTimeout(loadEnd(),1e4)}google.load("visualization","1.0",{packages:["corechart"]}),$(document).ready(function(){getUsageByWeeksJson(),loadEnd()})
;function openItem(a){var b,c=a.toLowerCase().indexOf("partial")>-1;if(c){var d=a.split("").reverse().join("");b=parseFloat(d.substring(0,d.indexOf("/")).split("").reverse().join("")),d=d.substring(d.indexOf("/")+1),a=d.split("").reverse().join("");var e=a.replace("Partial","");history.pushState({item:b,link:a},"Dashboard - "+e+"#"+b,parseUrl()+"/"+e+"/"+b);var f=e==="Project"?{projectID:b}:e==="Request"?{requestID:b}:{elementID:b};runAjax(ajax("ready","displayDiv",c?f:null,a).OpenItem)}else location.href="console/"+a}function openMenu(a,b){var c="";switch(b){case"PendingPromotes":c="Manager - Pending",runAjax(ajax("openMenu","displayDiv",null,"PendingRequest").Pending);break;default:}history.pushState(null,c,parseUrl()+"/"+b),$("#menu ul li").each(function(){$(this).removeClass("selected")}),$(a).addClass("selected")}function parseUrl(){var a=window.location.href.replace("/R","/r").replace("/E","/e").replace("/P","/p").replace("/A","/s").replace("/S","/s").replace("/ManageGroups","/managegroups").replace("#",""),b=a.split("/r");return b.length<=1&&(b=a.split("/e")),b.length<=1&&(b=a.split("/p")),b.length<=1&&(b=a.split("/managegrou")),b.length<=1&&(b=a.split("/a")),b.length<=1&&(b=a.split("/s")),b[0]}function getGrid(){history.pushState(null,"Dashboard",parseUrl()),runAjax(ajax("ready","displayDiv",null,"Grid").Grid)}function showParent(){$(".tree").unbind("click"),$("#hasParent").length>0?($(".tree").hasClass("invisible")&&($(".tree").css("opacity",0),$(".tree").removeClass("invisible"),setTimeout(function(){$(".tree").animate({opacity:1},300)},300)),$(".tree").attr("tooltip",$("#parentName").val()),$(".tree").bind("click",function(){openItem($("#hasParent").val())})):($(".tree").animate({opacity:0},200),$(".tree").addClass("invisible"))}function bindInputs(){var a={format:"MM/DD/YYYY",separator:"-"};$("div.date-picker-wrapper").each(function(){$(this).remove()}),$("input.dateRange").each(function(){$(this).dateRangePicker(a).keyup(function(a){a.keyCode===13&&rerunGrid()}).bind("datepicker-closed",function(){$(this).val().indexOf("-")>=10&&rerunGrid()})}),$("select[multiple]").multiselect({show:["blind",100],hide:["blind",400]}).multiselectfilter({label:"",autoReset:!0}),$(".filter").focusout(function(){rerunGrid()}).keyup(function(a){a.keyCode===13&&rerunGrid()})}function rerunGrid(a){var b=null;return a||(b={ID:$("#SelectedId").val(),requestorIdList:$("#SelectedRequestors").size()===1&&$("#SelectedRequestors").val()===null?null:$("#SelectedRequestors").val(),assignedIdList:$("#SelectedAssignee").size()===1&&$("#SelectedAssignee").val()===null?null:$("#SelectedAssignee").val(),category:$("#SelectedCategory").size()===1&&$("#SelectedCategory").val()===null?null:$("#SelectedCategory").val(),type:$("#SelectedType").size()===1&&$("#SelectedType").val()===null?null:$("#SelectedType").val(),area:$("#SelectedArea").size()===1&&$("#SelectedArea").val()===null?null:$("#SelectedArea").val(),summary:$("#EnteredSummary").val(),submittedRange:$("#SubmittedRange").val(),dueDateRange:$("#DueDateRange").val(),status:$("#SelectedStatus").size()===1&&$("#SelectedStatus").val()===null?null:$("#SelectedStatus").val(),closedRange:$("#ClosedRange").val()}),runAjax(ajax("ready","displayDiv",b,"Grid").Grid),!1}function evalHref(){var a=window.location.href,b="manager/dashboard/";a.toLowerCase().indexOf(b)>1&&(a=a.substring(a.toLowerCase().indexOf(b)+b.length),a.length>0&&a.indexOf("/")<0&&$("#"+a).addClass("selected"))}function promote(a){function c(a,b,c){return $("<input>").attr("type",a).attr("name",b).val(c)}if($("#startDate").val()==null||$("#startDate").val().length!==10){alert("Please enter Start Date.");return}var b=document.createElement("form");b.method="POST",b.action="/console/manager/PromoteToProject",$(b).append(c("number","requestID",a)),$(b).append($("#startDate")),console.log(b),$("#body").css("display","none").append(b),b.submit()}function ajax(a,b,c,d){function i(){var a=new Date;return a.setDate(a.getDate()+1),a.setHours(8,0,0,0),a}function j(a,b){if(typeof a!="string"||typeof b!="object")return null;localStorage.setItem(a,{data:b,expiration:i()})}"use strict";var e,f,g;e=f=g=null,c=c===null||typeof c!="object"&&typeof c!="string"?null:c;if(b!==null&&typeof b=="string")var h=b;return{OpenItem:new ajaxCall(ajaxDetails().HttpType.POST,"/console/"+d,c,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,function(){$("#"+b+" > div").addClass("centerContents").html("<img src='/Images/loading.gif' />")},function(a){$("#"+b+" > div").removeClass("centerContents").html(a),showParent();var c=history.state.link.replace("Partial","");document.title=c+" #"+history.state.item,$(".site-title").html(document.title)},function(a,b,c){$("#"+h+" > div").html("Unable to load due to "+c)}),Grid:new ajaxCall(ajaxDetails().HttpType.POST,"/console/"+d,c,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,function(){$("#"+b+" > div").addClass("centerContents").html("<img src='/Images/loading.gif' />")},function(a){$("#"+b+" > div").removeClass("centerContents").html(a),showParent(),document.title="Dashboard",$(".site-title").html(document.title),bindInputs()},function(a,b,c){$("#"+h+" > div").html("Unable to load due to "+c)}),SlickGrid:new ajaxCall(ajaxDetails().HttpType.POST,"/console/"+d,c,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,function(){$("#"+b+" > div").addClass("centerContents").html("<img src='/Images/loading.gif' />")},function(a){$("#"+b+" > div").removeClass("centerContents");var c=[];for(var d=0;d<a[0].length;d++)c.push({id:c[d],name:c[d],field:c[d]});slickGrid=new Slick.Grid($("#"+b+" > div"),a,c,null),showParent(),document.title="Dashboard",$(".site-title").html(document.title),alert(document.title)},function(a,b,c){$("#"+h+" > div").html("Unable to load due to "+c)}),Pending:new ajaxCall(ajaxDetails().HttpType.POST,"/manager/"+d,c,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,function(){$("#"+b+" > div").addClass("centerContents").html("<img src='/Images/loading.gif' />")},function(a){$("#"+b+" > div").removeClass("centerContents").html(a),showParent(),document.title="Manager - Pending",$(".site-title").html(document.title)},function(a,b,c){$("#"+h+" > div").html("Unable to load due to "+c)})}}var slickGrid;$(document).ready(function(){evalHref(),showParent(),loadEnd(),window.addEventListener("popstate",function(a){if(a.state!==null&&typeof a.state!="undefined"){var b=a.state.link.replace("Partial",""),c=b==="Project"?{projectID:a.state.item}:b==="Request"?{requestID:a.state.item}:{elementID:a.state.item};runAjax(ajax("ready","displayDiv",c,a.state.link).OpenItem)}else rerunGrid(!0);evalHref()});var a=null;$("li.ellipse").hover(function(){var b=$(this);a=setTimeout(function(){b.children().first().addClass("showEllipse").css({top:b.offset().top-b.parent().offset().top+b.parent().position().top+2})},500)},function(){clearTimeout(a),$(this).children().first().removeClass("showEllipse")}),bindInputs();var b=$.ech.multiselect.prototype.close;$.ech.multiselect.prototype.close=function(){var a=b.apply(this,arguments);return rerunGrid(),a},$("#globalSearch").autocomplete({delay:750,focus:function(a){a.preventDefault()},source:function(a,b){var c={searchContext:$("#globalSearch").val()};$.get("/console/SearchConsole",c,function(a){var c=[];for(var d=0;d<a.length;d++)c.push({label:a[d].Text,value:a[d].RelativeUrl,id:d,title:a[d].ToolTip});b(c)})},select:function(a,b){a.preventDefault(),$("#globalSearch").text("").html(""),openItem(b.item.value)},open:function(){$(".ui-autocomplete").css({"background-color":"#FFFFFF","font-size":"0.7em","max-height":"350px","overflow-y":"scroll","overflow-x":"hidden"}),$(".ui-autocomplete li").css({outline:"1px"})}}).data("ui-autocomplete")._renderItem=function(a,b){return $("<li title='"+b.title+"'>").data("ui-autocomplete-item",b).append($("<a>").html(b.label)).appendTo(a)}})
;var ilecMarkers=new Array,nniMarkers=new Array,highMarkers=new Array,lowMarkers=new Array,iconURLPrefix="http://maps.google.com/mapfiles/ms/icons/",icons=["../../Images/CircleFire.png","../../Images/CircleBlue.png","../../Images/CircleGreen.png","../../Images/CirclePurple.png","../../Images/CircleRed.png","../../Images/CircleYellow.png","../../Images/CircleBrown.png","../../Images/CircleGrey.png","../../Images/CircleOrange.png","../../Images/CircleForest.png","../../Images/CirclePink.png","../../Images/CircleBlue1.png","../../Images/CircleTeal.png","../../Images/CirclePurple1.png","../../Images/CircleExtra.png"],locationIcons=["../../Images/SDP01.png","../../Images/SDP02.png","../../Images/SDP03.png","../../Images/SDP04.png","../../Images/SDP05.png","../../Images/SDP06.png","../../Images/SDP07.png","../../Images/SDP08.png","../../Images/SDP09.png","../../Images/SDP10.png","../../Images/SDP11.png","../../Images/SDP12.png","../../Images/SDP13.png","../../Images/SDP14.png","../../Images/SDP15.png"],slocationIcons=["../../Images/SSDP01.png","../../Images/SSDP02.png","../../Images/SSDP03.png","../../Images/SSDP04.png","../../Images/SSDP05.png","../../Images/SSDP06.png","../../Images/SSDP07.png","../../Images/SSDP08.png","../../Images/SSDP09.png","../../Images/SSDP10.png","../../Images/SSDP11.png","../../Images/SSDP12.png","../../Images/SSDP13.png","../../Images/SSDP14.png","../../Images/SSDP15.png"]
;function indexAjax(a,b,c,d){function l(){var a=new Date;return a.setDate(a.getDate()+1),a.setHours(8,0,0,0),a}function m(a,b){if(typeof a!="string"||typeof b!="object")return null;localStorage.setItem(a,{data:b,expiration:l()})}function n(a){return{SUCCESS:function(b){removeFromMarkers(b,a),addNewMarkers(b,a),showMarkers(a)},FAILURE:function(b,c,d){h.ErrorDetails=b.responseText+" -- "+d,b.readyState===4&&(h.ErrorCode="c-e-j-"+a+"-01"),b.readyState===2&&(h.ErrorCode="c-e-j-"+a+"-02"),h.logError(g)}}}"use strict";var e,f="E911",g="#map-canvas",h=new ErrorInsert(f,a),i,j,k;i=j=k=null,c=c!==null&&typeof c=="object"?c:null;switch(d){case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:e="./E911/JsonRcBoundaries";break;case BoundaryType.PSAP:e="./E911/JsonPsapBoundaries";break;case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:e="./E911/JsonCountyBoundaries";break;case BoundaryType.LATA:e="./E911/JsonLataBoundaries";break;default:e=""}return b!==null&&typeof b=="string"&&(g=b),{OnMap:new ajaxCall(ajaxDetails().HttpType.GET,e,c,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,n(d).SUCCESS,n(d).FAILURE),LocDetails:ajaxCall(ajaxDetails().HttpType.GET,"./E911/LocationDetails",c,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,function(){$(b).html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'></div>")},function(a){$(b).html(a)},function(a,b,c){h.ErrorDetails=a.responseText+" -- "+c,a.readyState===4&&(h.ErrorCode="c-e-j-ld-01"),a.readyState===2&&(h.ErrorCode="c-e-j-ld-02"),h.logError(g)}),LocInfo:ajaxCall(ajaxDetails().HttpType.GET,"./E911/LocationDetails",c,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(a){var b=d.clickMarker===!0?clickInfowindow:infowindow;b.close();var c="<div style='font-size: 0.9em; width: 260px; height: 300px;'><strong>"+d.name+"</strong>"+"<p style='font-size: 0.83em'>"+a+"</p></div>";b.setContent(c),b.open(map,d.marker)},function(a,b,c){h.ErrorDetails=a.responseText+" -- "+c,a.readyState===4&&(h.ErrorCode="c-e-j-ld-01"),a.readyState===2&&(h.ErrorCode="c-e-j-ld-02"),h.logError(g)}),Centroid:ajaxCall(ajaxDetails().HttpType.GET,"./E911/ProjectCentroid",c,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(a){getProjectInfo(a,d)},function(a,b,c){h.ErrorDetails=a.responseText+" -- "+c,a.readyState===4&&(h.ErrorCode="c-e-j-c-01"),a.readyState===2&&(h.ErrorCode="c-e-j-c-02"),h.logError(g)})}}function searchProject(a,b){var c=trimFuncName(arguments.callee.toString()),d={searchType:a,searchString:b};runAjax(indexAjax(c,"#map-canvas",d,a).Centroid)}function searchLatLng(){var a=$("#lat-input").val(),b=$("#lng-input").val(),c=new google.maps.Geocoder;c.geocode({latLng:new google.maps.LatLng(a,b)},function(c,d){var e,f;if(d==google.maps.GeocoderStatus.OK){c[2]&&(f=c[2].formatted_address);for(var g=0;g<c.length;g++)for(var h=0;h<c[g].address_components.length;h++)c[g].address_components[h].types[0]==="postal_code"&&(e=c[g].address_components[0].short_name)}else console.log(d);var i={name:"Lat:"+a+" - Lng:"+b,address_components:[{short_name:e,types:["postal_code"]}]};getDetails(i,a,b,!0)})}function searchProviders(){var a=searchBox.getPlace();getDetails(a,a.geometry.location.lat(),a.geometry.location.lng(),!0)}function setMapNull(){marker!==null&&typeof marker!="undefined"&&marker.setMap(null);for(i=0;i<highlight.length;i++)highlight[i].setMap(null);highlight=new Array}function getClickDetails(a){clickMarker!==null&&typeof clickMarker!="undefined"&&clickMarker.setMap(null);var b=a.latLng.lat(),c=a.latLng.lng(),d=trimFuncName(arguments.callee.toString());clickMarker=createMarker("Lat:"+b+" Lng:"+c,b,c,iconURLPrefix+"blue-dot.png",2,!1);var e=new google.maps.Geocoder;e.geocode({latLng:new google.maps.LatLng(b,c)},function(a,e){var f,g;if(e==google.maps.GeocoderStatus.OK){a[2]&&(f=a[2].formatted_address);for(var h=0;h<a.length;h++)for(var i=0;i<a[h].address_components.length;i++)a[h].address_components[i].types[0]==="postal_code"&&(g=a[h].address_components[0].short_name)}else console.log(e);var j={lat:b,lng:c,zip:g,showIcon:!1},k={name:f,marker:clickMarker,clickMarker:!0};runAjax(indexAjax(d,null,j,k).LocInfo)})}function getDetails(a,b,c,d){setMapNull();var e=trimFuncName(arguments.callee.toString());marker=createMarker("Searched Location",b,c,null,2,!1);var f;for(var g=0;g<a.address_components.length;g++)a.address_components[g].types[0]==="postal_code"&&(f=a.address_components[g].short_name);google.maps.event.addListener(marker,"click",function(d){return function(){var g={lat:b,lng:c,zip:f,showIcon:!1},h={name:a.name,marker:d,clickMarker:!1};runAjax(indexAjax(e,null,g,h).LocInfo)}}(marker));var h=new google.maps.LatLngBounds;h.extend(new google.maps.LatLng(b,c)),d&&(map.fitBounds(h),setTimeout(function(){var a=google.maps.event.addListener(map,"idle",function(){map.getZoom()>14&&map.setZoom(14)});google.maps.event.removeListener(a)},15));var i={lat:b,lng:c,zip:f,showIcon:!0};runAjax(indexAjax(e,$("#selectDetail"),i,null).LocDetails)}function getProjectInfo(a,b){setMapNull();if(a.length>0){var c=MapColors.white;switch(b.toLowerCase()){case"fips":case"counties":c=MapColors.black;break;case"rate center":c=MapColors.red;break;case"fcc id":case"psap agency":c=MapColors.blue}var d=new google.maps.LatLngBounds;for(var e=0;e<a.length;e++)for(var f=0;f<a[e].Polygon.length;f++){var g=new Array;for(var h=0;h<a[e].Polygon[f].Coordinates.length;h++){var i=new google.maps.LatLng(a[e].Polygon[f].Coordinates[h].Lat,a[e].Polygon[f].Coordinates[h].Lng);g.push(i),d.extend(i)}var j=new google.maps.Polygon({path:g,strokeColor:c,fillColor:c,strokeWeight:2,strokeOpacity:.8,fillOpacity:.2,zIndex:0,map:map});google.maps.event.addListener(j,"click",function(a){a.alreadyCalled_||getClickDetails(a)}),highlight.push(j)}map.fitBounds(d),map.getZoom()>10?$("#selectDetail").html("Please click on map to get full details."):$("#selectDetail").html("Please zoom in and click on map to get full details")}else alert("We're sorry, but we were unable to locate this project on a map.")}function getCounty(a){var b=$(a).attr("id")==="CountyPolyShowHideMap"?BoundaryType.COUNTY:BoundaryType.COUNTYLABEL;$(a).prop("checked")?(b===BoundaryType.COUNTYLABEL&&$("#CountyPolyShowHideMap").prop("checked",!0),getBoundary(b)):(b===BoundaryType.COUNTY&&$("#CountyLabelShowHideMap").prop("checked",!1),showMarkers(b))}function getRateCenter(a){var b=$(a).attr("id")==="RateCenterPolyShowHideMap"?BoundaryType.RATECENTER:BoundaryType.RATECENTERLABEL;$(a).prop("checked")?(b===BoundaryType.RATECENTERLABEL&&$("#RateCenterPolyShowHideMap").prop("checked",!0),getBoundary(b)):(b===BoundaryType.RATECENTER&&$("#RateCenterLabelShowHideMap").prop("checked",!1),showMarkers(b))}function getLata(a){$(a).prop("checked")?getBoundary(BoundaryType.LATA):showMarkers(BoundaryType.LATA)}function getPsap(a){$(a).prop("checked")?getBoundary(BoundaryType.PSAP):showMarkers(BoundaryType.PSAP)}function getBoundary(a){if(a!==null&&typeof a=="string"){var b=map.getBounds(),c=trimFuncName(arguments.callee.toString()),d={bottomLeftLat:b.getSouthWest().lat().toFixed(6),bottomLeftLng:b.getSouthWest().lng().toFixed(6),topRightLat:b.getNorthEast().lat().toFixed(6),topRightLng:b.getNorthEast().lng().toFixed(6)};runAjax(indexAjax(c,"#map-canvas",d,a).OnMap)}}function removeFromMarkers(a,b){switch(b){case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:for(var c=0;c<countyMarkers.length;c++){var d=$.grep(a,function(a){return a.ObjectID===countyMarkers[c].text});d.length===0&&(countyMarkers[c].polygon.setMap(null),countyMarkers[c].label.setMap(null),countyMarkers[c]=null,countyMarkers.splice(c,1))}break;case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:for(var c=0;c<rateCenterMarkers.length;c++){var d=$.grep(a,function(a){return a.ID===rateCenterMarkers[c].text});d.length===0&&(rateCenterMarkers[c].polygon.setMap(null),rateCenterMarkers[c].label.setMap(null),rateCenterMarkers[c]=null,rateCenterMarkers.splice(c,1))}break;case BoundaryType.PSAP:for(var c=0;c<psapMarkers.length;c++){var d=$.grep(a,function(a){return a.ObjectID===psapMarkers[c].text});d.length===0&&(psapMarkers[c].polygon.setMap(null),psapMarkers[c]=null,psapMarkers.splice(c,1))}break;case BoundaryType.LATA:for(var c=0;c<lataMarkers.length;c++){var d=$.grep(a,function(a){return a.ObjectID===lataMarkers[c].text});d.length===0&&(lataMarkers[c].polygon.setMap(null),lataMarkers[c]=null,lataMarkers.splice(c,1))}}}function addNewMarkers(a,b){switch(b){case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:for(var c=0;c<a.length;c++){var d=$.grep(countyMarkers,function(b){return b.text===a[c].ObjectID});if(d.length===0)for(var e=0;e<a[c].Polygon.length;e++)countyMarkers.push(createShape(a[c].Polygon[e],b,a[c].ObjectID,a[c].Name))}break;case BoundaryType.PSAP:for(var c=0;c<a.length;c++){var d=$.grep(psapMarkers,function(b){return b.text===a[c].ObjectID});if(d.length===0)for(var e=0;e<a[c].Polygon.length;e++)psapMarkers.push(createShape(a[c].Polygon[e],b,a[c].ObjectID,null))}break;case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:for(var c=0;c<a.length;c++){var d=$.grep(rateCenterMarkers,function(b){return b.text===a[c].ID});if(d.length===0)for(var e=0;e<a[c].Polygon.length;e++)rateCenterMarkers.push(createShape(a[c].Polygon[e],b,a[c].ID,a[c].Name))}break;case BoundaryType.LATA:for(var c=0;c<a.length;c++){var d=$.grep(lataMarkers,function(b){return b.text===a[c].ObjectID});if(d.length===0)for(var e=0;e<a[c].Polygon.length;e++)lataMarkers.push(createShape(a[c].Polygon[e],b,null))}}}function createShape(a,b,c,d){var e=MapColors.white;switch(b){case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:e=MapColors.black;break;case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:e=MapColors.red;break;case BoundaryType.PSAP:e=MapColors.blue;break;case BoundaryType.LATA:e=MapColors.pink}var f=new Array;for(var g=0;g<a.Coordinates.length;g++)f.push(new google.maps.LatLng(a.Coordinates[g].Lat,a.Coordinates[g].Lng));if(b===BoundaryType.PSAP||b===BoundaryType.LATA)var h={polygon:new google.maps.Polyline({path:f,strokeColor:e,fillColor:e,strokeWeight:2,strokeOpacity:.8,fillOpacity:.8,zIndex:1}),text:c};else var h={polygon:new google.maps.Polyline({path:f,strokeColor:e,fillColor:e,strokeWeight:2,strokeOpacity:.8,fillOpacity:.8,zIndex:1}),text:c,label:new MapLabel({text:d.toUpperCase(),position:new google.maps.LatLng(a.Centroid.Lat,a.Centroid.Lng),fontSize:10,fontColor:e,labelInBackground:!0,strokeColor:e,strokeWeight:.4})};return h}function showMarkers(a){if(a!==null&&typeof a!="undefined"){var b;switch(a){case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:b="#CountyPolyShowHideMap";var c=$(b).prop("checked");b="#CountyLabelShowHideMap";var d=$(b).prop("checked");for(var e=0;e<countyMarkers.length;e++)countyMarkers[e].polygon.getMap()===map&&c||countyMarkers[e].polygon.getMap()===null&&!c||countyMarkers[e].polygon.setMap(c?map:null),countyMarkers[e].label.getMap()===map&&d||countyMarkers[e].label.getMap()===null&&!d||countyMarkers[e].label.setMap(d?map:null);break;case BoundaryType.PSAP:b="#PsapShowHideMap";var c=$(b).prop("checked");for(var e=0;e<psapMarkers.length;e++)psapMarkers[e].polygon.getMap()===map&&c||psapMarkers[e].polygon.getMap()===null&&!c||psapMarkers[e].polygon.setMap(c?map:null);break;case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:b="#RateCenterPolyShowHideMap";var c=$(b).prop("checked");b="#RateCenterLabelShowHideMap";var d=$(b).prop("checked");for(var e=0;e<rateCenterMarkers.length;e++)rateCenterMarkers[e].polygon.getMap()===map&&c||rateCenterMarkers[e].polygon.getMap()===null&&!c||rateCenterMarkers[e].polygon.setMap(c?map:null),rateCenterMarkers[e].label.getMap()===map&&d||rateCenterMarkers[e].label.getMap()===null&&!d||rateCenterMarkers[e].label.setMap(d?map:null);break;case BoundaryType.LATA:b="#LataShowHideMap";var c=$(b).prop("checked");for(var e=0;e<lataMarkers.length;e++)lataMarkers[e].polygon.getMap()===map&&c||lataMarkers[e].polygon.getMap()===null&&!c||lataMarkers[e].polygon.setMap(c?map:null);default:}}}function expandCollapse(a,b,c){setTimeout(loadStart(),500),setTimeout(function(){b.src.match("expand")?(b.src="../../Images/collapse.gif",$("#"+a+" > tbody > tr").each(function(){$(this).attr("id")===c&&$(this).show()})):(b.src="../../Images/expand.gif",$("#"+a+" > tbody > tr").each(function(){$(this).attr("id")===c&&$(this).hide()}))},1e3),setTimeout(loadEnd(),1e4)}function searchTableSelect(a,b){b!==null&&typeof b!="undefined"&&b?($("#searchCriteria").children("span").each(function(){$(this).attr("onclick","")}),$("#searchMethods").children().each(function(){$(this).css("display","none")}),$("#"+a.id+"SearchDiv").css("display","block"),$("#searchCriteria").children("span").each(function(){this.id==a.id?$(this).addClass("selected"):$(this).removeClass("selected"),$(this).attr("onclick","searchTableSelect(this)")})):($("#searchCriteria").children("span").each(function(){$(this).attr("onclick","")}),$("#searchMethods").children().each(function(){$(this).fadeOut(500)}),setTimeout(function(){$("#"+a.id+"SearchDiv").fadeIn(800)},550),setTimeout(function(){$("#searchCriteria").children("span").each(function(){this.id==a.id?$(this).addClass("selected"):$(this).removeClass("selected"),$(this).attr("onclick","searchTableSelect(this)")})},600))}function ShowLocationSwitch(a){$("#location").children("span").each(function(){$(this).attr("onclick","")}),$("#location").children("div").each(function(){$(this).fadeTo(500,0,null),$(this).css("z-index",-1)}),setTimeout(function(){$("#"+a.id+"Div").fadeTo(800,1,null),$("#"+a.id+"Div").css("z-index",3)},550),setTimeout(function(){$("#location").children("span").each(function(){this.id==a.id?$(this).addClass("selected"):$(this).removeClass("selected"),$(this).attr("onclick","ShowLocationSwitch(this)")})},600)}function createMarker(a,b,c,d,e,f){return new google.maps.Marker({position:new google.maps.LatLng(b,c),map:map,icon:d===null?iconURLPrefix+"red-dot.png":d,title:a.toString(),id:a,zIndex:e,draggable:f})}var MapColors={yellow:"#F2FA00",white:"#eee",black:"#111",blue:"#0000FF",purple:"#4000BF",pink:"#FF00FF",orange:"#FF7700",darkWhite:"#ddd",lightBlack:"#333",red:"#FF0000"},BoundaryType={RATECENTER:"rateCenter",RATECENTERLABEL:"rateCenterLabel",PSAP:"psap",COUNTY:"county",COUNTYLABEL:"countyLabel",LATA:"lata"},mapListener,mapMoveListener,localStorageAllowed,countyMarkers=new Array,rateCenterMarkers=new Array,psapMarkers=new Array,lataMarkers=new Array,swcMarkers=new Array,highlight=new Array,marker,clickMarker,map,infowindow,clickInfowindow,searchBox,djConfig={parseOnLoad:!0,packages:[{name:"agsjs",location:"https://gmaps-utility-gis.googlecode.com/svn/tags/agsjs/2.04/xbuild/agsjs"}]};$(document).ready(function(){"use strict";var a=getInternetExplorerVersion();a>-1&&a<10&&alert("Your are using an outdated version of IE. Comet recommends that you use IE10, Chrome, or Firefox."),localStorageAllowed=supportsHtml5Storage(),$("#lat-input, #lng-input").keypress(function(a){a.which==13&&searchLatLng()}),$("#MinMaxSearch").click(function(){minMaxParent(this)}),map=new google.maps.Map(document.getElementById("map-canvas"),{center:new google.maps.LatLng(38.850033,-95.6500523),zoom:5,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},mapTypeId:google.maps.MapTypeId.ROADMAP}),infowindow=new google.maps.InfoWindow,clickInfowindow=new google.maps.InfoWindow;var b=document.getElementById("pac-input");$("#searchCriteria").push(b),$(b).css("font-size","0.8em"),searchBox=new google.maps.places.Autocomplete(b),google.maps.event.addListener(searchBox,"place_changed",function(){searchProviders()}),$("#project-input").autocomplete({delay:500,focus:function(a,b){a.preventDefault();var c=b.item.label.split(": ");$(this).val(c[1].replace("<mark>","").replace("</mark>",""))},source:function(a,b){var c={search:$("#project-input").val()};$.get("./E911/ShowProject",c,function(a){var c=[];for(var d=0;d<a.length;d++)c.push({label:a[d][0],value:a[d][1],id:d});b(c)})},select:function(a,b){a.preventDefault();var c=b.item.label.split(": "),d=c[0].replace("<b>","").replace("</b>","").replace("<u>","").replace("</u>",""),e=c[1].replace("<mark>","").replace("</mark>","");$(this).val(e),searchProject(d,b.item.value)},open:function(){$(".ui-autocomplete").css({"background-color":"#FFFFFF","font-size":"0.7em","max-height":"350px","overflow-y":"scroll","overflow-x":"hidden"}),$(".ui-autocomplete li").css({outline:"1px"})}}).data("ui-autocomplete")._renderItem=function(a,b){return $("<li title='"+b.title+"'>").data("ui-autocomplete-item",b).append($("<a>").html(b.label)).appendTo(a)},google.maps.event.addListener(map,"drag",function(){clearTimeout(mapMoveListener)}),google.maps.event.addListener(map,"idle",function(){mapMoveListener=setTimeout(function(){if(map.getZoom()>=10){$("#CountyPolyShowHideMap").prop("disabled",!1),$("#CountyPolyShowHideMap").prop("checked")&&getCounty($("#CountyPolyShowHideMap")),$("#CountyLabelShowHideMap").prop("disabled",!1),$("#RateCenterPolyShowHideMap").prop("disabled",!1),$("#RateCenterPolyShowHideMap").prop("checked")&&getRateCenter($("#RateCenterPolyShowHideMap")),$("#RateCenterLabelShowHideMap").prop("disabled",!1),$("#PsapShowHideMap").prop("disabled",!1),$("#PsapShowHideMap").prop("checked")&&getPsap($("#PsapShowHideMap")),$("#LataShowHideMap").prop("disabled",!1),$("#LataShowHideMap").prop("checked")&&getLata($("#LataShowHideMap"));if(mapListener===null||typeof mapListener=="undefined")mapListener=google.maps.event.addListener(map,"click",function(a){getClickDetails(a)})}else{$("#CountyPolyShowHideMap").prop("disabled",!0),$("#CountyLabelShowHideMap").prop("disabled",!0);for(var a=0;a<countyMarkers.length;a++)countyMarkers[a].polygon.setMap(null),countyMarkers[a].label.setMap(null);$("#RateCenterPolyShowHideMap").prop("disabled",!0),$("#RateCenterLabelShowHideMap").prop("disabled",!0);for(var a=0;a<rateCenterMarkers.length;a++)rateCenterMarkers[a].polygon.setMap(null),rateCenterMarkers[a].label.setMap(null);$("#PsapShowHideMap").prop("disabled",!0);for(var a=0;a<psapMarkers.length;a++)psapMarkers[a].polygon.setMap(null);$("#LataShowHideMap").prop("disabled",!0);for(var a=0;a<lataMarkers.length;a++)lataMarkers[a].polygon.setMap(null);google.maps.event.clearListeners(map,"click"),mapListener=null}},500),searchBox.setBounds(map.getBounds())}),loadEnd()})
;function Comet(){this.nameCtrl=null,this.LAST_PAGE_MOVE=(new Date).getTime(),this.LAST_REQUEST_CHECK_TIME=(new Date).getTime(),this.PAGE_REFRESH_TIME=36e5,this.REFRESH_REQUESTS_TIME=6e4}function ErrorInsert(a,b,c,d){var e=a,f=b,g=null,h=null;c!==null&&typeof c=="string"&&(g=c),d!==null&&typeof d=="string"&&(h=d)}function showUserDetails(a){var b=$(a);($(a).data("events")===null||typeof ($(a).data("events")==="undefined"))&&$(a).bind({mouseleave:function(){clearTimeout(userTimer),$("#"+b.prop("id")+"User").css("visibility","hidden")}}),userTimer=setTimeout(function(){$("#"+b.prop("id")+"User").css("visibility","visible")},500)}function toTitleCase(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function minMaxParent(a){if($(a).hasClass("minmaxOpen")){$(a).parent().children().each(function(){$(this).attr("id")!==$(a).attr("id")&&$(this).fadeOut(300)});var b=!1;$.each(dimensions,function(c,d){$(a).attr("id")===d.id&&(b=!0)}),b||dimensions.push({id:$(a).attr("id"),width:$(a).parent().css("width"),height:$(a).parent().css("height"),paddingLeft:$(a).parent().css("padding-left"),borderRadius:$(a).parent().css("border-radius")}),$(a).parent().animate({width:"15px",height:"15px","padding-left":"0px","border-radius":"7px"},800),$(a).removeClass("minmaxOpen").addClass("minmaxClose")}else $.each(dimensions,function(b,c){$(a).attr("id")===c.id&&$(a).parent().animate({width:c.width,height:c.height,"padding-left":c.paddingLeft},800,function(){$(this).css({height:"auto","border-radius":"4px"})})}),$(a).parent().children().each(function(){$(this).fadeIn(900)}),$(a).removeClass("minmaxClose").addClass("minmaxOpen")}function loadEnd(){$("body").removeClass("blur"),$("#loadImage").stop().animate({opacity:0},1e3),$(".loading").stop().animate({opacity:0},800),setTimeout(function(){$(".loading").css("z-index","-10"),$("#loadImage").css("z-index","-10")},1800)}function loadStart(){$("body").addClass("blur"),$(".loading").css("z-index","99"),$("#loadImage").css("z-index","120"),setTimeout(function(){$(".loading").stop().animate({opacity:.8,"background-color":"#000"},200)},0),setTimeout(function(){$("#loadImage").stop().animate({opacity:1},200)},0)}function logError(a,b){ajaxCall("POST","home/JSErrorCommit",JSON.stringify(a),!0,"application/json",null,null,null)}function getInternetExplorerVersion(){var a=-1;if(navigator.appName==="Microsoft Internet Explorer"){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");c.exec(b)!==null&&(a=parseFloat(RegExp.$1))}return a}function supportsHtml5Storage(){try{return"localStorage"in window&&window.localStorage!==null}catch(a){return!1}}function createStorageExpiration(){var a=new Date;return a.setDate(a.getDate()+1),a.setHours(8,0,0,0)}function trimFuncName(a){var b=a.substr("function ".length);return b=b.substr(0,b.indexOf("(")),b}function ajaxDetails(){return{ContentType:{DEFAULT:"application/x-www-form-urlencoded; charset=UTF-8",NULL:null,JSON:"application/json; charset=utf-8",TEXT:"text/plain",HTML:"html"},HttpType:{GET:"GET",POST:"POST"},Synchronous:{TRUE:!0,FALSE:!1}}}function ajaxCall(a,b,c,d,e,f,g,h){if(p===!1)return null;var i=b,j=c,k=a,l=e,m=f,n=g,o=h,p=function(){return typeof b!="string"?!1:typeof a!="string"?!1:typeof e!="string"||e===null?!1:typeof c=="object"&&c!==null&&Array.isArray(c)!==!0?!1:(typeof g=="object"&&g!==null)==0?!1:(typeof h=="object"&&h!==null)==0?!1:typeof d!="boolean"?!1:!0};return{QueryString:i,Data:j,HttpType:k,ContentType:l,Synchronous:d,BeforeSendDelegate:function(){return m===null||typeof m=="undefined"?null:m()},SuccessDelegate:function(a){return n(a)},FailureDelegate:function(a,b,c){return o(a,b,c)}}}function runAjax(a){typeof a=="object"&&a!==null&&(a.ContentType!==null&&a.Data!==null?$.ajax({type:a.HttpType,contentType:a.ContentType,data:a.Data,url:a.QueryString,async:a.Synchronous,beforeSend:function(){a.BeforeSendDelegate()},success:function(b){a.SuccessDelegate(b)},error:function(b,c,d){a.FailureDelegate(b,c,d)}}):$.ajax({type:a.HttpType,url:a.QueryString,async:a.Synchronous,beforeSend:function(){a.BeforeSendDelegate()},success:function(b){a.SuccessDelegate(b)},error:function(b,c,d){a.FailureDelegate(b,c,d)}}))}function Ajax(a,b,c,d){"use strict";var e,f,g;return e=f=g=null,c=c===null||typeof c!="object"&&typeof c!="string"?e:c,b!==null&&typeof b=="string"&&(errorPanel=b),{NewRequests:new ajaxCall(ajaxDetails().HttpType.GET,"Rest/Requests",c,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.JSON,g,function(a){$("#"+b).html(a.length)},function(a,b,c){}),InsertError:new ajaxCall(ajaxDetails().HttpType.POST,"Rest/JSError",c,ajaxDetails().Synchronous.FALSE,ajaxDetails().ContentType.JSON,g,function(){},function(a,b,c){})}}ErrorInsert.prototype.logError=function(a){console.log("Unimplemented: Log error: "+ErrorInsert.ErrorDetails),$(a).html(ErrorInsert.ErrorDetails)},Comet.prototype={setNameCtrl:function(a){this.nameCtrl=a},TODAY:function(){var a=new Date;return a.setDate(a.getDate()),a},NOW:function(){return(new Date).getTime()},setRefresh:function(){var a=this,b=function(){a.setRefresh()};this.NOW()-this.LAST_PAGE_MOVE>=216e5?window.location.reload(!0):setTimeout(b,this.PAGE_REFRESH_TIME)},refreshData:function(){runAjax(ajaxCall(ajaxDetails().HttpType.POST,"/Rest/RefreshAppData",null,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.JSON,function(){loadStart()},function(a){alert(a),loadEnd()},function(a,b,c){}))},getNewRequests:function(){var a=this,b=function(){a.getNewRequests()};this.NOW()-this.LAST_REQUEST_CHECK_TIME>=this.REFRESH_REQUESTS_TIME&&(runAjax(ajaxCall(ajaxDetails().HttpType.POST,"/Rest/Requests",null,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(a){if(a.length>0){if($("#consoleUnread").length===0){var b=document.createElement("div");$(b).attr("id","consoleUnread").css({left:$("#consoleAnchor").offset().left+$("#consoleAnchor").width()-15,top:$("#consoleAnchor").offset().top-8}).addClass("notification"),$("#menuDiv").append(b)}$("#consoleUnread").html(a.length)}else $("#consoleUnread")!==null&&typeof $("#consoleUnread")!="undefined"&&$("#consoleUnread").remove()},function(a,b,c){})),this.LAST_REQUEST_CHECK_TIME=this.NOW()),setTimeout(b,this.REFRESH_REQUESTS_TIME)},CorrectNotification:function(){$("#consoleUnread").css({left:$("#consoleAnchor").offset().left+$("#consoleAnchor").width()-15,top:$("#consoleAnchor").offset().top-8})}};var userTimer=null;$(document).ready(function(){var a=new Comet;a.setRefresh(),a.LAST_REQUEST_CHECK_TIME=a.LAST_REQUEST_CHECK_TIME-a.REFRESH_REQUESTS_TIME,a.getNewRequests(),$(window).resize(a.CorrectNotification),$("ul#menu").jqsimplemenu(),parseInt($("#sawNewVersion").html())===0&&($.ajax({type:"GET",url:"/Misc/ShowNav",async:!0,success:function(a){$("#showNav").html(a)},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ajaxCloseNav",d.ErrorDetails=a.responseText+" -- "+c,a.readyState===4&&(d.ErrorCode="c-g-j-cn-01")}}),$("#showNav").css("display","block")),$("a#refresh").click(function(){a.refreshData()}),$("input[type='date']").each(function(){this.type!=="date"&&($.datepicker.formatDate("MM/dd/yyyy"),$(this).datepicker({buttonImage:"calendar.gif",buttonText:"Pick a date",beforeShowDay:$.datepicker.noWeekends}))})});var dimensions=[]
;function DrawDetailsUp(a,b){$("#Contact").empty(),setTimeout(function(){var b=new ContactString;b.vendor=a,$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/CableContactList",data:JSON.stringify(b),async:!0,beforeSend:function(){$("#Contact").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'></div>")},success:function(a){$("#Contact").html(a)},error:function(a,b,c){var d=new d;d.PageName="Index",d.StepName="DrawDetailsUp",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-ddu-01",logError(d,"#Contact")),a.readyState==0&&(d.ErrorCode="c-i-j-ddu-02",logError(d,"#Contact"))}})},10),$("#nni").empty();var c=new nniSorting,d=c.stateString="";if($("#multiStates").val()!=null){for(var e=0;e<$("#multiStates").val().length;e++)d+=$("#multiStates").val()[e]+", ";c.stateString=d.substr(0,d.length-2)}c.providerString=a,c.sortColumn="nniFacEccktVendor";var f=searchBox.getPlace();setTimeout(function(){$("#clli").hasClass("selected")?$("#clli-input").val().length!=8?$("#nni").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><br />No CLLI Code entered</div>"):$.ajax({type:"POST",url:"Home/ClliLatLon",data:{clli:$("#clli-input").val()},async:!1,success:function(a){c.lat=a.latitude,c.lon=a.longitude},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ClliLatLon",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-cll-01",logError(d,"#map-canvas"))}}):$("#latLng").hasClass("selected")?$("#lat-input").val().length<1||$("#lng-input").val().length<1?$("#nni").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><br />Missing Lat / Lon</div>"):(c.lat=$("#lat-input").val(),c.lon=$("#lng-input").val()):(c.lat=f.geometry.location.lat(),c.lon=f.geometry.location.lng()),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/GetPartialNNI",data:JSON.stringify(c),async:!0,beforeSend:function(){$("#nni").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'></div>")},success:function(a){$("#nni").html(a)},error:function(a,b,c){var d=new d;d.PageName="Index",d.StepName="DrawDetailsUp",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-ddu-01",logError(d,"#nni")),a.readyState==0&&(d.ErrorCode="c-i-j-ddu-02",logError(d,"#nni"))}})},50),$("#quoteLookup").empty(),setTimeout(function(){var a=cities=states=streetNumber=route="";if($("#address").hasClass("selected")&&$("#pac-input").val().length>1){var b=searchBox.getPlace();for(var c=0;c<b.address_components.length;c++)for(var d=0;d<b.address_components[c].types.length;d++)b.address_components[c].types[d]=="administrative_area_level_1"?states=b.address_components[c].short_name:b.address_components[c].types[d]=="locality"?cities=b.address_components[c].long_name:b.address_components[c].types[d]=="street_number"?streetNumber=b.address_components[c].long_name:b.address_components[c].types[d]=="route"&&(route=b.address_components[c].long_name)}else $("#clli").hasClass("selected")&&$("#clli-input").val().length==8&&$.ajax({type:"POST",url:"Home/ClliLatLon",data:{clli:$("#clli-input").val()},async:!1,success:function(b){lat=b.latitude,lon=b.longitude,states=b.state,cities=b.city,a=b.postalCode;var c=b.address1.split("|");streetNumber=c[0],route=c[1]},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ClliQuote",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-cq-01",logError(d,"#quoteLookup"))}});var e=new requestData;e.addressConcat=streetNumber+" "+route+"|"+cities+"|"+states,$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/CogQuoteLookup",data:JSON.stringify(e),async:!0,beforeSend:function(){$("#quoteLookup").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'></div>")},success:function(a){$("#quoteLookup").html(a)},error:function(a,b,c){var d=new d;d.PageName="Index",d.StepName="DrawDetailsUp",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-ddu-01",logError(d,"#quoteLookup")),a.readyState==0&&(d.ErrorCode="c-i-j-ddu-02",logError(d,"#quoteLookup"))}})},50),setTimeout(function(){showHideDetails(!0,"cog")},100)}function addContact(a){$("#CompanyInput").val(a),$("#hiddenCompany").val(a),$(".loading").css("z-index","99"),$(".loading").animate({opacity:.8},500),$("#contactUpdatePanel").fadeIn(500),$("#closeButton").click(function(){$(".loading").css("z-index","-10"),$(".loading").animate({opacity:0},500),$("#contactUpdatePanel").fadeOut(500)}),$("#OfficeInput, #MobileInput").focusout(function(){$(this).val(function(a,b){return b.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3")}),$(this).val().length!=12?$("label[for='"+$(this).attr("id")+"']").addClass("important"):$("label[for='"+$(this).attr("id")+"']").removeClass("important")}),$("#CompanyInput, #ContactInput, #EmailInput").focusout(function(){$(this).val().length<1?$("label[for='"+$(this).attr("id")+"']").addClass("important"):$("label[for='"+$(this).attr("id")+"']").removeClass("important")})}function submitContact(){var a=!0;$("#contactUpdateContent label").each(function(){if($(this).hasClass("important"))return a=!1,alert("Please check input. All values must be filled and phone numbers should be in xxx-xxx-xxxx format."),!1}),$("#contactUpdateContent input[type=text]").each(function(){if($(this).val().length<1)return a=!1,alert("Please check input. All values must be filled and phone numbers should be in xxx-xxx-xxxx format."),!1});if(a){var b=new cableContact;b.vendorNormName=$("#CompanyInput").val(),b.parentVendor=$("#CompanyInput").val(),b.contactName=$("#ContactInput").val(),b.contactOffice=$("#OfficeInput").val(),b.contactMobile=$("#MobileInput").val(),b.contactEmail=$("#EmailInput").val(),setTimeout(function(){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/InsertContact",data:JSON.stringify(b),async:!0,success:function(a){$(".loading").css("z-index","-10"),$(".loading").animate({opacity:0},500),$("#contactUpdatePanel").fadeOut(500),setTimeout(function(){$("#Contact").empty();var a=new ContactString;a.vendor=$("#hiddenCompany").val(),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/CableContactList",data:JSON.stringify(a),async:!0,success:function(a){$("#Contact").html(a)},error:function(a,b,c){var d=new d;d.PageName="Index",d.StepName="Update Contacts Table",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-sc-03",logError(d,"#Contact")),a.readyState==0&&(d.ErrorCode="c-i-j-sc-04",logError(d,"#Contact"))}})},10)},error:function(a,b,c){var d=new d;d.PageName="Index",d.StepName="submitContact",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-sc-01",logError(d,"#Contact")),a.readyState==0&&(d.ErrorCode="c-i-j-sc-02",logError(d,"#Contact"))}})},10)}}function deleteContact(a,b){yesNoDialog("confirm","Don't delete","Delete","Are you sure you want to delete this contact?",0,a,b)}function confirmReturn(a,b,c,d){switch(a){case 0:DeleteConfirmed(b,c,d);break;default:}}function DeleteConfirmed(a,b,c){if(a){var d=new cableContact;d.id=b,setTimeout(function(){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/RemoveContact",data:JSON.stringify(d),async:!0,success:function(a){setTimeout(function(){$("#Contact").empty();var a=new ContactString;a.vendor=c,$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/CableContactList",data:JSON.stringify(a),async:!0,success:function(a){$("#Contact").html(a)},error:function(a,b,c){var d=new d;d.PageName="Index",d.StepName="Update Contacts Table",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-dc-03",logError(d,"#Contact")),a.readyState==0&&(d.ErrorCode="c-i-j-dc-04",logError(d,"#Contact"))}})},10)},error:function(a,b,c){var d=new d;d.PageName="Index",d.StepName="deleteContact",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-dc-01",logError(d,"#Contact")),a.readyState==0&&(d.ErrorCode="c-i-j-dc-02",logError(d,"#Contact"))}})},10)}}function ShowNearbyQuotes(){showHideDetails(!0,"quote"),$("#quote").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'></div>"),setTimeout(function(){var a=new requestData;if($("#clli").hasClass("selected"))$("#clli-input").val().length!=8?$("#quoteLookup").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><br />No CLLI Code entered</div>"):$.ajax({type:"POST",url:"Home/ClliLatLon",data:{clli:$("#clli-input").val()},async:!1,success:function(b){a.lat=b.latitude,a.lon=b.longitude},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ClliLatLon",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-cll-01",logError(d,"#map-canvas"))}});else if($("#latLng").hasClass("selected"))$("#lat-input").val().length<1||$("#lng-input").val().length<1?$("#quoteLookup").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><br />Missing Lat / Lon</div>"):(($("#lat-input").val().length<1||$("#lng-input").val().length<1)&&$("#quoteLookup").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><br />Missing Lat / Lon</div>"),a.lat=$("#lat-input").val(),a.lon=$("#lng-input").val());else{var b=searchBox.getPlace();typeof b=="undefined"||b==null?$("#quoteLookup").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><br />No address selected</div>"):(a.lat=b.geometry.location.lat(),a.lon=b.geometry.location.lng())}a.range=$("#slider-vertical").slider("value")<1?1:$("#slider-vertical").slider("value"),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/CogQuoteLookupFull",data:JSON.stringify(a),async:!0,success:function(a){$("#quote").fadeOut(500),setTimeout(function(){$("#quote").empty()},500),setTimeout(function(){$("#quote").html(a),$("#quote").fadeIn(200)},1e3)},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ShowNearbyQuotes",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-ddu-01",logError(d,"#quote")),a.readyState==0&&(d.ErrorCode="c-i-j-ddu-02",logError(d,"#quote"))}})},50)}function ExportToQuotesToExcel(){var a=searchBox.getPlace();setTimeout(function(){var b=new requestData;b.lat=a.geometry.location.lat(),b.lon=a.geometry.location.lng(),b.range=$("#slider-vertical").slider("value")<1?1:$("#slider-vertical").slider("value"),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/ExportQuotes",data:JSON.stringify(b),async:!0,success:function(a){},error:function(a,b,c){var d=new d;d.PageName="Index",d.StepName="ExportQuotes",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-ddu-01",logError(d,"#quote")),a.readyState==0&&(d.ErrorCode="c-i-j-ddu-02",logError(d,"#quote"))}})},50)}function showHideDetails(a,b){a?($("#detailsLayer").animate({"margin-top":"-649px",height:"630px","padding-bottom":"40px"},300),$("#subcontent").children("div").each(function(){if($(this).attr("id")==b||$(this).attr("id")=="hider"){switch(b){case"ef":ShowEF(1)}$(this).show()}else $(this).hide()}),$("#header").children().find("li").each(function(){$(this).text().toLowerCase()==b?$(this).attr("id","selected"):$(this).attr("id","")})):$("#detailsLayer").animate({"margin-top":"0px",height:"10px","padding-bottom":"12px"},300)}function ShowEfDetails(a,b){$("#detailsLayer").animate({"margin-top":"-649px",height:"630px","padding-bottom":"40px"},300),$("#subcontent").children("div").each(function(){$(this).attr("id")=="ef"||$(this).attr("id")=="hider"?$(this).show():$(this).hide()}),$("#header").children().find("li").each(function(){$(this).text().toLowerCase()=="ef"?$(this).attr("id","selected"):$(this).attr("id","")}),$("#ef").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'></div>"),setTimeout(function(){$.ajax({type:"POST",url:"/Partial/EFLookupAddressId",data:{addressId:a,type:b},async:!0,success:function(a){$("#ef").fadeOut(500),setTimeout(function(){$("#ef").empty()},500),setTimeout(function(){$("#ef").html(a),$("#ef").fadeIn(200)},1e3)},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ShowEfDetails",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-sed-01",logError(d,"#ef")),a.readyState==0&&(d.ErrorCode="c-i-j-sed-02",logError(d,"#ef"))}})},50)}function ShowEF(a){$("#ef").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'></div>");var b,c,d,e;e=!0,setTimeout(function(){if($("#clli").hasClass("selected"))$("#clli-input").val().length!=8?($("#ef").empty(),$("#ef").html("<div style='text-align:center;width=100%'>No CLLI Code entered</div>"),e=!1):$.ajax({type:"POST",url:"Home/ClliLatLon",data:{clli:$("#clli-input").val()},async:!1,success:function(a){b=a.latitude,c=a.longitude},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ClliLatLon",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-cll-01",logError(d,"#map-canvas"))}});else if($("#latLng").hasClass("selected"))$("#lat-input").val().length<1||$("#lng-input").val().length<1?($("#ef").empty(),$("#ef").html("<div style='text-align:center;width=100%'>Missing Lat / Lon.</div>"),e=!1):(b=$("#lat-input").val(),c=$("#lng-input").val());else if($("#pac-input").val().length<1)$("#ef").empty(),$("#ef").html("<div style='text-align:center;width=100%'>Please enter address.</div>"),e=!1;else{var f=searchBox.getPlace();b=f.geometry.location.lat(),c=f.geometry.location.lng()}d=$("#slider-vertical").slider("value")<1?1:$("#slider-vertical").slider("value"),e&&$.ajax({type:"POST",url:"/Partial/EFLookupLatLon",data:{lat:b,lon:c,milesRange:d,ordering:a},async:!0,success:function(a){$("#ef").fadeOut(500),setTimeout(function(){$("#ef").empty()},500),setTimeout(function(){$("#ef").html(a),$("#ef").fadeIn(200)},1e3)},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ShowNearbyEF",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-ddu-01",logError(d,"#ef")),a.readyState==0&&(d.ErrorCode="c-i-j-ddu-02",logError(d,"#ef"))}})},50)}function SelectRadio(a,b){$("input[name="+a+"][value="+b+"]").prop("checked",!0),ShowEF(b)}function plotLatLon(a,b,c){showHideDetails(!1,"ef");var d=map.getBounds(),e="http://maps.google.com/mapfiles/ms/icons/",f={url:e+"green-dot.png",size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},g=new google.maps.Marker({map:map,icon:f,title:a,position:new google.maps.LatLng(b,c),Zindex:4});infowindow.setContent("<div style='font-size: 0.9em'><strong>"+a+"</strong>"+"<p style='font-size: 0.8em'><b>Latitude: </b>"+b+"<br />"+"<b>Longitude: </b>"+c+"</p></div>"),google.maps.event.addListener(g,"click",function(a){return function(){infowindow.open(map,a)}}(g)),d.extend(new google.maps.LatLng(b,c)),infowindow.open(map,g),markers.push(g),map.fitBounds(d),maerk.setMap(map),setTimeout(function(){var a=google.maps.event.addListener(map,"idle",function(){map.getZoom()>13&&map.setZoom(13),google.maps.event.removeListener(a)})},15)}function getTrend(a,b){var c=new google.visualization.DataTable;c.addColumn("string","Week"),c.addColumn("number","Utilization");var d={backgroundColor:"#fff",titlePosition:"none",lineWidth:3,width:"100%",height:"90%",legend:{position:"none"},chartArea:{left:0,top:0,width:"100%",height:"90%"},animation:{duration:1e3,easing:"out"},hAxis:{textPosition:"none",gridlines:{color:"#fff"},minorGridlines:{color:"#fff",count:0}},vAxis:{textPosition:"in",maxValue:100,minValue:0,viewWindowMode:"maximized",gridlines:{color:"#fff"},minorGridlines:{color:"#fff"}}};$.ajax({type:"GET",url:"Rest/SDPTrend",async:!0,data:{addressID:a,type:b},success:function(a){for(var b=0;b<a.length;b++)c.addRow([8-b+(b==a.length-1?" week ago":" weeks ago"),Math.round(a[b]*1e4)/100]);var e=new google.visualization.LineChart(document.getElementById("graph"));e.draw(c,d),$("#trendGraph").css({opacity:1,"z-index":3})},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ajaxgetTrend",d.ErrorDetails=a.responseText+" -- "+c;if(a.readyState==4)return d.ErrorCode="c-i-j-agt-01",d;if(a.readyState==0)return d.ErrorCode="c-i-j-agt-02",d}})}function hideTrend(){$("#trendGraph").css({opacity:0,"z-index":-10})}function showSdpNni(a){a!==null&&typeof a!="undefined"&&$.ajax({type:"GET",url:"partial/GetNniFromSdp",async:!0,data:{addressID:a},beforeSend:function(){$("#nni").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'></div>")},success:function(a){setTimeout(function(){showHideDetails(!0,"nni")},100),$("#nni").html(a)},error:function(a,b,c){var d=new d;d.PageName="Index",d.StepName="getSdpNnni",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-gsn-01",logError(d,"#nni")),a.readyState==0&&(d.ErrorCode="c-i-j-gsn-02",logError(d,"#nni"))}})}function nniSorting(){var a,b,c,d,e,f,g,h}function ContactString(){var a}function cableContact(){var a,b,c,d,e,f}function ErrorInsert(){var a,b,c,d}google.load("visualization","1.0",{packages:["corechart"]})
;function indexAjax(a,b,c,d){function k(){var a=new Date;return a.setDate(a.getDate()+1),a.setHours(8,0,0,0),a}function l(a,b){if(typeof a!="string"||typeof b!="object")return null;localStorage.setItem(a,{data:b,expiration:k()})}var e="Index",f="#map-canvas",g=new ErrorInsert(e,a),h,i,j;return j=h=i=null,c=c!==null&&typeof c=="object"?c:null,b!==null&&typeof b=="string"&&(f=b),{Sdp:ajaxCall(ajaxDetails().HttpType.GET,"/Main/getSDPLocations",j,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.NULL,ajaxDetails().nullBeforeSend,function(a){l("sdpMarkers",a),PlotSDPToMap(a)},function(a,b,c){g.ErrorDetails=a.responseText+" -- "+c,a.readyState===4&&(g.ErrorCode="c-i-j-asm-01"),a.readyState===0&&(g.ErrorCode="c-i-j-gi-02"),logError(g,f)}),PlotSdp:ajaxCall(ajaxDetails().HttpType.POST,"Main/LocationSDP",c,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(a){infowindow.setContent(a),infowindow.open(map,d)},function(a,b,c){g.ErrorDetails=a.responseText+" -- "+c,a.readyState===4&&(g.ErrorCode="c-i-j-als-01"),a.readyState===0&&(g.ErrorCode="c-i-j-als-02"),logError(g,f)}),ClliMatch:ajaxCall(ajaxDetails().HttpType.POST,"Home/JsonClliMatch",c,ajaxDetails().Synchronous.FALSE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(a){$(d).autocomplete({source:a,select:function(){searchProviders()}})},function(a,b,c){g.ErrorDetails=a.responseText+" -- "+c,a.readyState===4&&(g.ErrorCode="c-i-j-gtc-03"),logError(g,f)}),SwcOnMap:ajaxCall(ajaxDetails().HttpType.GET,"Rest/getSwcByBoundary",c,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(a){removeFromSwc(a),addNewSwc(a),showMarkers()},function(a,b,c){g.ErrorDetails=a.responseText+" -- "+c,a.readyState===4&&(g.ErrorCode="c-i-j-gsa-01"),a.readyState===2&&(g.ErrorCode="c-i-j-gsa-02"),logError(g,f)}),FiberPoints:ajaxCall(ajaxDetails().HttpType.GET,"ArcGis/FiberPoints",c,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(a){addFiberMap(c.vendorName,a)},function(a,b,c){g.ErrorDetails=a.responseText+" -- "+c,a.readyState===4&&(g.ErrorCode="c-i-j-gfp-01"),a.readyState===2&&(g.ErrorCode="c-i-j-gfp-02"),logError(g,f)})}}function addSDPToMap(){var a=new Comet;assetLocations=new Array;if(localStorageAllowed&&localStorage.getItem("sdpMarkers")!==null&&localStorage.getItem("sdpMarkers").expiration>=a.TODAY()){PlotSDPToMap(JSON.parse(localStorage.getItem("sdpMarkers").data));return}var b=trimFuncName(arguments.callee.toString());runAjax(indexAjax(b,"#map-canvas").Sdp)}function PlotSDPToMap(a){for(var b=0;b<a.length;b++){var c=createMarker(a[b].AddressID,a[b].LatLng.Lat,a[b].LatLng.Lng,slocationIcons[a[b].Services-1],2,!1);infoHover=new google.maps.InfoWindow,google.maps.event.addListener(c,"click",function(a,b){return function(){var b=trimFuncName(arguments.callee.toString()),c={addressID:a.id};runAjax(indexAjax(b,"#map-canvas",c,a).PlotSdp)}}(c,b)),google.maps.event.addListener(c,"mouseover",function(a,b){return function(){if(infowindow.getMap()===null||typeof infowindow.getMap()=="undefined")infoHover.setContent((a>>3&!0?"<img src='../../Images/star.png'>":"")+(a>>2&!0?"<img src='../../Images/pentagon.png'>":"")+(a>>1&!0?"<img src='../../Images/triangle.png'>":"")+(a&!0?"<img src='../../Images/square.png'>":"")),infoHover.open(map,b);google.maps.event.addListener(map,"mousemove",function(){infoHover.close()})}}(a[b].Services,c));var d=new assetLocation(c,a[b].Services,a[b].AddressID);assetLocations.push(d)}showMarkers()}function fiberExpand(a){a?$("#fiberSpan").height($(window).height()-$("#map-canvas").offset().top-50):$("#fiberSpan").height(50)}function searchProviders(){var a="",b="",c=searchSettings();if(c.SafeToSearch===!0){var d=new google.maps.LatLngBounds;for(var e=0;e<$("#multiProviders").val().length;e++)a+=$("#multiProviders").val()[e]+", ";a=a.substr(0,a.length-2);var f=cities=states=streetNumber=route="",g=lng="";if(c.AddressSearch===!0){var h=searchBox.getPlace();if(h.geometry!==null||typeof h.geometry!="undefined"){var i=createMarker("searchMarker",h.geometry.location.lat(),h.geometry.location.lng(),null,2,!1);createSearchCircle(i),google.maps.event.addListener(i,"click",function(a){return function(){infowindow.setContent(getInfoWindow("pin",null,h.name,h.geometry.location.lat(),h.geometry.location.lng())),infowindow.open(map,a)}}(i)),google.maps.event.addListener(i,"dragend",function(a){return function(){searchTableSelect(document.getElementById("latLng"),!0),setTimeout(function(a){$("#lat-input").val(a.getPosition().lat()),$("#lng-input").val(a.getPosition().lng()),searchProviders()}(a),150)}}(i)),d.extend(h.geometry.location),markers.push(i);for(var e=0;e<h.address_components.length;e++)for(var j=0;j<h.address_components[e].types.length;j++)h.address_components[e].types[j]=="postal_code"?f=h.address_components[e].long_name:h.address_components[e].types[j]=="administrative_area_level_1"?states=h.address_components[e].short_name:h.address_components[e].types[j]=="locality"?cities=h.address_components[e].long_name:h.address_components[e].types[j]=="street_number"?streetNumber=h.address_components[e].long_name:h.address_components[e].types[j]=="route"&&(route=h.address_components[e].long_name);g=h.geometry.location.lat(),lng=h.geometry.location.lng()}cities.length>0&&states.length>0&&(b=states,$("#multiStates").children().each(function(){$(this).val()===states?$(this).attr("selected","selected"):$(this).removeAttr("selected")}),$("#multiStates").multiselect("refresh")),map.fitBounds(d),setTimeout(function(){var a=google.maps.event.addListener(map,"idle",function(){map.getZoom()>14&&map.setZoom(14),google.maps.event.removeListener(a)})},15)}else if($("#clli").hasClass("selected"))$.ajax({type:"POST",url:"Home/ClliLatLon",data:{clli:$("#clli-input").val()},async:!1,success:function(a){g=a.latitude,lng=a.longitude;var c=createMarker(a.city+"|"+a.state,g,lng,null,2,!1);createSearchCircle(c),google.maps.event.addListener(c,"click",function(b){return function(){infowindow.setContent(getInfoWindow("pin",a.city+","+a.state,null,g,lon)),infowindow.open(map,b)}}(c)),d.extend(new google.maps.LatLng(a.latitude,a.longitude)),markers.push(c),$("#multiStates").children().each(function(){$(this).val()===a.state?$(this).attr("selected","selected"):$(this).removeAttr("selected")}),$("#multiStates").multiselect("refresh"),b=a.state,cities=a.city,f=a.postalCode,map.fitBounds(d),setTimeout(function(){var a=google.maps.event.addListener(map,"idle",function(){map.getZoom()>13&&map.setZoom(13),google.maps.event.removeListener(a)})},15);var e=a.address.split("|");streetNumber=e[0],route=e[1]},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ClliLatLon",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-cll-01",logError(d,"#map-canvas"))}});else if($("#latLng").hasClass("selected"))$("#lat-input").val().length<1||$("#lng-input").val().length<1?alert("Please fill in Latitude and Longitude boxes."):(g=$("#lat-input").val(),lng=$("#lng-input").val(),range=$("#slider-vertical").slider("value")<1?1:$("#slider-vertical").slider("value"),$.ajax({type:"POST",url:"Home/LatLonAddress",data:{lat:g,lng:lng,range:range},async:!0,success:function(a){var c=createMarker(g+" "+lng,g,lng,image,2,!0),e=createMarker(a.city+"|"+a.state,a.latitude,a.longitude,image,2,!1);createSearchCircle(c),google.maps.event.addListener(c,"click",function(a){return function(){infowindow.setContent(getInfoWindow("pin",null,null,g,lon)),infowindow.open(map,a)}}(c)),google.maps.event.addListener(c,"dragend",function(a){return function(){searchTableSelect(document.getElementById("latLng"),!0),setTimeout(function(a){$("#lat-input").val(a.getPosition().lat()),$("#lng-input").val(a.getPosition().lng()),searchProviders()}(a),150)}}(c));var h=a.address.split("|");streetNumber=h[0],route=h[1],google.maps.event.addListener(e,"click",function(b){return function(){var c=streetNumber+" "+route+"<br"+a.city+", "+a.state;infowindow.setContent(getInfoWindow("pin",c,null,a.latitude,a.longitude)),infowindow.open(map,b)}}(e)),d.extend(new google.maps.LatLng(g,lon)),d.extend(new google.maps.LatLng(a.latitude,a.longitude)),markers.push(c),markers.push(e),$("#multiStates").children().each(function(){$(this).val()===a.state?$(this).attr("selected","selected"):$(this).removeAttr("selected")}),$("#multiStates").multiselect("refresh"),b=a.state,cities=a.city,f=a.postalCode,map.fitBounds(d),setTimeout(function(){var a=google.maps.event.addListener(map,"idle",function(){map.getZoom()>13&&map.setZoom(13),google.maps.event.removeListener(a)})},15)},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="LatLonAddress",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-lla-01",logError(d,"#map-canvas"))}}));else{length=$("#multiStates").val().length;for(var e=0;e<length;e++)b+=$("#multiStates").val()[e]+", ";b=b.substr(0,b.length-2)}setTimeout(function(){searchMap(a,cities,f,b)},100),setTimeout(function(){locateNearest(a,cities,f,b,g,lng,streetNumber,route)},20)}}function searchMap(a,b,c,d){var e=$("#multiStates").val()?$("#multiStates").val().length:50,f=new requestData;f.providers=a,f.states=d,f.cities=c.length>3?null:b,f.zips=c,f.passthrough=0,f.maxPassthrough=Math.ceil(e/3),requestMapData(f)}function locateNearest(a,b,c,d,e,f,g,h){var i=new requestData;i.providers=a,i.states=d,i.cities=c.length>3?null:b,i.zips=c,i.passthrough=0,i.maxPassthrough=0,i.lat=e,i.lon=f,i.range=$("#slider-vertical").slider("value")<1?1:$("#slider-vertical").slider("value"),i.addressConcat=g+" "+h+"|"+b+"|"+d,setTimeout(function(){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/Connections",data:JSON.stringify(i),async:!0,beforeSend:function(){$("#selectDetail").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'></div>")},complete:function(){loadEnd()},success:function(a){$("#selectDetail").fadeOut("fast"),$("#selectDetail").html(a),$("#selectDetail").fadeIn("normal"),setTimeout(function(){addLegend()},10)},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="Connections",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-lncn-01",logError(d,"#selectDetail")),a.readyState==0&&(d.ErrorCode="c-i-j-lncn-02",logError(d,"#selectDetail"))}})},10),($("#pac-input").val().length>1||$("#clli-input").val().length>1||$("#lat-input").val().length>1&&$("#lat-input").val().length>1)&&setTimeout(function(){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Home/ClecCount",data:JSON.stringify(i),async:!0,success:function(a){i.maxPassthrough=a==0?0:a<1e3?1:Math.ceil(a/1e3);for(i.passthrough=0;i.passthrough<i.maxPassthrough;i.passthrough++)$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Home/JsonClec",data:JSON.stringify(i),async:!0,complete:function(){showMarkers()},success:function(a){var b={coord:[0,0,30],type:"circle"},c,d=new google.maps.LatLngBounds,e=a.length;for(var f=0;f<e;f++)c=new google.maps.Marker({position:new google.maps.LatLng(a[f].latitude,a[f].longitude),map:map,icon:a[f].vendorParentName=="Level3"?icons[0]:a[f].vendorParentName.toLowerCase()==="level3_tw"?icons[12]:icons[1],shape:b,flat:!0,id:a[f].addressClli,zIndex:10,origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(5,5)}),clecMarkers.push(c),google.maps.event.addListener(c,"click",function(b,c){return function(){var d=a[c].vendorParentName+"</b> (CLEC) - "+a[c].addressClli,e=a[c].address+"<br>"+a[c].city+", "+a[c].state;infowindow.setContent(getInfoWindow("default",d,e,a[c].latitude,a[c].longitude)),infowindow.open(map,b)}}(c,f)),d.extend(c.position)},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="JsonClec",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-lnjc-01",logError(d,"#map-canvas")),a.readyState==0&&(d.ErrorCode="c-i-j-lnjc-02",logError(d,"#map-canvas"))}})},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ClecCount",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-lncc-01",logError(d,"#map-canvas")),a.readyState==0&&(d.ErrorCode="c-i-j-lncc-02",logError(d,"#map-canvas"))}})},50)}function requestMapData(a){var b=!1,c=a.states.split(",");for(var d=0;d<c.length;d++)$("#multiStates option").each(function(){$(this).val()===c[d]&&(b=!0)});var e=new Array;b&&(function(a){getMSO(a,function(a){for(var b=0;b<a.length;b++)e.push([getInfoWindow("default",a[b].vendorNormName+" (MSO)",a[b].postalCode,a[b].latitude,a[b].longitude),a[b].latitude,a[b].longitude,a[b].vendorParentName,a[b].vendorNormName,"UNKNOWN",a[b].city,a[b].state,a[b].postalCode,a[b].boundaryKML]),jQuery.inArray(a[b].vendorNormName,parentVendors)==-1&&parentVendors.push(a[b].vendorNormName);addCableData(e)})}(a),a.passthrough++)}function getMSO(a,b){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"parallel/JsonCableProviders",data:JSON.stringify(a),async:!0,success:function(a){b(a)},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="getMSO",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-gm-01"),a.readyState==0&&(d.ErrorCode="c-i-j-gm-02"),logError(d,"#map-canvas")}})}function getFiber(a){var b=a==="level3";if(a==="timeWarner")showMarkers();else if(b&&!lvl3Filled)loadStart(),$.ajax({type:"POST",url:"Parallel/FiberMap",data:{company:a,maxOnly:!0,polyGroup:0},async:!0,success:function(c){for(var d=0;d<c;d++)setTimeout(function(d){$.ajax({type:"POST",url:"Parallel/FiberMap",data:{company:a,maxOnly:!1,polyGroup:d},async:!0,success:function(a){var c=a.length;for(var d=0;d<c;d++){var e=new Array;for(var f=0;f<a[d].Coordinates.length;f++)e.push(new google.maps.LatLng(a[d].Coordinates[f].Lat,a[d].Coordinates[f].Lng));var g;d%1e3==0?setTimeout(function(a,b){g=new google.maps.Polyline({path:a,geodesic:!0,strokeColor:b?MapColors.red:MapColors.orange,strokeOpacity:1,strokeWeight:2,zIndex:0,map:map,message:"Level 3 Fiber"})}(e,b),1):g=new google.maps.Polyline({path:e,geodesic:!0,strokeColor:b?MapColors.red:MapColors.orange,strokeOpacity:1,strokeWeight:2,zIndex:0,map:map,message:"level 3 Fiber"}),google.maps.event.addListener(g,"click",function(a){infoFiber.setContent(this.message),infoFiber.setPosition(a.latLng),infoFiber.open(map)}),b?lvl3Markers.push(g):timeWarnerMarkers.push(g)}},error:function(b,c,d){var e=new ErrorInsert;e.PageName="Index",e.StepName="ajaxGetFiber: "+a,e.ErrorDetails=b.responseText+" -- "+d,b.readyState==4&&(e.ErrorCode="c-i-j-al3-03",logError(e,"#map-canvas"))}}),d==c-1&&(setTimeout(loadEnd(),2500),b&&(lvl3Filled=!0),b||(timeWarnerFilled=!0),showMarkers())}(d),1)},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="ajaxGetLevel3",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-al3-01",logError(d,"#map-canvas")),a.readyState==0&&(d.ErrorCode="c-i-j-al3-02",logError(d,"#map-canvas"))}});else if(b===!1&&a!=="timeWarner")if($("input[id='"+a+"']").prop("checked")){var c=map.getBounds(),d=trimFuncName(arguments.callee.toString()),e={vendorName:a,bottomLeftLat:26.4,bottomLeftLng:-132.1,topRightLat:49.4,topRightLng:-59.1};runAjax(indexAjax(d,"#map-canvas",e,null).FiberPoints)}else showMarkers();else showMarkers()}function getLata(){lataFilled?showMarkers():(loadStart(),$.ajax({type:"GET",url:"Rest/getLATANums",async:!0,success:function(a){for(var b=0;b<a.length;b++)setTimeout(function(b){$.ajax({type:"GET",url:"Rest/getLATAByBoundary",data:{group:a[b]},async:!0,success:function(a){for(var b=0;b<a.length;b++){for(var c=0;c<a[b].length;c++){var d=new Array;for(var e=0;e<a[b][c].Coordinates.length;e++)d.push(new google.maps.LatLng(a[b][c].Coordinates[e].Lat,a[b][c].Coordinates[e].Lng));var f=new google.maps.Polyline({path:d,strokeColor:map.getMapTypeId()==="hybrid"?MapColors.white:MapColors.black,fillColor:map.getMapTypeId()==="hybrid"?MapColors.darkWhite:MapColors.lightBlack,strokeOpacity:0,fillOpacity:.4,icons:[{icon:{path:"M 0, -0.2, 0, 0.2",strokeOpacity:1,strokeWeight:1,scale:3},offset:"100%",repeat:"4px"}],zIndex:0,map:map});lataMarkers.push(f)}var g=new MapLabel({text:a[b][0].Name,position:new google.maps.LatLng(a[b][0].Lat,a[b][0].Lng),fontSize:12,fontColor:map.getMapTypeId()==="hybrid"?MapColors.black:MapColors.white,labelInBackground:!0,strokeColor:map.getMapTypeId()==="hybrid"?MapColors.white:MapColors.black,map:map});lataMarkers.push(g)}}}),b==a-1&&(setTimeout(loadEnd(),2500),lataFilled=!0,showMarkers())}(b),20)},error:function(a,b,c){var d=new ErrorInsert;d.PageName="Index",d.StepName="getLataArray",d.ErrorDetails=a.responseText+" -- "+c,a.readyState==4&&(d.ErrorCode="c-i-j-gla-01",logError(d,"#map-canvas")),a.readyState==0&&(d.ErrorCode="c-i-j-gla-02",logError(d,"#map-canvas"))}}))}function getSwc(){var a=map.getBounds(),b=trimFuncName(arguments.callee.toString()),c={bottomLeftLat:a.getSouthWest().lat(),bottomLeftLng:a.getSouthWest().lng(),topRightLat:a.getNorthEast().lat(),topRightLng:a.getNorthEast().lng()};runAjax(indexAjax(b,"#map-canvas",c,null).SwcOnMap)}function removeFromSwc(a){for(var b=0;b<swcMarkers.length;b++){var c=$.grep(a,function(a){return a.Code===swcMarkers[b].label.text});c.length===0&&(swcMarkers[b].polygon.setMap(null),swcMarkers[b].label.setMap(null),swcMarkers[b]=null,swcMarkers.splice(b,1))}}function addNewSwc(a){for(var b=0;b<a.length;b++){var c=$.grep(swcMarkers,function(c){return c.label.text===a[b].Name});if(c.length===0){var d=new Array;for(var e=0;e<a[b].Coordinates.length;e++)d.push(new google.maps.LatLng(a[b].Coordinates[e].Lat,a[b].Coordinates[e].Lng));var f={polygon:new google.maps.Polyline({path:d,strokeColor:map.getMapTypeId()==="hybrid"?MapColors.yellow:MapColors.purple,fillColor:map.getMapTypeId()==="hybrid"?MapColors.yellow:MapColors.purple,strokeOpacity:0,fillOpacity:.4,icons:[{icon:{path:"M 0, -0.2, 0, 0.2",strokeOpacity:1,strokeWeight:1.5,scale:3},offset:"100%",repeat:"4px"}],zIndex:0}),label:new MapLabel({text:a[b].Name,position:new google.maps.LatLng(a[b].Centroid.Lat,a[b].Centroid.Lng),fontSize:10,fontColor:map.getMapTypeId()==="hybrid"?MapColors.purple:MapColors.yellow,labelInBackground:!0,strokeColor:map.getMapTypeId()==="hybrid"?MapColors.yellow:MapColors.purple})};swcMarkers.push(f)}}}function addLegend(){var a=$("#msoGrid > tbody > tr > td > span").length,b=0;$("#msoGrid > tbody > tr > td > span").each(function(){var c=2*Math.PI/a,d=Math.sin(b*c+0)*127+128,e=Math.sin(b*c+2)*127+128,f=Math.sin(b*c+4)*127+128;$(this).css("background-color",RGB2Color(d,e,f)),$(this).mouseenter(function(){$(this).css("background-color","#c7d1d6")}),$(this).mouseleave(function(){$(this).css("background-color",RGB2Color(d,e,f))}),b++})}function addCableData(a){var b={coord:[0,0,30],type:"circle"},c,d=[];parentVendors.sort();for(var e=0;e<a.length;e++)if(a[e][9]!=null&&jQuery.inArray(a[e][8],d)<0&&a[e][9].indexOf("nd</")<0){d.push(a[e][8]),xmlDoc=$.parseXML(a[e][9]),coordinates=$(xmlDoc).find("coordinates").text().split(" ");var f=new Array,g=minLng=200,h=maxLng=-200;for(var i=0;i<coordinates.length;i++){var j=coordinates[i].split(",");f.push(new google.maps.LatLng(parseFloat(j[1]),parseFloat(j[0])))}var k=2*Math.PI/parentVendors.length,l=Math.sin(jQuery.inArray(a[e][4],parentVendors)*k+0)*127+128,m=Math.sin(jQuery.inArray(a[e][4],parentVendors)*k+2)*127+128,n=Math.sin(jQuery.inArray(a[e][4],parentVendors)*k+4)*127+128,o=new google.maps.Polygon({paths:f,strokeColor:RGB2Color(l,m,n),strokeOpacity:.8,strokeWeight:.8,fillColor:RGB2Color(l,m,n),fillOpacity:.4,zIndex:1});o.setMap(map),msoMarkers.push(o),o.name=a[e][0],google.maps.event.addListener(o,"click",function(a){infowindow.setContent(o.name),infowindow.setPosition(a.latLng),infowindow.open(map)}),google.maps.event.addListener(o,"mouseover",function(){this.setOptions({fillOpacity:0})}),google.maps.event.addListener(o,"mouseout",function(){this.setOptions({fillOpacity:.4})})}setTimeout(function(){showMarkers()},50)}function addFiberMap(a,b){var c,d=0;vendorFiberMarkers[a]=new Array;for(var e in vendorFiberMarkers){if(e==a){var f=2*Math.PI/Object.keys(vendorFiberMarkers).length,g=Math.sin(d*f+0)*127+128,h=Math.sin(d*f+2)*127+128,i=Math.sin(d*f+4)*127+128;c=RGB2Color(g,h,i);break}d++}for(var j=0;j<b.length;j++){var k=new Array;for(var l=0;l<b[j].Coordinates.length;l++)k.push(new google.maps.LatLng(b[j].Coordinates[l].Lat,b[j].Coordinates[l].Lng));var m=new google.maps.Polyline({path:k,geodesic:!0,strokeColor:c,strokeOpacity:1,strokeWeight:2,zIndex:0,map:map,message:a+" Fiber"});(infoFiber.getMap()!==null||typeof infoFiber.getMap()!="undefined")&&infoFiber.close(),google.maps.event.addListener(m,"click",function(a){infoFiber.setContent(this.message),infoFiber.setPosition(a.latLng),infoFiber.open(map)}),vendorFiberMarkers[a].push(m)}showMarkers()}function showMarkers(a){var b=!1;map.getZoom()>=11&&(b=!0);if(a===null||typeof a=="undefined")$("#legend table tr input:checkbox").each(function(){var a=$(this).attr("id"),c=$(this).prop("checked");switch(a){case"level3ShowHideMap":setTimeout(function(){for(var a=0;a<lvl3Markers.length;a++)a%2500==0?setTimeout(function(a){lvl3Markers[a].setMap(c?map:null)}(a),1):lvl3Markers[a].setMap(c?map:null)},50);break;case"twShowHideMap":twLayer.setMap(c?map:null);break;case"swcShowHideMap":setTimeout(function(){for(var a=0;a<swcMarkers.length;a++)a%1e3==0?setTimeout(function(a){swcMarkers[a].polygon.getMap()===map&&c||swcMarkers[a].polygon.getMap()===null&&!c?swcMarkers[a].label.getMap()===map&&b&&c||swcMarkers[a].label.getMap()!==null&&!b&&!c||swcMarkers[a].label.setMap(b&&c?map:null):(swcMarkers[a].polygon.setMap(c?map:null),swcMarkers[a].label.setMap(b&&c?map:null))}(a),1):swcMarkers[a].polygon.getMap()===map&&c||swcMarkers[a].polygon.getMap()===null&&!c?swcMarkers[a].label.getMap()===map&&b&&c||swcMarkers[a].label.getMap()!==null&&!b&&!c||swcMarkers[a].label.setMap(b&&c?map:null):(swcMarkers[a].polygon.setMap(c?map:null),swcMarkers[a].label.setMap(b&&c?map:null))},50);break;case"lataShowHideMap":for(var d=0;d<lataMarkers.length;d++)lataMarkers[d].setMap(c?map:null);break;case"MSOShowHideMap":setTimeout(function(){for(var a=0;a<msoMarkers.length;a++)a%2500==0?setTimeout(function(a){msoMarkers[a].setMap(c?map:null)}(a),1):msoMarkers[a].setMap(c?map:null)},50);break;case"CLECShowHideMap":setTimeout(function(){for(var a=0;a<clecMarkers.length;a++)clecMarkers[a].setMap(c?map:null)},10);break;default:if(a in vendorFiberMarkers)for(var d=0;d<vendorFiberMarkers[a].length;d++)vendorFiberMarkers[a][d].setMap(c?map:null)}});else{var c=$(a).attr("id"),d=$(a).prop("checked"),e=0;switch(c){case"NNIShowHideMap":e+=4;case"ILECShowHideMap":e+=2;case"LOWShowHideMap":e+=1;case"HIGHShowHideMap":e+=1;for(var f=0;f<assetLocations.length;f++)assetLocations[f].marker.setMap(null),assetLocations[f].attributes=(assetLocations[f].attributes^e)&assetLocations[f].modAttributes,assetLocations[f].marker.icon=slocationIcons[assetLocations[f].attributes-1],assetLocations[f].marker.setMap(assetLocations[f].attributes<=0?null:map)}}}function expandCollapse(a,b,c){setTimeout(loadStart(),500),setTimeout(function(){b.src.match("expand")?(b.src="../../Images/collapse.gif",$("#"+a+" > tbody > tr").each(function(){$(this).attr("id")===c&&$(this).show()})):(b.src="../../Images/expand.gif",$("#"+a+" > tbody > tr").each(function(){$(this).attr("id")===c&&$(this).hide()}))},1e3),setTimeout(loadEnd(),1e4)}function searchTableSelect(a,b){b!==null&&typeof b!="undefined"&&b?($("#searchCriteria").children("span").each(function(){$(this).attr("onclick","")}),$("#searchMethods").children().each(function(){$(this).css("display","none")}),$("#"+a.id+"SearchDiv").css("display","block"),a.id=="clli"?$("#addressSearch").attr("disabled","disabled"):$("#addressSearch").removeAttr("disabled"),$("#searchCriteria").children("span").each(function(){this.id==a.id?$(this).addClass("selected"):$(this).removeClass("selected"),$(this).attr("onclick","searchTableSelect(this)")})):($("#searchCriteria").children("span").each(function(){$(this).attr("onclick","")}),$("#searchMethods").children().each(function(){$(this).fadeOut(500)}),setTimeout(function(){$("#"+a.id+"SearchDiv").fadeIn(800),a.id=="clli"?$("#addressSearch").attr("disabled","disabled"):$("#addressSearch").removeAttr("disabled")},550),setTimeout(function(){$("#searchCriteria").children("span").each(function(){this.id==a.id?$(this).addClass("selected"):$(this).removeClass("selected"),$(this).attr("onclick","searchTableSelect(this)")})},600))}function ShowLocationSwitch(a){$("#location").children("span").each(function(){$(this).attr("onclick","")}),$("#location").children("div").each(function(){$(this).fadeTo(500,0,null),$(this).css("z-index",-1)}),setTimeout(function(){$("#"+a.id+"Div").fadeTo(800,1,null),$("#"+a.id+"Div").css("z-index",3)},550),setTimeout(function(){$("#location").children("span").each(function(){this.id==a.id?$(this).addClass("selected"):$(this).removeClass("selected"),$(this).attr("onclick","ShowLocationSwitch(this)")})},600)}function getThatClli(a){var b=$(a).val();if(b.length>2){var c=trimFuncName(arguments.callee.toString()),d={input:b};runAjax(indexAjax(c,"#map-canvas",d,a).ClliMatch)}}function searchSettings(){var a=null,b=!1,c=!1,d=!1;circle!==null&&typeof circle!="undefined"&&circle.setMap(null),(infowindow.getMap()!==null||typeof infowindow.getMap()!="undefined")&&infowindow.close(),(infoHover.getMap()!==null||typeof infoHover.getMap()!="undefined")&&infoHover.close();if($("#multiProviders").val()==null)return $("label[for='multiProviders']").addClass("important"),alert("No providers selected"),!1;if($("#multiStates").val()==null&&$("#pac-input").val().length<1)return $("label[for='multiStates']").addClass("important"),alert("No states selected"),!1;$("label[for='multiProviders']").removeClass("important"),$("label[for='multiStates']").removeClass("important");for(var e=0;e<markers.length;e++)markers[e].setMap(null);for(var e=0;e<msoMarkers.length;e++)msoMarkers[e].setMap(null);for(var e=0;e<clecMarkers.length;e++)clecMarkers[e].setMap(null);return markers=new Array,msoMarkers=new Array,clecMarkers=new Array,locations=new Array,parentVendors=new Array,a=!0,$("#address").hasClass("selected")&&$("#pac-input").val().length>1&&(b=!0),$("#clli").hasClass("selected")&&(c=!0),$("#latLng").hasClass("selected")&&(c=!0),{SafeToSearch:a,AddressSearch:b,ClliSearch:c,LatLngSearch:d}}function getInfoWindow(a,b,c,d,e){var f="<div style='font-size: 0.9em; width: 240px; height: 98px;'>",g="<p style='font-size: 0.83em'>",h="<table class='flat' style='font-size: 0.83em'>",i="<tr><td><b>Latitude: </b></td><td class='numCell'>"+d+"</td>"+"</tr>"+"<tr>"+"<td><b>Longitude: </b></td>"+"<td class='numCell'>"+e+"</td>"+"</tr>",j="</table></p></div>";if(a!==null&&typeof a!="undefined")switch(a){case"pin":c!==null&&typeof c!="undefined"&&(f+="<strong>"+c+"</strong>"),f+=g+h+i+j;break;case"default":f+="<strong>"+b+"</strong>"+g+c+"</p>"+g+h+i+j;break;default:f+=j}return f}function createMarker(a,b,c,d,e,f){var g={url:iconURLPrefix+"red-dot.png",size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};return new google.maps.Marker({position:new google.maps.LatLng(b,c),map:map,icon:d===null?g:d,title:a.toString(),id:a,zIndex:e,draggable:f})}function createSearchCircle(a){a!==null&&typeof a!="undefined"&&(circle=new google.maps.Circle({map:map,radius:($("#slider-vertical").slider("value")<1?1:$("#slider-vertical").slider("value"))/62137e-8,fillColor:"#0066FF",fillOpacity:.12,strokeColor:"#0066FF",strokeOpacity:.7,strokeWeight:2,zIndex:-2})),circle.bindTo("center",a,"position")}function RGB2Color(a,b,c){return"#"+byte2Hex(a)+byte2Hex(b)+byte2Hex(c)}function byte2Hex(a){var b="0123456789ABCDEF";return String(b.substr(a>>4&15,1))+b.substr(a&15,1)}function sleep(a,b){setTimeout(function(){b()},a)}function requestData(){var a,b,c,d,e,f,g,h,i,j}function cableData(){var a,b,c,d,e,f}function assetLocation(a,b,c){this.marker=a,this.attributes=b,this.modAttributes=b,this.addressID=c}function Point(a,b){this.x=a,this.y=b}function Region(a){this.points=a||[],this.length=a.length}var MapColors={yellow:"#F2FA00",white:"#eee",black:"#111",purple:"#4000BF",orange:"#FF7700",darkWhite:"#ddd",lightBlack:"#333",red:"#FF0000"},localStorageAllowed,parentVendors=new Array,markers=new Array,msoMarkers=new Array,clecMarkers=new Array,assetLocations=new Array,lvl3Markers=new Array,timeWarnerMarkers=new Array,vendorFiberMarkers=new Array,twLayer=new google.maps.FusionTablesLayer({suppressInfoWindows:!1,query:{select:"col2",from:"1V_70gH0H3SaS0gRSPvf_b1C1zI6z0IQES6zyC5po"},options:{styleId:2,templateId:2}}),lvl3Filled=!1,timeWarnerFilled=!1,lataMarkers=new Array,lataFilled=!1,swcMarkers=new Array,swcFilled=!1,circle,map,infowindow,infoHover,infoFiber=new google.maps.InfoWindow,searchBox,djConfig={parseOnLoad:!0,packages:[{name:"agsjs",location:"https://gmaps-utility-gis.googlecode.com/svn/tags/agsjs/2.04/xbuild/agsjs"}]};$(document).ready(function(){"use strict";var a=getInternetExplorerVersion();a>-1&&a<10&&alert("Your are using an outdated version of IE. Comet recommends that you use IE10, Chrome, or Firefox."),localStorageAllowed=supportsHtml5Storage(),$("#multiStates").children().each(function(){$(this).attr("selected",!0)}),$("#multiProviders").children().each(function(){$(this).attr("selected",!0)}),$(".multiselect").multiselect({show:["blind",100],hide:["blind",400],minWidth:225}),$("#multiStates").multiselectfilter({label:"",width:32,placeholder:"Filter",autoReset:!0}),$("#slider-vertical").slider({orientation:"vertical",range:"min",min:0,max:50,value:2,slide:function(a,b){$("label[for='amount']").text("Range: "+$("#slider-vertical").slider("value")+" miles")}}),$("#lat-input, #lng-input").keypress(function(a){a.which==13&&searchProviders()}),$("#MinMaxSearch").click(function(){minMaxParent(this)}),map=new google.maps.Map(document.getElementById("map-canvas"),{center:new google.maps.LatLng(38.850033,-95.6500523),zoom:5,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},mapTypeId:google.maps.MapTypeId.HYBRID}),infowindow=new google.maps.InfoWindow;var b=document.getElementById("pac-input");$("#searchCriteria").push(b),$(b).css("font-size","0.8em"),searchBox=new google.maps.places.Autocomplete(b),$("#addressSearch").click(function(){searchProviders()}),$("#clli-input").autocomplete({delay:200,focus:function(a,b){a.preventDefault(),$(this).val(b.item.label.replace("<mark>","").replace("</mark>",""))},source:function(a,b){var c={input:$("#clli-input").val()};$.post("/Main/JsonCLLIMatch",c,function(a){var c=[];for(var d=0;d<a.length;d++)c.push({label:a[d],value:a[d],id:d});b(c)})},select:function(a,b){a.preventDefault(),searchProviders()},open:function(){$(".ui-autocomplete").css({"background-color":"#FFFFFF","font-size":"0.7em","max-height":"350px","overflow-y":"scroll","overflow-x":"hidden"}),$(".ui-autocomplete li").css({outline:"1px"})}}).data("ui-autocomplete")._renderItem=function(a,b){return $("<li title='"+b.title+"'>").data("ui-autocomplete-item",b).append($("<a>").html(b.label)).appendTo(a)},google.maps.event.addListener(searchBox,"place_changed",function(){searchProviders()}),google.maps.event.addListener(map,"maptypeid_changed",function(){function c(b,c){if(b!==null&&typeof b!="undefined"&&typeof c=="boolean")switch(b){case"lata":return a?c?MapColors.white:MapColors.black:c?MapColors.black:MapColors.white;case"swc":return a?c?MapColors.yellow:MapColors.purple:c?MapColors.purple:MapColors.yellow;default:return a?c?MapColors.white:MapColors.black:c?MapColors.black:MapColors.white}}var a=map.getMapTypeId()==="hybrid";if($("#lataShowHideMap").prop("checked"))for(var b=0;b<lataMarkers.length;b++)lataMarkers[b].setMap(null),typeof lataMarkers[b].text!="undefined"?lataMarkers[b].fontColor=c("lata",!1):lataMarkers[b].fillColor=c("lata",!1),lataMarkers[b].strokeColor=c("lata",!0),lataMarkers[b].setMap(map);if($("#swcShowHideMap").prop("checked"))for(var b=0;b<swcMarkers.length;b++)swcMarkers[b].polygon.setMap(null),swcMarkers[b].label.setMap(null),swcMarkers[b].polygon.fontColor=swcMarkers[b].polygon.fillColor=swcMarkers[b].polygon.strokeColor=swcMarkers[b].label.strokeColor=c("swc",!0),swcMarkers[b].label.fontColor=c("swc",!1),swcMarkers[b].polygon.setMap(map),swcMarkers[b].label.setMap(map)}),google.maps.event.addListener(map,"idle",function(){var a=map.getBounds();if(map.getZoom()>=8)$("#swcShowHideMap").prop("disabled",!1),$("#swcShowHideMap").prop("checked")&&getSwc();else{$("#swcShowHideMap").prop("disabled",!0);for(var b=0;b<swcMarkers.length;b++)swcMarkers[b].polygon.setMap(null),swcMarkers[b].label.setMap(null)}searchBox.setBounds(a)}),addSDPToMap(),loadEnd()}),Region.prototype.area=function(){var a=0,b,c,d,e;for(b=0,c=this.length-1;b<this.length;c=1,b++)d=this.points[b],e=this.points[c],a+=d.x*e.y,a-=d.y*e.x;return a/=2,a},Region.prototype.centroid=function(){var a=0,b=0,c,d,e,f,g;for(c=0,d=this.length-1;c<this.length;d=1,c++)f=this.points[c],g=this.points[d],e=f.x*g.y-g.x*f.y,a+=(f.x+g.x)*e,b+=(f.y+g.y)*e;return e=this.area()*6,new Point(a/e,b/e)}
;function select(a){$("input[value="+a+"]").prop("checked",!0),calculateTotal()}function calculateTotal(){var a=$("input[type='radio'][name='gb']:checked").val()=="oneGB"?1e3:1e4,b=$("input[type='radio'][name='gateway']:checked").val()=="yes"?0:a==1e3?885.28:954;$("#Total").val("$"+Math.round((Number($("#NNI_MRC").val())+b)/a*Number($("#EVC").val())*1.25*100)/100)}$(document).ready(function(){$("input[type='radio']").click(function(){calculateTotal()}),$("input[type='number']").change(function(){calculateTotal()}),loadEnd()})
