function Comet(){this.nameCtrl=null;this.LAST_PAGE_MOVE=(new Date).getTime();this.LAST_REQUEST_CHECK_TIME=(new Date).getTime();this.PAGE_REFRESH_TIME=36e5;this.REFRESH_REQUESTS_TIME=6e4;updateRefreshTime=function(){this.LAST_PAGE_MOVE=(new Date).getTime()};this.updateRequestCheckTime=function(){this.LAST_REQUEST_CHECK_TIME=(new Date).getTime()}}function ErrorInsert(n,t,i,r){this.PageName=n;this.StepName=t;this.ErrorCode=null;this.ErrorDetails=null;i!==null&&typeof i=="string"&&(ErrorCode=i);r!==null&&typeof r=="string"&&(ErrorDetails=r);this.logError=function(n){runAjax(ajax("ErrorInsert",null,this,"Grid").InsertError);console.log("Unimplemented: Log error: "+this.ErrorDetails);$(n).html(ErrorInsert.ErrorDetails)}}function showUserDetails(n){var t=$(n);($(n).data("events")===null||typeof($(n).data("events")==="undefined"))&&$(n).bind({mouseleave:function(){clearTimeout(userTimer);$("#"+t.prop("id")+"User").css("visibility","hidden")}});userTimer=setTimeout(function(){$("#"+t.prop("id")+"User").css("visibility","visible")},500)}function closeNav(n){n&&$.ajax({type:"GET",url:"/Rest/MarkNewVersionAcknowledgement",async:!0,error:function(n,t,i){var r=new ErrorInsert;r.PageName="Index";r.StepName="ajaxCloseNav";r.ErrorDetails=n.responseText+" -- "+i;n.readyState==4&&(r.ErrorCode="c-g-j-cn-01")}});$("#showNav").fadeOut("slow")}function toTitleCase(n){return n.replace(/\w\S*/g,function(n){return n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()})}function minMaxParent(n){if($(n).hasClass("minmaxOpen")){$(n).parent().children().each(function(){$(this).attr("id")!==$(n).attr("id")&&$(this).fadeOut(200)});$(n).parent().parent().children().each(function(){$(this).animate({height:0},300)});var t=!1;$.each(dimensions,function(i,r){$(n).attr("id")===r.id&&(t=!0)});t||dimensions.push({id:$(n).attr("id"),width:$(n).parent().css("width"),height:$(n).parent().css("height"),padding:$(n).parent().css("padding")});$(n).parent().animate({width:"15px",height:"15px",padding:"0px","border-radius":"7px"},500);$(n).removeClass("minmaxOpen").addClass("minmaxClose")}else $.each(dimensions,function(t,i){$(n).attr("id")===i.id&&$(n).parent().animate({width:i.width,height:i.height,padding:i.padding},400,function(){$(this).css({height:"auto","border-radius":"0"})})}),$(n).parent().find(".content").each(function(){this.hasChildNodes()&&$(this).parent().fadeIn(900)}),$(n).parent().parent().children().each(function(){$(this).animate({height:"auto"},300)}),$(n).removeClass("minmaxClose").addClass("minmaxOpen")}function loadEnd(){$("#loadImage").stop().animate({opacity:0},1e3);$(".loading").stop().animate({opacity:0},800);setTimeout(function(){$(".loading").css("z-index","-10");$("#loadImage").css("z-index","-10")},1800)}function loadStart(){$(".loading").css("z-index","99");$("#loadImage").css("z-index","120");setTimeout(function(){$(".loading").stop().animate({opacity:.8,"background-color":"#000"},200)},0);setTimeout(function(){$("#loadImage").stop().animate({opacity:1},200)},0)}function getInternetExplorerVersion(){var n=-1,t,i;return navigator.appName==="Microsoft Internet Explorer"&&(t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),i.exec(t)!==null&&(n=parseFloat(RegExp.$1))),n}function supportsHtml5Storage(){try{return"localStorage"in window&&window.localStorage!==null}catch(n){return!1}}function createStorageExpiration(){var n=new Date;return n.setDate(n.getDate()+1),n.setHours(8,0,0,0)}function trimFuncName(n){var t=n.substr(9);return t.substr(0,t.indexOf("("))}function ajaxDetails(){return{ContentType:{DEFAULT:"application/x-www-form-urlencoded; charset=UTF-8",NULL:null,JSON:"application/json; charset=utf-8",TEXT:"text/plain",HTML:"html"},HttpType:{GET:"GET",POST:"POST"},Synchronous:{TRUE:!0,FALSE:!1}}}function ajaxCall(n,t,i,r,u,f,e,o){if(p===!1)return null;var h=t,c=i,l=n,a=u,s=f,v=e,y=o,p=function(){return typeof t!="string"?!1:typeof n!="string"?!1:typeof u!="string"||u===null?!1:typeof i=="object"&&i!==null&&Array.isArray(i)!==!0?!1:(typeof e=="object"&&e!==null)==!1?!1:(typeof o=="object"&&o!==null)==!1?!1:typeof r!="boolean"?!1:!0};return{QueryString:h,Data:c,HttpType:l,ContentType:a,Synchronous:r,BeforeSendDelegate:function(){return s===null||typeof s=="undefined"?null:s()},SuccessDelegate:function(n){return v(n)},FailureDelegate:function(n,t,i){return y(n,t,i)}}}function runAjax(n){typeof n=="object"&&n!==null&&(n.ContentType!==null&&n.Data!==null?$.ajax({type:n.HttpType,contentType:n.ContentType,data:n.Data,url:n.QueryString,async:n.Synchronous,beforeSend:function(){n.BeforeSendDelegate()},success:function(t){n.SuccessDelegate(t)},error:function(t,i,r){n.FailureDelegate(t,i,r)}}):$.ajax({type:n.HttpType,url:n.QueryString,async:n.Synchronous,beforeSend:function(){n.BeforeSendDelegate()},success:function(t){n.SuccessDelegate(t)},error:function(t,i,r){n.FailureDelegate(t,i,r)}}))}function Ajax(n,t,i){"use strict";var u,f,r;return u=f=r=null,i=i!==null&&(typeof i=="object"||typeof i=="string")?i:u,t!==null&&typeof t=="string"&&(errorPanel=t),{NewRequests:new ajaxCall(ajaxDetails().HttpType.GET,"Rest/Requests",i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.JSON,r,function(n){$("#"+t).html(n.length)},function(){}),InsertError:new ajaxCall(ajaxDetails().HttpType.POST,"Rest/JSError",i,ajaxDetails().Synchronous.FALSE,ajaxDetails().ContentType.JSON,r,function(){},function(){})}}var Global={PAGE_NAME:"Global"},userTimer,dimensions;Comet.prototype={setNameCtrl:function(n){this.nameCtrl=n},TODAY:function(){var n=new Date;return n.setDate(n.getDate()),n},NOW:function(){return(new Date).getTime()},setRefresh:function(){var n=this,t=function(){n.setRefresh()};this.NOW()-this.LAST_PAGE_MOVE>=216e5?window.location.reload(!0):setTimeout(t,this.PAGE_REFRESH_TIME)},refreshData:function(){runAjax(ajaxCall(ajaxDetails().HttpType.POST,"/Rest/RefreshAppData",null,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.JSON,function(){loadStart()},function(n){alert(n);this.updateRefreshTime();location.reload()},function(){}))},getNewRequests:function(){var n=this,t=function(){n.getNewRequests()};this.NOW()-this.LAST_REQUEST_CHECK_TIME>=this.REFRESH_REQUESTS_TIME&&(runAjax(ajaxCall(ajaxDetails().HttpType.POST,"/Rest/Requests",null,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(n){if(n.length>0){if($("#consoleUnread").length===0){var t=document.createElement("div");$(t).attr("id","consoleUnread").addClass("notification");CorrectNotification();$("#menuDiv").append(t)}$("#consoleUnread").html(n.length)}else $("#consoleUnread")!==null&&typeof $("#consoleUnread")!="undefined"&&$("#consoleUnread").remove()},function(){})),this.updateRequestCheckTime());setTimeout(t,this.REFRESH_REQUESTS_TIME)},CorrectNotification:function(){$("#consoleUnread").css({left:$("#consoleAnchor").offset().left+$("#consoleAnchor").width()-15,top:$("#consoleAnchor").offset().top-8})}};userTimer=null;$(document).ready(function(){var n=new Comet,t;n.setRefresh();n.LAST_REQUEST_CHECK_TIME=n.LAST_REQUEST_CHECK_TIME-n.REFRESH_REQUESTS_TIME;n.getNewRequests();$(window).resize(n.CorrectNotification);t=getInternetExplorerVersion();t>-1&&t<10&&alert("Your are using an outdated version of IE. Comet recommends that you use IE10, Chrome, or Firefox.");$("div#body").scroll(function(){var n=$("div#body").scrollTop();n>0?$("header").addClass("scroll"):$("header").removeClass("scroll")});$("#sawNewVersion").html().toLowerCase()==="false"&&($.ajax({type:"GET",url:"/Rest/ShowNav",async:!0,success:function(n){$("#showNav").html(n)},error:function(n,t,i){var r=n.responseText+" --- "+i,u=new ErrorInsert(Global.PAGE_NAME,"showNav","g-r-sn-01",r);u.logError()}}),$("#showNav").css("display","block"));$("a#refresh").click(function(){n.refreshData()});$("input[type='date']").each(function(){this.type!=="date"&&($.datepicker.formatDate("MM/dd/yyyy"),$(this).datepicker({buttonImage:"calendar.gif",buttonText:"Pick a date",beforeShowDay:$.datepicker.noWeekends}))})});dimensions=[];
//# sourceMappingURL=Global.min.js.map
