function openMenu(){}function CreateUsageGraph(n){var c=["#acacac","#34C6CD","#FFB473","#2A4380","#FFD173","#0199AB","#FF7600","#123EAB","#FFAB00","#1A7074","#A64D00","#466FD5","#BE008A","#B4F200","#DF38B1","#EF002A"],u=new google.visualization.DataTable,o,e,f,s,t,h,r,i,y;for(u.addColumn("string","Week Start"),o=2*Math.PI/n[0].length,t=1;t<n[0].length;t++){var l=Math.sin(t*o+0)*127+128,a=Math.sin(t*o+2)*127+128,v=Math.sin(t*o+4)*127+128;u.addColumn("number",n[0][t]);c.push(RGB2Color(l,a,v))}for(t=1;t<n.length;t++)u.addRows([n[t]]);for(e={backgroundColor:"#efeeef",title:"Distinct Logins a day by group by week",titlePosition:"out",colors:c,lineWidth:3,width:"100%",height:"100%",curveType:"function",explorer:{},hAxis:{textPosition:"none",slantedText:!0,slantedTextAngle:60},legend:{position:"top",textStyle:{fontSize:13}},chartArea:{left:60,top:70,width:"100%",height:"90%"},animation:{duration:1e3,easing:"out"},vAxis:{title:"Distinct Users"}},f=new google.visualization.LineChart(document.getElementById("usageByTime")),f.draw(u,e),s=document.createElement("table"),$(s).addClass("grid"),t=0;t<n[1].length;t++){for(h=document.createElement("tr"),r=0;r<n.length;r++)i=document.createElement("td"),t==0&&(i=document.createElement("th")),$(i).addClass("graphCellHover"),$(i).hover(function(){$(this).closest("tr").addClass("graphRowHover")},function(){$(this).closest("tr").removeClass("graphRowHover")}),i.appendChild(document.createTextNode(n[r][t])),r===0?(y=UsersByGroup(n[r][t]),$(i).css("width","100px"),t!==0&&$(i).addClass("showing").addClass("rowHeader").attr("id","t"+t).attr("title","Hide/Show on graph \n\n"+UsersByGroup(n[r][t])),function(n,t){$(i).click(function(){view=new google.visualization.DataView(n);$(this).hasClass("showing")?$(this).closest("tr").find("td").each(function(){$(this).removeClass("showing").removeClass("graphCellHover").addClass("grapCellhHoverNotShow")}):$(this).closest("tr").find("td").each(function(){$(this).removeClass("grapCellhHoverNotShow").addClass("showing").addClass("graphCellHover")});var i=[];$(".rowHeader").each(function(){$(this).hasClass("showing")||i.push(parseInt($(this).attr("id").substr(1,$(this).attr("id").length-1)))});view.hideColumns(i);f.draw(view,t)})}(u,e,t)):($(i).addClass("cellNumberTight"),t>0&&($(i).attr("id","cell"+t+","+r),$(i).mouseover(function(){var n=f.series,t=$(this).attr("id").substr(4,$(this).attr("id").length-4).split(",")}))),h.appendChild(i);s.appendChild(h)}$("#graphDetails").html(s);$("#showFullScreen").on("click",function(){$("#usageByTime").removeClass("graph").css({position:"fixed",left:0,top:0,"z-index":5,width:"100%",height:"100%",margin:0});$(this).css("z-index",1);var n=document.createElement("div");$(n).addClass("float-right-absolute").click(function(){$("#usageByTime").css({position:"",left:"",top:"","z-index":"",width:"",height:"",margin:""}).addClass("graph");$("#closeButtonDiv").remove();f.draw(u,e);$("#showFullScreen").css("z-index",10)}).css({"min-width":"20px","min-height":"20px","background-image":"url(../Images/x-circle.png)","background-size":"cover",cursor:"pointer"}).attr("id","closeButtonDiv");n.appendChild(document.createTextNode("  "));document.body.appendChild(n);f.draw(u,e)})}function getUsageByWeeksJson(){setTimeout(function(){$.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:"GetUsageByWeeks",async:!1,success:function(n){var r=[],i=[],e=[],o,t,u,f;for(i.push("Week Start"),t=0;t<n.length;t++)jQuery.inArray(n[t].WeekStart,r)===-1&&r.push(n[t].WeekStart),jQuery.inArray(n[t].Group,i)===-1&&i.push(n[t].Group);for(o=i.slice(0),e.push(o),i.shift(),t=0;t<r.length;t++){for(u=[],u.push(r[t]),f=0;f<i.length;f++)u.push(n[t*i.length+f].DistinctLogins);e.push(u)}CreateUsageGraph(e)},error:function(n,t,i){var r=new ErrorInsert;r.PageName="Index";r.StepName="ajaxGetUsageByWeeks";r.ErrorDetails=n.responseText+" -- "+i;n.readyState==4&&(r.ErrorCode="c-g-j-ageubw-01")}})},5)}function UsersByGroup(n){var t="";return $.ajax({type:"POST",data:{userGroup:n},url:"GetUsersInGroup",async:!1,success:function(n){for(var i=0;i<n.length;i++)t+=n[i]+"\n"},error:function(n,t,i){var r=new ErrorInsert;r.PageName="Index";r.StepName="ajaxGetUsageByWeeks";r.ErrorDetails=n.responseText+" -- "+i;n.readyState==4&&(r.ErrorCode="c-g-j-ageubw-01")}}),t}function RGB2Color(n,t,i){return"#"+byte2Hex(n)+byte2Hex(t)+byte2Hex(i)}function byte2Hex(n){var t="0123456789ABCDEF";return String(t.substr(n>>4&15,1))+t.substr(n&15,1)}function expandCollapse(n,t,i){setTimeout(loadStart(),500);setTimeout(function(){t.src.match("expand")?(t.src="../../Images/collapse.gif",$("#"+n+" > tbody > tr").each(function(){$(this).attr("id")===i&&$(this).show()})):(t.src="../../Images/expand.gif",$("#"+n+" > tbody > tr").each(function(){$(this).attr("id")===i&&$(this).hide()}))},1e3);setTimeout(loadEnd(),1e4)}function openItem(n){var t,u=n.toLowerCase().indexOf("partial")>-1,i,r,f;u?(i=n.split("").reverse().join(""),t=parseFloat(i.substring(0,i.indexOf("/")).split("").reverse().join("")),i=i.substring(i.indexOf("/")+1),n=i.split("").reverse().join(""),r=n.replace("Partial",""),history.pushState({item:t,link:n},"Dashboard - "+r+"#"+t,parseUrl()+"/"+r+"/"+t),f=r==="Project"?{projectID:t}:r==="Request"?{requestID:t}:{elementID:t},runAjax(ajax("ready","displayDiv",u?f:null,n).OpenItem)):location.href="console/"+n}function openMenu(n,t){var i="";switch(t){case"PendingPromotes":i="Manager - Pending";runAjax(ajax("openMenu","displayDiv",null,"PendingRequest").Pending)}history.pushState(null,i,parseUrl()+"/"+t);$("#menu ul li").each(function(){$(this).removeClass("selected")});$(n).addClass("selected")}function parseUrl(){var t=window.location.href.replace("/R","/r").replace("/E","/e").replace("/P","/p").replace("/A","/s").replace("/S","/s").replace("/ManageGroups","/managegroups").replace("#",""),n=t.split("/r");return n.length<=1&&(n=t.split("/e")),n.length<=1&&(n=t.split("/p")),n.length<=1&&(n=t.split("/managegrou")),n.length<=1&&(n=t.split("/a")),n.length<=1&&(n=t.split("/s")),n[0]}function getGrid(){history.pushState(null,"Dashboard",parseUrl());runAjax(ajax("ready","displayDiv",null,"Grid").Grid)}function showParent(){$(".tree").unbind("click");$("#hasParent").length>0?($(".tree").hasClass("invisible")&&($(".tree").css("opacity",0),$(".tree").removeClass("invisible"),setTimeout(function(){$(".tree").animate({opacity:1},300)},300)),$(".tree").attr("tooltip",$("#parentName").val()),$(".tree").bind("click",function(){openItem($("#hasParent").val())})):($(".tree").animate({opacity:0},200),$(".tree").addClass("invisible"))}function bindInputs(){var n={format:"MM/DD/YYYY",separator:"-"};$("div.date-picker-wrapper").each(function(){$(this).remove()});$("input.dateRange").each(function(){$(this).dateRangePicker(n).keyup(function(n){n.keyCode===13&&rerunGrid()}).bind("datepicker-closed",function(){$(this).val().indexOf("-")>=10&&rerunGrid()})});$("select[multiple]").multiselect({show:["blind",100],hide:["blind",400]}).multiselectfilter({label:"",autoReset:!0});$(".filter").focusout(function(){rerunGrid()}).keyup(function(n){n.keyCode===13&&rerunGrid()})}function rerunGrid(n){var t=null;return n||(t={ID:$("#SelectedId").val(),requestorIdList:$("#SelectedRequestors").size()===1&&$("#SelectedRequestors").val()===null?null:$("#SelectedRequestors").val(),assignedIdList:$("#SelectedAssignee").size()===1&&$("#SelectedAssignee").val()===null?null:$("#SelectedAssignee").val(),category:$("#SelectedCategory").size()===1&&$("#SelectedCategory").val()===null?null:$("#SelectedCategory").val(),requestType:$("#SelectedType").size()===1&&$("#SelectedType").val()===null?null:$("#SelectedType").val(),area:$("#SelectedArea").size()===1&&$("#SelectedArea").val()===null?null:$("#SelectedArea").val(),summary:$("#EnteredSummary").val(),submittedRange:$("#SubmittedRange").val(),dueDateRange:$("#DueDateRange").val(),status:$("#SelectedStatus").size()===1&&$("#SelectedStatus").val()===null?null:$("#SelectedStatus").val(),closedRange:$("#ClosedRange").val()}),runAjax(ajax("ready","displayDiv",t,"Grid").Grid),!1}function evalHref(){var n=window.location.href,t="manager/dashboard/";n.toLowerCase().indexOf(t)>1&&(n=n.substring(n.toLowerCase().indexOf(t)+t.length),n.length>0&&n.indexOf("/")<0&&$("#"+n).addClass("selected"))}function promote(n){function i(n,t,i){return $("<input>").attr("type",n).attr("name",t).val(i)}if($("#startDate").val()==null||$("#startDate").val().length!==10){alert("Please enter Start Date.");return}var t=document.createElement("form");t.method="POST";t.action="/console/manager/PromoteToProject";$(t).append(i("number","requestID",n));$(t).append($("#startDate"));console.log(t);$("#body").css("display","none").append(t);t.submit()}function ajax(n,t,i,r){"use strict";var f,e,o,u;return f=e=o=null,i=i!==null&&(typeof i=="object"||typeof i=="string")?i:null,t!==null&&typeof t=="string"&&(u=t),{OpenItem:new ajaxCall(ajaxDetails().HttpType.POST,"/console/"+r,i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,function(){$("#"+t+" > div").addClass("centerContents").html("<img src='/Images/loading.gif' />")},function(n){$("#"+t+" > div").removeClass("centerContents").html(n);showParent();var i=history.state.link.replace("Partial","");document.title=i+" #"+history.state.item;$(".site-title").html(document.title)},function(n,t,i){$("#"+u+" > div").html("Unable to load due to "+i)}),Grid:new ajaxCall(ajaxDetails().HttpType.POST,"/console/"+r,i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,function(){$("#"+t+" > div").addClass("centerContents").html("<img src='/Images/loading.gif' />")},function(n){$("#"+t+" > div").removeClass("centerContents").html(n);showParent();document.title="Dashboard";$(".site-title").html(document.title);bindInputs()},function(n,t,i){$("#"+u+" > div").html("Unable to load due to "+i)}),SlickGrid:new ajaxCall(ajaxDetails().HttpType.POST,"/console/"+r,i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,function(){$("#"+t+" > div").addClass("centerContents").html("<img src='/Images/loading.gif' />")},function(n){var i,r;for($("#"+t+" > div").removeClass("centerContents"),i=[],r=0;r<n[0].length;r++)i.push({id:i[r],name:i[r],field:i[r]});slickGrid=new Slick.Grid($("#"+t+" > div"),n,i,null);showParent();document.title="Dashboard";$(".site-title").html(document.title);alert(document.title)},function(n,t,i){$("#"+u+" > div").html("Unable to load due to "+i)}),Pending:new ajaxCall(ajaxDetails().HttpType.POST,"/manager/"+r,i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,function(){$("#"+t+" > div").addClass("centerContents").html("<img src='/Images/loading.gif' />")},function(n){$("#"+t+" > div").removeClass("centerContents").html(n);showParent();document.title="Manager - Pending";$(".site-title").html(document.title)},function(n,t,i){$("#"+u+" > div").html("Unable to load due to "+i)})}}function indexAjax(n,t,i,r){"use strict";function o(n){return{SUCCESS:function(t){removeFromMarkers(t,n);addNewMarkers(t,n);showMarkers(n)},FAILURE:function(t,i,r){u.ErrorDetails=t.responseText+" -- "+r;t.readyState===4&&(u.ErrorCode="c-e-j-"+n+"-01");t.readyState===2&&(u.ErrorCode="c-e-j-"+n+"-02");u.logError(e)}}}var f,e="#map-canvas",u=new ErrorInsert("E911",n),s,h,c;s=h=c=null;i=i!==null&&typeof i=="object"?i:null;switch(r){case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:f="./E911/JsonRcBoundaries";break;case BoundaryType.PSAP:f="./E911/JsonPsapBoundaries";break;case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:f="./E911/JsonCountyBoundaries";break;case BoundaryType.LATA:f="./E911/JsonLataBoundaries";break;default:f=""}return t!==null&&typeof t=="string"&&(e=t),{OnMap:new ajaxCall(ajaxDetails().HttpType.GET,f,i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,o(r).SUCCESS,o(r).FAILURE),LocDetails:ajaxCall(ajaxDetails().HttpType.GET,"./E911/LocationDetails",i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,function(){$(t).html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><\/div>")},function(n){$(t).html(n).parent().removeClass("minimized").fadeIn(500).find(".title").fadeOut(0);$("#map-right").bind("mouseenter",function(){$(t).parent().addClass("minimized").find(".title").css("display","");$(this).unbind("mouseenter")})},function(n,t,i){u.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(u.ErrorCode="c-e-j-ld-01");n.readyState===2&&(u.ErrorCode="c-e-j-ld-02");u.logError()}),LocInfo:ajaxCall(ajaxDetails().HttpType.GET,"./E911/LocationDetails",i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(n){var t=r.clickMarker===!0?clickInfowindow:infowindow,i;t.close();i="<div style='font-size: 0.9em; width: 260px; height: 300px;'><strong>"+r.name+"<\/strong><p style='font-size: 0.83em'>"+n+"<\/p><\/div>";t.setContent(i);t.open(map,r.marker)},function(n,t,i){u.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(u.ErrorCode="c-e-j-ld-01");n.readyState===2&&(u.ErrorCode="c-e-j-ld-02");u.logError()}),Centroid:ajaxCall(ajaxDetails().HttpType.GET,"./E911/ProjectCentroid",i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(n){getProjectInfo(n,r)},function(n,t,i){u.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(u.ErrorCode="c-e-j-c-01");n.readyState===2&&(u.ErrorCode="c-e-j-c-02");u.logError()})}}function PageMap(){this.polygonMarkers=[];this.map}function searchProject(n,t){var i=trimFuncName(arguments.callee.toString()),r={searchType:n,searchString:t};runAjax(indexAjax(i,"#map-canvas",r,n).Centroid)}function searchLatLng(){var n=$("#lat-input").val(),t=$("#lng-input").val(),i=new google.maps.Geocoder;i.geocode({latLng:new google.maps.LatLng(n,t)},function(i,r){var e,s,u,f,o;if(r==google.maps.GeocoderStatus.OK)for(i[2]&&(s=i[2].formatted_address),u=0;u<i.length;u++)for(f=0;f<i[u].address_components.length;f++)i[u].address_components[f].types[0]==="postal_code"&&(e=i[u].address_components[0].short_name);else console.log(r);o={name:"Lat:"+n+" - Lng:"+t,address_components:[{short_name:e,types:["postal_code"]}]};getDetails(o,n,t,!0)})}function searchProviders(){var n=searchBox.getPlace();getDetails(n,n.geometry.location.lat(),n.geometry.location.lng(),!0)}function setMapNull(){for(marker!==null&&typeof marker!="undefined"&&marker.setMap(null),i=0;i<highlight.length;i++)highlight[i].setMap(null);highlight=[]}function getClickDetails(n){var r;clickMarker!==null&&typeof clickMarker!="undefined"&&clickMarker.setMap(null);var t=n.latLng.lat(),i=n.latLng.lng(),u=trimFuncName(arguments.callee.toString());clickMarker=createMarker("Lat:"+t+" Lng:"+i,t,i,iconURLPrefix+"blue-dot.png",2,!1);r=new google.maps.Geocoder;r.geocode({latLng:new google.maps.LatLng(t,i)},function(n,r){var o,s,f,e,h,c;if(r==google.maps.GeocoderStatus.OK)for(n[2]&&(o=n[2].formatted_address),f=0;f<n.length;f++)for(e=0;e<n[f].address_components.length;e++)n[f].address_components[e].types[0]==="postal_code"&&(s=n[f].address_components[0].short_name);else console.log(r);h={lat:t,lng:i,zip:s,showIcon:!1};c={name:o,marker:clickMarker,clickMarker:!0};runAjax(indexAjax(u,null,h,c).LocInfo)})}function getDetails(n,t,i,r){var f,e,u,o,s;for(setMapNull(),f=trimFuncName(arguments.callee.toString()),marker=createMarker("Searched Location",t,i,null,2,!1),u=0;u<n.address_components.length;u++)n.address_components[u].types[0]==="postal_code"&&(e=n.address_components[u].short_name);google.maps.event.addListener(marker,"click",function(r){return function(){var u={lat:t,lng:i,zip:e,showIcon:!1},o={name:n.name,marker:r,clickMarker:!1};runAjax(indexAjax(f,null,u,o).LocInfo)}}(marker));o=new google.maps.LatLngBounds;o.extend(new google.maps.LatLng(t,i));r&&(map.fitBounds(o),setTimeout(function(){var n=google.maps.event.addListener(map,"idle",function(){map.getZoom()>14&&map.setZoom(14)});google.maps.event.removeListener(n)},15));s={lat:t,lng:i,zip:e,showIcon:!0};runAjax(indexAjax(f,$("#selectDetail .content"),s,null).LocDetails)}function getProjectInfo(n,t){var r,e,i,u,o,f,s,h;if(setMapNull(),n.length>0){r=MapColors.white;switch(t.toLowerCase()){case"fips":case"counties":r=MapColors.black;break;case"rate center":r=MapColors.red;break;case"fcc id":case"psap agency":r=MapColors.blue}for(e=new google.maps.LatLngBounds,i=0;i<n.length;i++)for(u=0;u<n[i].Polygon.length;u++){for(o=[],f=0;f<n[i].Polygon[u].Coordinates.length;f++)s=new google.maps.LatLng(n[i].Polygon[u].Coordinates[f].Lat,n[i].Polygon[u].Coordinates[f].Lng),o.push(s),e.extend(s);h=new google.maps.Polygon({path:o,strokeColor:r,fillColor:r,strokeWeight:2,strokeOpacity:.8,fillOpacity:.2,zIndex:0,map:map});google.maps.event.addListener(h,"click",function(n){n.alreadyCalled_||getClickDetails(n)});highlight.push(h)}map.fitBounds(e);map.getZoom()>10?($("#selectDetail .content").html("Please click on map to get full details.").parent().removeClass("minimized").fadeIn(500).find(".title").fadeOut(0),$("#map-right").bind("mouseenter",function(){$("#selectDetail").addClass("minimized").find(".title").css("display","");$(this).unbind("mouseenter")})):($("#selectDetail .content").html("Please zoom in and click on map to get full details").parent().removeClass("minimized").fadeIn(500).find(".title").fadeOut(0),$("#map-right").bind("mouseenter",function(){$("#selectDetail").addClass("minimized").find(".title").css("display","");$(this).unbind("mouseenter")}))}else alert("We're sorry, but we were unable to locate this project on a map.")}function getCounty(n){var t=$(n).attr("id")==="CountyPolyShowHideMap"?BoundaryType.COUNTY:BoundaryType.COUNTYLABEL;$(n).prop("checked")?(t===BoundaryType.COUNTYLABEL&&$("#CountyPolyShowHideMap").prop("checked",!0),getBoundary(t)):(t===BoundaryType.COUNTY&&$("#CountyLabelShowHideMap").prop("checked",!1),showMarkers(t))}function getRateCenter(n){var t=$(n).attr("id")==="RateCenterPolyShowHideMap"?BoundaryType.RATECENTER:BoundaryType.RATECENTERLABEL;$(n).prop("checked")?(t===BoundaryType.RATECENTERLABEL&&$("#RateCenterPolyShowHideMap").prop("checked",!0),getBoundary(t)):(t===BoundaryType.RATECENTER&&$("#RateCenterLabelShowHideMap").prop("checked",!1),showMarkers(t))}function getLata(n){$(n).prop("checked")?getBoundary(BoundaryType.LATA):showMarkers(BoundaryType.LATA)}function getPsap(n){$(n).prop("checked")?getBoundary(BoundaryType.PSAP):showMarkers(BoundaryType.PSAP)}function getBoundary(n){if(n!==null&&typeof n=="string"){var t=map.getBounds(),i=trimFuncName(arguments.callee.toString()),r={bottomLeftLat:t.getSouthWest().lat().toFixed(6),bottomLeftLng:t.getSouthWest().lng().toFixed(6),topRightLat:t.getNorthEast().lat().toFixed(6),topRightLng:t.getNorthEast().lng().toFixed(6)};runAjax(indexAjax(i,"#map-canvas",r,n).OnMap)}}function removeFromMarkers(n,t){var i,r;switch(t){case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:for(i=0;i<countyMarkers.length;i++)r=$.grep(n,function(n){return n.ObjectID===countyMarkers[i].text}),r.length===0&&(countyMarkers[i].polygon.setMap(null),countyMarkers[i].label.setMap(null),countyMarkers[i]=null,countyMarkers.splice(i,1));break;case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:for(i=0;i<rateCenterMarkers.length;i++)r=$.grep(n,function(n){return n.ID===rateCenterMarkers[i].text}),r.length===0&&(rateCenterMarkers[i].polygon.setMap(null),rateCenterMarkers[i].label.setMap(null),rateCenterMarkers[i]=null,rateCenterMarkers.splice(i,1));break;case BoundaryType.PSAP:for(i=0;i<psapMarkers.length;i++)r=$.grep(n,function(n){return n.ObjectID===psapMarkers[i].text}),r.length===0&&(psapMarkers[i].polygon.setMap(null),psapMarkers[i]=null,psapMarkers.splice(i,1));break;case BoundaryType.LATA:for(i=0;i<lataMarkers.length;i++)r=$.grep(n,function(n){return n.ObjectID===lataMarkers[i].text}),r.length===0&&(lataMarkers[i].polygon.setMap(null),lataMarkers[i]=null,lataMarkers.splice(i,1))}}function addNewMarkers(n,t){var i,u,r;switch(t){case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:for(i=0;i<n.length;i++)if(u=$.grep(countyMarkers,function(t){return t.text===n[i].ObjectID}),u.length===0)for(r=0;r<n[i].Polygon.length;r++)countyMarkers.push(createShape(n[i].Polygon[r],t,n[i].ObjectID,n[i].Name));break;case BoundaryType.PSAP:for(i=0;i<n.length;i++)if(u=$.grep(psapMarkers,function(t){return t.text===n[i].ObjectID}),u.length===0)for(r=0;r<n[i].Polygon.length;r++)psapMarkers.push(createShape(n[i].Polygon[r],t,n[i].ObjectID,null));break;case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:for(i=0;i<n.length;i++)if(u=$.grep(rateCenterMarkers,function(t){return t.text===n[i].ID}),u.length===0)for(r=0;r<n[i].Polygon.length;r++)rateCenterMarkers.push(createShape(n[i].Polygon[r],t,n[i].ID,n[i].Name));break;case BoundaryType.LATA:for(i=0;i<n.length;i++)if(u=$.grep(lataMarkers,function(t){return t.text===n[i].ObjectID}),u.length===0)for(r=0;r<n[i].Polygon.length;r++)lataMarkers.push(createShape(n[i].Polygon[r],t,null))}}function createShape(n,t,i,r){var u=MapColors.white,e,f;switch(t){case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:u=MapColors.black;break;case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:u=MapColors.red;break;case BoundaryType.PSAP:u=MapColors.blue;break;case BoundaryType.LATA:u=MapColors.pink}for(e=[],f=0;f<n.Coordinates.length;f++)e.push(new google.maps.LatLng(n.Coordinates[f].Lat,n.Coordinates[f].Lng));return t===BoundaryType.PSAP||t===BoundaryType.LATA?{polygon:new google.maps.Polyline({path:e,strokeColor:u,fillColor:u,strokeWeight:2,strokeOpacity:.8,fillOpacity:.8,zIndex:1}),text:i}:{polygon:new google.maps.Polyline({path:e,strokeColor:u,fillColor:u,strokeWeight:2,strokeOpacity:.8,fillOpacity:.8,zIndex:1}),text:i,label:new MapLabel({text:r.toUpperCase(),position:new google.maps.LatLng(n.Centroid.Lat,n.Centroid.Lng),fontSize:10,fontColor:u,labelInBackground:!0,strokeColor:u,strokeWeight:.4})}}function showMarkers(n){var r,u,i,t;if(n!==null&&typeof n!="undefined")switch(n){case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:for(r="#CountyPolyShowHideMap",i=$(r).prop("checked"),r="#CountyLabelShowHideMap",u=$(r).prop("checked"),t=0;t<countyMarkers.length;t++)countyMarkers[t].polygon.getMap()===map&&i||countyMarkers[t].polygon.getMap()===null&&!i||countyMarkers[t].polygon.setMap(i?map:null),countyMarkers[t].label.getMap()===map&&u||countyMarkers[t].label.getMap()===null&&!u||countyMarkers[t].label.setMap(u?map:null);break;case BoundaryType.PSAP:for(r="#PsapPolyShowHideMap",i=$(r).prop("checked"),t=0;t<psapMarkers.length;t++)psapMarkers[t].polygon.getMap()===map&&i||psapMarkers[t].polygon.getMap()===null&&!i||psapMarkers[t].polygon.setMap(i?map:null);break;case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:for(r="#RateCenterPolyShowHideMap",i=$(r).prop("checked"),r="#RateCenterLabelShowHideMap",u=$(r).prop("checked"),t=0;t<rateCenterMarkers.length;t++)rateCenterMarkers[t].polygon.getMap()===map&&i||rateCenterMarkers[t].polygon.getMap()===null&&!i||rateCenterMarkers[t].polygon.setMap(i?map:null),rateCenterMarkers[t].label.getMap()===map&&u||rateCenterMarkers[t].label.getMap()===null&&!u||rateCenterMarkers[t].label.setMap(u?map:null);break;case BoundaryType.LATA:for(r="#LataPolyShowHideMap",i=$(r).prop("checked"),t=0;t<lataMarkers.length;t++)lataMarkers[t].polygon.getMap()===map&&i||lataMarkers[t].polygon.getMap()===null&&!i||lataMarkers[t].polygon.setMap(i?map:null)}}function searchTableSelect(n){var t=function(n,t){that=$("#"+t.id+"SearchDiv");$(n).css("display","none");that.css("display","block");setTimeout(function(){that.animate({opacity:1},500).addClass("selected")},10);$("#searchCriteria").children("span").each(function(){$(this).attr("onclick","searchTableSelect(this)")})};$(".tab").each(function(){$(this).removeClass("selected")});$("#"+n.id).addClass("selected");$("#searchCriteria").children("span").each(function(){$(this).attr("onclick","")});$("#searchMethods").children().each(function(){$(this).hasClass("selected")&&$(this).animate({opacity:0},500,null,t(this,n)).removeClass("selected")})}function createMarker(n,t,i,r,u,f){return new google.maps.Marker({position:new google.maps.LatLng(t,i),map:map,icon:r===null?iconURLPrefix+"red-dot.png":r,title:n.toString(),id:n,zIndex:u,draggable:f})}function Comet(){this.nameCtrl=null;this.LAST_PAGE_MOVE=(new Date).getTime();this.LAST_REQUEST_CHECK_TIME=(new Date).getTime();this.PAGE_REFRESH_TIME=36e5;this.REFRESH_REQUESTS_TIME=6e4;updateRefreshTime=function(){this.LAST_PAGE_MOVE=(new Date).getTime()};this.updateRequestCheckTime=function(){this.LAST_REQUEST_CHECK_TIME=(new Date).getTime()}}function ErrorInsert(n,t,i,r){this.PageName=n;this.StepName=t;this.ErrorCode=null;this.ErrorDetails=null;i!==null&&typeof i=="string"&&(ErrorCode=i);r!==null&&typeof r=="string"&&(ErrorDetails=r);this.logError=function(n){runAjax(ajax("ErrorInsert",null,this,"Grid").InsertError);console.log("Unimplemented: Log error: "+this.ErrorDetails);$(n).html(ErrorInsert.ErrorDetails)}}function showUserDetails(n){var t=$(n);($(n).data("events")===null||typeof($(n).data("events")==="undefined"))&&$(n).bind({mouseleave:function(){clearTimeout(userTimer);$("#"+t.prop("id")+"User").css("visibility","hidden")}});userTimer=setTimeout(function(){$("#"+t.prop("id")+"User").css("visibility","visible")},500)}function closeNav(n){n&&$.ajax({type:"GET",url:"/Rest/MarkNewVersionAcknowledgement",async:!0,error:function(n,t,i){var r=new ErrorInsert;r.PageName="Index";r.StepName="ajaxCloseNav";r.ErrorDetails=n.responseText+" -- "+i;n.readyState==4&&(r.ErrorCode="c-g-j-cn-01")}});$("#showNav").fadeOut("slow")}function toTitleCase(n){return n.replace(/\w\S*/g,function(n){return n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()})}function minMaxParent(n){if($(n).hasClass("minmaxOpen")){$(n).parent().children().each(function(){$(this).attr("id")!==$(n).attr("id")&&$(this).fadeOut(200)});$(n).parent().parent().children().each(function(){$(this).animate({height:0},300)});var t=!1;$.each(dimensions,function(i,r){$(n).attr("id")===r.id&&(t=!0)});t||dimensions.push({id:$(n).attr("id"),width:$(n).parent().css("width"),height:$(n).parent().css("height"),padding:$(n).parent().css("padding")});$(n).parent().animate({width:"15px",height:"15px",padding:"0px","border-radius":"7px"},500);$(n).removeClass("minmaxOpen").addClass("minmaxClose")}else $.each(dimensions,function(t,i){$(n).attr("id")===i.id&&$(n).parent().animate({width:i.width,height:i.height,padding:i.padding},400,function(){$(this).css({height:"auto","border-radius":"0"})})}),$(n).parent().find(".content").each(function(){this.hasChildNodes()&&$(this).parent().fadeIn(900)}),$(n).parent().parent().children().each(function(){$(this).animate({height:"auto"},300)}),$(n).removeClass("minmaxClose").addClass("minmaxOpen")}function loadEnd(){$("#loadImage").stop().animate({opacity:0},1e3);$(".loading").stop().animate({opacity:0},800);setTimeout(function(){$(".loading").css("z-index","-10");$("#loadImage").css("z-index","-10")},1800)}function loadStart(){$(".loading").css("z-index","99");$("#loadImage").css("z-index","120");setTimeout(function(){$(".loading").stop().animate({opacity:.8,"background-color":"#000"},200)},0);setTimeout(function(){$("#loadImage").stop().animate({opacity:1},200)},0)}function getInternetExplorerVersion(){var n=-1,t,i;return navigator.appName==="Microsoft Internet Explorer"&&(t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),i.exec(t)!==null&&(n=parseFloat(RegExp.$1))),n}function supportsHtml5Storage(){try{return"localStorage"in window&&window.localStorage!==null}catch(n){return!1}}function createStorageExpiration(){var n=new Date;return n.setDate(n.getDate()+1),n.setHours(8,0,0,0)}function trimFuncName(n){var t=n.substr(9);return t.substr(0,t.indexOf("("))}function ajaxDetails(){return{ContentType:{DEFAULT:"application/x-www-form-urlencoded; charset=UTF-8",NULL:null,JSON:"application/json; charset=utf-8",TEXT:"text/plain",HTML:"html"},HttpType:{GET:"GET",POST:"POST"},Synchronous:{TRUE:!0,FALSE:!1}}}function ajaxCall(n,t,i,r,u,f,e,o){if(p===!1)return null;var h=t,c=i,l=n,a=u,s=f,v=e,y=o,p=function(){return typeof t!="string"?!1:typeof n!="string"?!1:typeof u!="string"||u===null?!1:typeof i=="object"&&i!==null&&Array.isArray(i)!==!0?!1:(typeof e=="object"&&e!==null)==!1?!1:(typeof o=="object"&&o!==null)==!1?!1:typeof r!="boolean"?!1:!0};return{QueryString:h,Data:c,HttpType:l,ContentType:a,Synchronous:r,BeforeSendDelegate:function(){return s===null||typeof s=="undefined"?null:s()},SuccessDelegate:function(n){return v(n)},FailureDelegate:function(n,t,i){return y(n,t,i)}}}function runAjax(n){typeof n=="object"&&n!==null&&(n.ContentType!==null&&n.Data!==null?$.ajax({type:n.HttpType,contentType:n.ContentType,data:n.Data,url:n.QueryString,async:n.Synchronous,beforeSend:function(){n.BeforeSendDelegate()},success:function(t){n.SuccessDelegate(t)},error:function(t,i,r){n.FailureDelegate(t,i,r)}}):$.ajax({type:n.HttpType,url:n.QueryString,async:n.Synchronous,beforeSend:function(){n.BeforeSendDelegate()},success:function(t){n.SuccessDelegate(t)},error:function(t,i,r){n.FailureDelegate(t,i,r)}}))}function Ajax(n,t,i){"use strict";var u,f,r;return u=f=r=null,i=i!==null&&(typeof i=="object"||typeof i=="string")?i:u,t!==null&&typeof t=="string"&&(errorPanel=t),{NewRequests:new ajaxCall(ajaxDetails().HttpType.GET,"Rest/Requests",i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.JSON,r,function(n){$("#"+t).html(n.length)},function(){}),InsertError:new ajaxCall(ajaxDetails().HttpType.POST,"Rest/JSError",i,ajaxDetails().Synchronous.FALSE,ajaxDetails().ContentType.JSON,r,function(){},function(){})}}function fillContactInfo(n){var t,i;if($("#subcontent").empty(),n===null||typeof n=="undefined"){$("#subcontent").html("Please select a vendor on the right");return}raiseDetails(!0,"cog");t=document.createElement("div");t.id="contact";$(t).css("padding-bottom","10px");$("#subcontent").append(t);t=document.createElement("div");t.id="quote";$("#subcontent").append(t);n={vendorName:n};$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Main/MSOContactList",data:JSON.stringify(n),async:!0,beforeSend:function(){$("#contact").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><\/div>")},success:function(n){$("#contact").html(n)},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="DrawDetailsUp";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-ddu-01",logError(r,"#Contact"));n.readyState===0&&(r.ErrorCode="c-i-j-ddu-02",logError(r,"#Contact"))}});i={};i.vendorName=n.vendorName;i.lat=requestInfo.lat;i.lng=requestInfo.lng;i.range=requestInfo.range;$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Main/QuoteDetails",data:JSON.stringify(i),async:!0,beforeSend:function(){$("#quote").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><\/div>")},success:function(n){$("#quote").html(n)},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="DrawDetailsUp";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-ddu-01",logError(r,"#Contact"));n.readyState===0&&(r.ErrorCode="c-i-j-ddu-02",logError(r,"#Contact"))}})}function fillNNIInfo(n){var t={lat:requestInfo.lat,lng:requestInfo.lng,range:requestInfo.range};n!=null&&typeof n!="undefined"&&(t.addressID=n,raiseDetails(!0,"nni"));$("#subcontent").empty();$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Main/NNIInRange",data:JSON.stringify(t),async:!0,beforeSend:function(){$("#subcontent").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><\/div>")},success:function(n){$("#subcontent").html(n)},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="DrawDetailsUp";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-ddu-01",logError(r,"#nni"));n.readyState===0&&(r.ErrorCode="c-i-j-ddu-02",logError(r,"#nni"))}})}function fillQuoteInfo(){$("#subcontent").empty();$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Main/QuoteDetails",data:JSON.stringify(requestInfo),async:!0,beforeSend:function(){$("#subcontent").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><\/div>")},success:function(n){$("#subcontent").html(n)},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="DrawDetailsUp";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-ddu-01",logError(r,"#quoteLookup"));n.readyState===0&&(r.ErrorCode="c-i-j-ddu-02",logError(r,"#quoteLookup"))}})}function fillEfInfo(n,t,i){(n===null||typeof n=="undefined")&&(odering=1);var r={lat:requestInfo.lat,lng:requestInfo.lng,range:requestInfo.range,ordering:n};t!=null&&typeof t!="undefined"&&(r.addressID=t,r.isHighSpeed=i==="true",raiseDetails(!0,"ef"));$.ajax({type:"POST",url:"/Main/EFInRange",data:r,async:!0,beforeSend:function(){$("#subcontent").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><\/div>")},success:function(n){$("#subcontent").html(n)},error:function(n,t,i){var r=new ErrorInsert;r.PageName="Index";r.StepName="ShowEfDetails";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-sed-01",logError(r,"#ef"));n.readyState===0&&(r.ErrorCode="c-i-j-sed-02",logError(r,"#ef"))}})}function showHideDetails(n){switch(n){case"ef":fillEfInfo(1);break;case"cog":fillContactInfo();break;case"nni":fillNNIInfo();break;case"quote":fillQuoteInfo()}raiseDetails(!0,n)}function raiseDetails(n,t){if(n){$("#detailsLayer").animate({height:"630px"},300).addClass("show");$("#header").children().find("li").each(function(){$(this).text().toLowerCase()===t?$(this).addClass("selected"):$(this).removeClass("selected")});return}$("#detailsLayer").animate({height:"24px"},300,function(){$(this).removeClass("show")})}function addContact(n){var i=$("tr").remove("#addcontact"),t=$("#contact").html();$("#contact").children().each(function(){$(this).remove()});$("#contact").append($("<form id='addContactForm' action='/Rest/RemoveContact' method='post'>"));$("#addContactForm").append(t);$("#contactsGrid tbody").append("<tr id='newContact'><td><input data-val='true' style='width:100%' id='company' name='vendor' value='"+n+"' /><\/td><td><input data-val='true' style='width:100%' id='name' name='contactName' /><\/td><td><input data-val='true' style='width:100%' id='office' name='officePhone' /><\/td><td><input data-val='true' style='width:100%' id='mobile' name='mobilePhone' /><\/td><td><input data-val='true' style='width:100%' id='email' name='email' /><\/td><td id='addContact' class='cursor'><img src='../../images/upload.png' style='height: 12px;' /><\/td><\/tr>");$("#addContact").bind("click",function(){$("#addContactForm").submit()})}function submitContact(){var t=!0,n;$("#contactUpdateContent label").each(function(){if($(this).hasClass("important"))return t=!1,alert("Please check input. All values must be filled and phone numbers should be in xxx-xxx-xxxx format."),!1});$("#contactUpdateContent input[type=text]").each(function(){if($(this).val().length<1)return t=!1,alert("Please check input. All values must be filled and phone numbers should be in xxx-xxx-xxxx format."),!1});t&&(n=new cableContact,n.vendorNormName=$("#CompanyInput").val(),n.parentVendor=$("#CompanyInput").val(),n.contactName=$("#ContactInput").val(),n.contactOffice=$("#OfficeInput").val(),n.contactMobile=$("#MobileInput").val(),n.contactEmail=$("#EmailInput").val(),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/InsertContact",data:JSON.stringify(n),async:!0,success:function(){$(".loading").css("z-index","-10");$(".loading").animate({opacity:0},500);$("#contactUpdatePanel").fadeOut(500);setTimeout(function(){$("#Contact").empty();var n=$("#hiddenCompany").val();fillContactInfo({vendorName:n})},10)},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="submitContact";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-sc-01",logError(r,"#Contact"));n.readyState===0&&(r.ErrorCode="c-i-j-sc-02",logError(r,"#Contact"))}}))}function deleteContact(n,t){yesNoDialog("confirm","Don't delete","Delete","Are you sure you want to delete this contact?",0,n,t)}function confirmReturn(n,t,i,r){switch(n){case 0:DeleteConfirmed(t,i,r)}}function DeleteConfirmed(n,t){if(n){var i=new cableContact;i.id=t;$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Main/RemoveContact",data:JSON.stringify(i),async:!0,success:function(){var n=n;fillContactInfo({vendorName:n})},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="deleteContact";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-dc-01",logError(r,"#Contact"));n.readyState===0&&(r.ErrorCode="c-i-j-dc-02",logError(r,"#Contact"))}})}}function ExportToQuotesToExcel(){var n=searchBox.getPlace();setTimeout(function(){var t=new requestData;t.lat=n.geometry.location.lat();t.lon=n.geometry.location.lng();t.range=$("#slider-vertical").slider("value")<1?1:$("#slider-vertical").slider("value");$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/ExportQuotes",data:JSON.stringify(t),async:!0,success:function(){},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="ExportQuotes";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-ddu-01",logError(r,"#quote"));n.readyState===0&&(r.ErrorCode="c-i-j-ddu-02",logError(r,"#quote"))}})},50)}function plotLatLon(n,t,i){raiseDetails(!1);var u=map.getBounds(),f={url:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",origin:new google.maps.Point(0,0)},r=new google.maps.Marker({map:map,icon:f,title:n,position:new google.maps.LatLng(t,i),Zindex:4});infowindow.setContent("<div style='font-size: 0.9em'><strong>"+n+"<\/strong><p style='font-size: 0.8em'><b>Latitude: <\/b>"+t+"<br /><b>Longitude: <\/b>"+i+"<\/p><\/div>");google.maps.event.addListener(r,"click",function(n){return function(){infowindow.open(map,n)}}(r));u.extend(new google.maps.LatLng(t,i));infowindow.open(map,r);markers.push(r);map.fitBounds(u)}function getTrend(n,t){var i=new google.visualization.DataTable,r;i.addColumn("string","Week");i.addColumn("number","Utilization");r={backgroundColor:"#fff",titlePosition:"none",lineWidth:3,width:"100%",height:"90%",legend:{position:"none"},chartArea:{left:0,top:0,width:"100%",height:"90%"},animation:{duration:1e3,easing:"out"},hAxis:{textPosition:"none",gridlines:{color:"#fff"},minorGridlines:{color:"#fff",count:0}},vAxis:{textPosition:"in",maxValue:100,minValue:0,viewWindowMode:"maximized",gridlines:{color:"#fff"},minorGridlines:{color:"#fff"}}};$.ajax({type:"GET",url:"Rest/SDPTrend",async:!0,data:{addressID:n,type:t},success:function(n){for(var u,t=0;t<n.length;t++)i.addRow([8-t+(t===n.length-1?" week ago":" weeks ago"),Math.round(n[t]*1e4)/100]);u=new google.visualization.LineChart(document.getElementById("graph"));u.draw(i,r);$("#trendGraph").css({opacity:1,"z-index":3})},error:function(n,t,i){var r=new ErrorInsert;return(r.PageName="Index",r.StepName="ajaxgetTrend",r.ErrorDetails=n.responseText+" -- "+i,n.readyState===4)?(r.ErrorCode="c-i-j-agt-01",r):n.readyState===0?(r.ErrorCode="c-i-j-agt-02",r):void 0}})}function hideTrend(){$("#trendGraph").css({opacity:0,"z-index":-10})}function cableContact(){}function ErrorInsert(){}function indexAjax(n,t,i,r){function h(){var n=new Date;return n.setDate(n.getDate()+1),n.setHours(8,0,0,0),n}function c(n,t){if(typeof n!="string"||typeof t!="object")return null;localStorage.setItem(n,{data:t,expiration:h()})}var f="#map-canvas",u=new ErrorInsert("Index",n),o,s,e;return e=o=s=null,i=i!==null&&typeof i=="object"?i:null,t!==null&&typeof t=="string"&&(f=t),{Sdp:ajaxCall(ajaxDetails().HttpType.GET,"/Main/getSDPLocations",e,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.NULL,ajaxDetails().nullBeforeSend,function(n){c("sdpMarkers",n);PlotSDPToMap(n)},function(n,t,i){u.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(u.ErrorCode="c-i-j-asm-01");n.readyState===0&&(u.ErrorCode="c-i-j-gi-02");logError(u,f)}),PlotSdp:ajaxCall(ajaxDetails().HttpType.POST,"Main/LocationSDP",i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(n){infowindow.setContent(n);infowindow.open(map,r)},function(n,t,i){u.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(u.ErrorCode="c-i-j-als-01");n.readyState===0&&(u.ErrorCode="c-i-j-als-02");logError(u,f)}),Network:ajaxCall(ajaxDetails().HttpType.POST,"Main/LocationDetails",i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,function(){$(t).children(".dynamic").each(function(){$(this).remove()})},function(n){var i=["lataSearch","swcSearch","msoSearch","onNetSearch","nearNetSearch"],r;for($(t).append(n),r=i.length-1;r>=0;r--)$("#"+i[r]+" h4").bind("click",function(){$(this).parent().parent().hasClass("SearchResultDivDisplay")?$(this).parent().parent().removeClass("SearchResultDivDisplay"):$(this).parent().parent().addClass("SearchResultDivDisplay")});$(t).bind("mouseenter",function(){for(var n=i.length-1;n>=0;n--)$("#"+i[n]).addClass("minimized").find(".title").css("display","");$(this).unbind("mouseenter")})},function(n,t,i){u.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(u.ErrorCode="c-i-j-als-01");n.readyState===0&&(u.ErrorCode="c-i-j-als-02");logError(u,f)})}}function showContextMenu(n){var u=map.getProjection(),t,i,r;$(".contextmenu").remove();t=$("<div>");t.addClass("contextmenu");i=$("<a>");i.prop("id","menu1");i.html("What's Nearby?");i.bind("click",function(){searchTableSelect(document.getElementById("latLng"));setTimeout(function(){$("#lat-input").val(Math.round(n.lat()*1e9)/1e9);$("#lng-input").val(Math.round(n.lng()*1e9)/1e9);$("#addressSearch").click()},550);$(".contextmenu").remove()});t.html(i);$("#map-canvas").append(t);setMenuXY(n);r=google.maps.event.addListener(map,"click",function(){t.remove();google.maps.event.removeListener(r)})}function getCanvasXY(n){var t=Math.pow(2,map.getZoom()),u=new google.maps.LatLng(map.getBounds().getNorthEast().lat(),map.getBounds().getSouthWest().lng()),i=map.getProjection().fromLatLngToPoint(u),r=map.getProjection().fromLatLngToPoint(n);return new google.maps.Point(Math.floor((r.x-i.x)*t),Math.floor((r.y-i.y)*t))}function setMenuXY(n){var e=$("#map-canvas").width(),o=$("#map-canvas").height(),r=$(".contextmenu").width(),u=$(".contextmenu").height(),f=getCanvasXY(n),t=f.x,i=f.y;e-t<r&&(t=t-r);o-i<u&&(i=i-u);$(".contextmenu").css({left:t,top:i})}function addSDPToMap(){if(assetLocations=[],localStorageAllowed&&localStorage.getItem("sdpMarkers")!==null&&localStorage.getItem("sdpMarkers").expiration>=Date.now()){PlotSDPToMap(JSON.parse(localStorage.getItem("sdpMarkers").data));return}var n=trimFuncName(arguments.callee.toString());runAjax(indexAjax(n,"#map-canvas",null,"").Sdp)}function PlotSDPToMap(n){for(var i,r,t=0;t<n.length;t++){i=createMarker(n[t].AddressID,n[t].LatLng.Lat,n[t].LatLng.Lng,locationIcons[n[t].Services-1],2,!1);infoHover=new google.maps.InfoWindow;function u(){var n=infoHover.getMap();n!==null&&typeof n!="undefined"&&infoHover.close()}google.maps.event.addListener(i,"click",function(n){return function(){u();var t=trimFuncName(arguments.callee.toString()),i={addressID:n.id};runAjax(indexAjax(t,"#map-canvas",i,n).PlotSdp)}}(i,t));google.maps.event.addListener(i,"mouseover",function(n,t){return function(){(infowindow.getMap()===null||typeof infowindow.getMap()=="undefined")&&(infoHover.setContent((n>>3&!0?"<img src='../../Images/star.png'>":"")+(n>>2&!0?"<img src='../../Images/pentagon.png'>":"")+(n>>1&!0?"<img src='../../Images/triangle.png'>":"")+(n&!0?"<img src='../../Images/square.png'>":"")),infoHover.open(map,t));google.maps.event.addListener(map,"mousemove",function(){infoHover.close()})}}(n[t].Services,i));r=new assetLocation(i,n[t].Services,n[t].AddressID);assetLocations.push(r)}showMarkers()}function searchProviders(n,t,i,r,u,f){var g=searchSettings(),b,y,p,w,l,s,h,k,e,a,o,c,d,v;if(g.SafeToSearch===!0){if(b=y=p=w=l="",s=h="",k=null,g.AddressSearch===!0){if(e=searchBox.getPlace(),e.geometry!==null||typeof e.geometry!="undefined"){for(a=1e6,s=Math.round(e.geometry.location.lat()*a)/a,h=Math.round(e.geometry.location.lng()*a)/a,o=e.address_components.length;o--;)for(c=e.address_components[o].types.length;c--;)e.address_components[o].types[c]==="postal_code"?b=e.address_components[o].long_name:e.address_components[o].types[c]==="administrative_area_level_1"?p=e.address_components[o].short_name:e.address_components[o].types[c]==="locality"?y=e.address_components[o].long_name:e.address_components[o].types[c]==="street_number"?w=e.address_components[o].long_name:e.address_components[o].types[c]==="route"&&(l=e.address_components[o].long_name);locateNearest(y,b,p,s,h,w,l);n=e.name}}else $("#clli").hasClass("selected")?(p=i,y=t,w=l=n,s=r,h=u,k=f,locateNearest(t,null,i,s,h,n,l)):$("#latLng").hasClass("selected")&&(s=$("#lat-input").val(),h=$("#lng-input").val(),locateNearest(t,null,i,s,h,n,l));d=new google.maps.LatLngBounds;v=createMarker("searchMarker",s,h,null,2,!1);createSearchCircle(v);google.maps.event.addListener(v,"click",function(t){return function(){infowindow.setContent(getInfoWindow("pin",k,n,s,h));infowindow.open(map,t)}}(v));d.extend(new google.maps.LatLng(s,h));markers.push(v);map.fitBounds(d);setTimeout(function(){var n=google.maps.event.addListener(map,"idle",function(){map.getZoom()>14&&map.setZoom(14);google.maps.event.removeListener(n)})},15)}}function locateNearest(n,t,i,r,u,f,e){var o,s;requestInfo=new RequestData;requestInfo.lat=r;requestInfo.lng=u;requestInfo.zip=t;requestInfo.range=$("#slider-vertical").slider("value")<1?1:$("#slider-vertical").slider("value");requestInfo.addressConcat=f+" "+e+"|"+n+"|"+i;requestInfo.controller="/Main/LocationCLEC";o=new Worker("Scripts/PageScripts/Point.js");o.onmessage=function(n){var r={coord:[0,0,30],type:"circle"},u=new google.maps.LatLngBounds,t=n.data.length-1,i=function(){for(;t>=0;t--){t+1<n.data.length&&t%500==0&&setTimeout(i,5);var f=new google.maps.Marker({position:new google.maps.LatLng(n.data[t].LatLng.Lat,n.data[t].LatLng.Lng),icon:n.data[t].Vendor==="Level3"?icons[0]:n.data[t].Vendor.toLowerCase()==="level3_tw"?icons[12]:icons[1],shape:r,flat:!0,id:n.data[t].CLLI,zIndex:10,origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(5,5),map:$("#CLECShowHideMap").prop("checked")?map:null});clecMarkers.push(f);google.maps.event.addListener(f,"click",function(t,i){return function(){var r=n.data[i].Vendor+"<\/b> ("+n.data[i].VendorType+") ",u;r+=n.data[i].CLLI===null?"":"- "+n.data[i].CLLI;u="<b>"+n.data[i].FullStreet+"<\/b><br />"+n.data[i].City+", "+n.data[i].State;infowindow.setContent(getInfoWindow("default",r,u,n.data[i].LatLng.Lat,n.data[i].LatLng.Lng));infowindow.open(map,t)}}(f,t));u.extend(f.position)}};i();o.terminate()};o.postMessage(requestInfo);s=trimFuncName(arguments.callee.toString());runAjax(indexAjax(s,"#map-right",requestInfo,null).Network)}function getFiber(n){if(n==="tw"){showMarkers();return}if($("input[id='"+n+"']").prop("checked")){var t=map.getBounds(),r={vendorName:n,bottomLeftLat:t.getSouthWest().lat(),bottomLeftLng:t.getSouthWest().lng(),topRightLat:t.getNorthEast().lat(),topRightLng:t.getNorthEast().lng(),zoom:map.getZoom()},i=new Worker("Scripts/PageScripts/Line.js");i.onmessage=function(n){addFiberMap(n.data);i.terminate()};i.postMessage(r);return}removeFiber(n)}function removeFiber(n){if(vendorFiberMarkers[n]!==null&&typeof vendorFiberMarkers[n]!="undefined"){var t=vendorFiberMarkers[n].length-1,i=function(){for(;t>=0;t--)t+1<vendorFiberMarkers[n].length&&t%500==0&&setTimeout(i,5),vendorFiberMarkers[n][t].setMap(null)};i()}}function getBoundary(n){if($("#"+n+"ShowHideMap").prop("checked")){if(n===null||typeof n=="undefined")return;var t=map.getBounds(),r={type:n,data:{bottomLeftLat:t.getSouthWest().lat(),bottomLeftLng:t.getSouthWest().lng(),topRightLat:t.getNorthEast().lat(),topRightLng:t.getNorthEast().lng(),zoom:map.getZoom()}},i=new Worker("Scripts/PageScripts/Polygon.js");i.onmessage=function(t){addToMap(n,t.data);i.terminate()};i.postMessage(r);return}removeFromMap(n)}function removeFromMap(n){if(typeof boundaryMarker[n]!="undefined"){var t=boundaryMarker[n].length-1,i=function(){for(;t>=0;t--)t+1<boundaryMarker[n].length&&t%500==0&&setTimeout(i,5),boundaryMarker[n][t].polygon.setMap(null),boundaryMarker[n][t].label.setMap(null)};i()}}function addToMap(n,t){typeof boundaryMarker[n]!="undefined"&&boundaryMarker[n]!==null&&boundaryMarker[n].length>0&&removeFromMap(n);boundaryMarker[n]=[];var i=t.length-1,r=function(){for(var l,o,s,h,c,u,a,f,e;i>=0;i--)typeof t[i]!="undefined"&&(i+1<t.length&&i%500==0&&setTimeout(r,5),l=t[i].line,u=map.getMapTypeId()==="hybrid",n==="swc"?(s=u?MapColors.yellow:MapColors.purple,h=u?MapColors.yellow:MapColors.purple,o=u?MapColors.yellow:MapColors.purple,c=u?MapColors.purple:MapColors.yellow):n==="lata"&&(s=u?MapColors.white:MapColors.black,h=u?MapColors.darkWhite:MapColors.lightBlack,o=u?MapColors.white:MapColors.black,c=u?MapColors.black:MapColors.white),a=n==="mso"?.8:1,f=n==="mso"?.2:.1,e={polygon:new google.maps.Polygon({paths:l,strokeColor:n==="mso"?t[i].color:s,fillColor:n==="mso"?t[i].color:h,strokeOpacity:a,fillOpacity:f,strokeWeight:.8,map:map,zIndex:0}),label:new MapLabel({text:t[i].name,position:new google.maps.LatLng(t[i].centroid.lat,t[i].centroid.lng),fontSize:10,fontColor:c,labelInBackground:!0,strokeColor:o,map:n==="mso"?null:map})},google.maps.event.addListener(e.polygon,"mouseover",function(){this.setOptions({fillOpacity:f/3})}),google.maps.event.addListener(e.polygon,"mouseout",function(){this.setOptions({fillOpacity:f})}),boundaryMarker[n].push(e))};r()}function addFiberMap(n){if(n!==null&&n.length>0){removeFiber(n[0].vendor);vendorFiberMarkers[n[0].vendor]=[];(infoFiber.getMap()!==null||typeof infoFiber.getMap()!="undefined")&&infoFiber.close();var t=n.length-1,i=function(){for(;t>=0;t--){t+1<n.length&&t%500==0&&setTimeout(i,5);var r=new google.maps.Polyline({path:n[t].line,geodesic:!0,strokeColor:n[t].color,strokeOpacity:1,strokeWeight:3,zIndex:0,map:map,message:n[t].vendor+" Fiber"});google.maps.event.addListener(r,"click",function(n){infoFiber.setContent(this.message);infoFiber.setPosition(n.latLng);infoFiber.open(map)});vendorFiberMarkers[n[0].vendor].push(r)}};i();showMarkers()}}function showMarkers(n){var r,i,t;if(n===null||typeof n=="undefined")$("#legend table tr input:checkbox").each(function(){var i=$(this).attr("id"),t=$(this).prop("checked"),n;switch(i){case"tw":twLayer.setMap(t?map:null);break;case"CLECShowHideMap":for(n=clecMarkers.length-1;n>=0;n--)clecMarkers[n].setMap(t?map:null)}});else{r=$(n).attr("id");i=0;switch(r){case"NNIShowHideMap":i+=4;case"ILECShowHideMap":i+=2;case"LOWShowHideMap":i+=1;case"HIGHShowHideMap":for(i+=1,t=assetLocations.length-1;t>=0;t--)assetLocations[t].marker.setMap(null),assetLocations[t].attributes=(assetLocations[t].attributes^i)&assetLocations[t].modAttributes,assetLocations[t].marker.icon=locationIcons[assetLocations[t].attributes-1],assetLocations[t].marker.setMap(assetLocations[t].attributes<=0?null:map)}}}function expandCollapse(n,t,i){t.src.match("expand")?(t.src="../../Images/collapse.gif",$("#"+n+" tr."+i).each(function(){$(this).show()})):(t.src="../../Images/expand.gif",$("#"+n+" tr."+i).each(function(){$(this).hide()}))}function searchTableSelect(n){var t=function(n,t){that=$("#"+t.id+"SearchDiv");$(n).css("display","none");that.css("display","block");setTimeout(function(){that.animate({opacity:1},500).addClass("selected")},1);$("#searchCriteria").children("span").each(function(){$(this).attr("onclick","searchTableSelect(this)")})};$(".tab").each(function(){$(this).removeClass("selected")});$("#"+n.id).addClass("selected");$("#searchCriteria").children("span").each(function(){$(this).attr("onclick","")});$("#searchMethods").children().each(function(){$(this).hasClass("selected")&&$(this).animate({opacity:0},500,null,t(this,n)).removeClass("selected")})}function ShowLocationSwitch(n){$("#location").children("span").each(function(){$(this).attr("onclick","")});$("#location").children("div").each(function(){$(this).fadeTo(500,0,null);$(this).css("z-index",-1)});setTimeout(function(){$("#"+n.id+"Div").fadeTo(800,1,null);$("#"+n.id+"Div").css("z-index",3)},550);setTimeout(function(){$("#location").children("span").each(function(){this.id===n.id?$(this).addClass("selected"):$(this).removeClass("selected");$(this).attr("onclick","ShowLocationSwitch(this)")})},600)}function searchSettings(){var i=null,r=!1,t=!1,n;for(circle!==null&&typeof circle!="undefined"&&circle.setMap(null),(infowindow.getMap()!==null||typeof infowindow.getMap()!="undefined")&&infowindow.close(),(infoHover.getMap()!==null||typeof infoHover.getMap()!="undefined")&&infoHover.close(),n=0;n<markers.length;n++)markers[n].setMap(null);for(n=0;n<clecMarkers.length;n++)clecMarkers[n].setMap(null);return markers=[],clecMarkers=[],locations=[],i=!0,$("#address").hasClass("selected")&&$("#pac-input").val().length>1&&(r=!0),$("#clli").hasClass("selected")&&(t=!0),$("#latLng").hasClass("selected")&&(t=!0),{SafeToSearch:i,AddressSearch:r,ClliSearch:t,LatLngSearch:!1}}function getInfoWindow(n,t,i,r,u){var e=Math.pow(10,6),f="<div style='width: 240px; height: 110px; overflow: hidden; line-height: 1.35'>",o="<p style='font-size: 0.9em'>",h="<table class='flat' style='font-size: 0.85em'>",c="<tr><td style='vertical-align:top;'><h6>Latitude: <\/h6><h6>Longitude: <\/h6><\/td><td  style='vertical-align:top; padding-left: 5px;' class='numCell'><div>"+Math.round(r*e)/e+"<\/div><div>"+Math.round(u*e)/e+"<\/div><\/td><\/tr>",l="<\/table>",s="<\/p><\/div>",a,v;if(n!==null&&typeof n!="undefined")switch(n){case"pin":i!==null&&typeof i!="undefined"&&(f+="<h6>"+i+"<\/h6>");a="<a onclick='removePin()'>Remove Pin<\/a>";v="<a onclick='removeCircle()'>Remove Circle<\/a>";f+=o+h+c+l+a+"&nbsp;&nbsp;"+v;+s;break;case"default":f+="<h5>"+t+"<\/h5>"+o+i+"<\/p>"+o+h+c+l+s;break;default:f+=s}return f}function removePin(){for(var n=markers.length-1;n>=0;n--)markers[n].id==="searchMarker"&&(markers[n].setMap(null),markers[n]=null,markers.splice(n,1));removeCircle()}function createMarker(n,t,i,r,u,f){var e={url:iconURLPrefix+"red-dot.png",origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34)};return new google.maps.Marker({position:new google.maps.LatLng(t,i),map:map,icon:r===null?e:r,title:n.toString(),id:n,zIndex:u,draggable:f})}function removeCircle(){circle!=null&&circle.setMap(null);circle=null}function createSearchCircle(n){n!==null&&typeof n!="undefined"&&(circle=new google.maps.Circle({map:map,radius:($("#slider-vertical").slider("value")<1?1:$("#slider-vertical").slider("value"))/.00062137,fillColor:"#0066FF",fillOpacity:.1,strokeColor:"#0066FF",strokeOpacity:.7,strokeWeight:2,zIndex:-2}));circle.bindTo("center",n,"position")}function RequestData(){}function assetLocation(n,t,i){this.marker=n;this.attributes=t;this.modAttributes=t;this.addressID=i}function select(n){$("input[value="+n+"]").prop("checked",!0);calculateTotal()}function calculateTotal(){var n=$("input[type='radio'][name='gb']:checked").val()=="oneGB"?1e3:1e4,t=$("input[type='radio'][name='gateway']:checked").val()=="yes"?0:n==1e3?885.28:954;$("#Total").val("$"+Math.round((Number($("#NNI_MRC").val())+t)/n*Number($("#EVC").val())*1.25*100)/100)}var slickGrid,Global,userTimer,dimensions;google.load("visualization","1.0",{packages:["corechart"]});$(document).ready(function(){getUsageByWeeksJson();loadEnd()});$(document).ready(function(){var n,t;evalHref();showParent();window.addEventListener("popstate",function(n){if(n.state!==null&&typeof n.state!="undefined"){var t=n.state.link.replace("Partial",""),i=t==="Project"?{projectID:n.state.item}:t==="Request"?{requestID:n.state.item}:{elementID:n.state.item};runAjax(ajax("ready","displayDiv",i,n.state.link).OpenItem)}else rerunGrid(!0);evalHref()});n=null;$("li.ellipse").hover(function(){var t=$(this);n=setTimeout(function(){t.children().first().addClass("showEllipse").css({top:t.offset().top-t.parent().offset().top+t.parent().position().top+2})},500)},function(){clearTimeout(n);$(this).children().first().removeClass("showEllipse")});bindInputs();t=$.ech.multiselect.prototype.close;$.ech.multiselect.prototype.close=function(){var n=t.apply(this,arguments);return rerunGrid(),n};$("#globalSearch").autocomplete({delay:750,focus:function(n){n.preventDefault()},source:function(n,t){var i={searchContext:$("#globalSearch").val()};$.get("/console/SearchConsole",i,function(n){for(var r=[],i=0;i<n.length;i++)r.push({label:n[i].Text,value:n[i].RelativeUrl,id:i,title:n[i].ToolTip});t(r)})},select:function(n,t){n.preventDefault();$("#globalSearch").text("").html("");openItem(t.item.value)},open:function(){$(".ui-autocomplete").css({"background-color":"#FFFFFF","font-size":"0.7em","max-height":"350px","overflow-y":"scroll","overflow-x":"hidden"});$(".ui-autocomplete li").css({outline:"1px"})}}).data("ui-autocomplete")._renderItem=function(n,t){return $("<li title='"+t.title+"'>").data("ui-autocomplete-item",t).append($("<a>").html(t.label)).appendTo(n)}});/*@cc_on@*/var iconURLPrefix="http://maps.google.com/mapfiles/ms/icons/",MapColors={yellow:"#F2FA00",white:"#eee",black:"#111",blue:"#0000FF",purple:"#4000BF",orange:"#FF7700",darkWhite:"#ddd",lightBlack:"#333",red:"#FF0000"},BoundaryType={RATECENTER:"rateCenter",RATECENTERLABEL:"rateCenterLabel",PSAP:"psap",COUNTY:"county",COUNTYLABEL:"countyLabel",LATA:"lata"},Coordinate=function(n,t){this.Lat=n;this.Lng=t},Boundary=function(n){this.Coordinate=[];for(var t=0;t<n.length;t++)this.Coordinate.push(Coordinate.call(this,n.lat,n.lng))};PageMap.prototype={clearMarkers:function(n){if(this.boundaryType!==null&&typeof this.boundaryType!="undefined"){for(var t=this.polygonMarkers[n].length-1;t>=0;t--)this.polygonMarkers[n][t].label!==null&&typeof this.polygonMarkers[n][t].label!="undefined"&&this.polygonMarkers[n][t].label.setMap(null),this.polygonMarkers[n][t].polygon.setMap(null);this.polygonMarkers[n]=[]}},addMarkers:function(n,t,i){if(this.boundaryType!==null&&typeof this.boundaryType!="undefined"){this.polygonMarkers[n]!==null&&typeof this.polygonMarkers[n]!="undefined"&&clearMarkers(n);var r=new{polygon:t,label:i};t.setMap(this.map);i!==null&&typeof i!="undefined"&&i.setMap(this.map);this.polygonMarkers[n].push(r)}}};var mapListener,localStorageAllowed,countyMarkers=[],rateCenterMarkers=[],psapMarkers=[],lataMarkers=[],highlight=[],marker,clickMarker,map,infowindow,clickInfowindow,searchBox,djConfig={parseOnLoad:!0,packages:[{name:"agsjs",location:"https://gmaps-utility-gis.googlecode.com/svn/tags/agsjs/2.04/xbuild/agsjs"}]};$(document).ready(function(){"use strict";var n=getInternetExplorerVersion(),t;n>-1&&n<10&&alert("Your are using an outdated version of IE. Comet recommends that you use IE10, Chrome, or Firefox.");localStorageAllowed=supportsHtml5Storage();$("#lat-input, #lng-input").keypress(function(n){n.which==13&&searchLatLng()});$("#MinMaxSearch").click(function(){minMaxParent(this)});map=new google.maps.Map(document.getElementById("map-canvas"),{center:new google.maps.LatLng(38.850033,-95.6500523),zoom:5,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM,style:google.maps.ZoomControlStyle.SMALL},panControl:!1,scaleControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP});infowindow=new google.maps.InfoWindow;clickInfowindow=new google.maps.InfoWindow;t=document.getElementById("pac-input");searchBox=new google.maps.places.Autocomplete(t);google.maps.event.addListener(searchBox,"place_changed",function(){searchProviders()});$("#project-input").autocomplete({delay:500,focus:function(n,t){n.preventDefault();var i=t.item.label.split(": ");$(this).val(i[1].replace("<mark>","").replace("<\/mark>",""))},source:function(n,t){var i={search:$("#project-input").val()};$.get("./E911/ShowProject",i,function(n){for(var r=[],i=0;i<n.length;i++)r.push({label:n[i][0],value:n[i][1],id:i});t(r)})},select:function(n,t){n.preventDefault();var i=t.item.label.split(": "),r=i[0].replace("<b>","").replace("<\/b>","").replace("<u>","").replace("<\/u>",""),u=i[1].replace("<mark>","").replace("<\/mark>","");$(this).val(u);searchProject(r,t.item.value)},open:function(){$(".ui-autocomplete").css({"background-color":"#FFFFFF","font-size":"0.7em","max-height":"350px","overflow-y":"scroll","overflow-x":"hidden",width:$(this).width()+5+"px"});$(".ui-autocomplete li").css({outline:"1px"})}}).data("ui-autocomplete")._renderItem=function(n,t){return $("<li title='"+t.title+"'>").data("ui-autocomplete-item",t).append($("<a>").html(t.label)).appendTo(n)};google.maps.event.addListener(map,"idle",function(){var n,t=google.maps.event.addListener(map,"bounds_changed",function(){clearTimeout(n)});n=setTimeout(function(){var n;if(map.getZoom()>=10)$("#CountyPolyShowHideMap").prop("disabled",!1),$("#CountyPolyShowHideMap").prop("checked")&&getCounty($("#CountyPolyShowHideMap")),$("#CountyLabelShowHideMap").prop("disabled",!1),$("#RateCenterPolyShowHideMap").prop("disabled",!1),$("#RateCenterPolyShowHideMap").prop("checked")&&getRateCenter($("#RateCenterPolyShowHideMap")),$("#RateCenterLabelShowHideMap").prop("disabled",!1),$("#PsapPolyShowHideMap").prop("disabled",!1),$("#PsapPolyShowHideMap").prop("checked")&&getPsap($("#PsapPolyShowHideMap")),$("#LataPolyShowHideMap").prop("disabled",!1),$("#LataPolyShowHideMap").prop("checked")&&getLata($("#LataPolyShowHideMap")),(mapListener===null||typeof mapListener=="undefined")&&(mapListener=google.maps.event.addListener(map,"click",function(n){getClickDetails(n)}));else{for($("#CountyPolyShowHideMap").prop("disabled",!0),$("#CountyLabelShowHideMap").prop("disabled",!0),n=0;n<countyMarkers.length;n++)countyMarkers[n].polygon.setMap(null),countyMarkers[n].label.setMap(null);for($("#RateCenterPolyShowHideMap").prop("disabled",!0),$("#RateCenterLabelShowHideMap").prop("disabled",!0),n=0;n<rateCenterMarkers.length;n++)rateCenterMarkers[n].polygon.setMap(null),rateCenterMarkers[n].label.setMap(null);for($("#PsapShowHideMap").prop("disabled",!0),n=0;n<psapMarkers.length;n++)psapMarkers[n].polygon.setMap(null);for($("#LataShowHideMap").prop("disabled",!0),n=0;n<lataMarkers.length;n++)lataMarkers[n].polygon.setMap(null);google.maps.event.clearListeners(map,"click");google.maps.event.removeListener(t);searchBox.setBounds(map.getBounds())}},500)});$("#selectDetail").bind("click",function(){$(this).hasClass("SearchResultDivDisplay")?$(this).removeClass("SearchResultDivDisplay"):$(this).addClass("SearchResultDivDisplay")})});Global={PAGE_NAME:"Global"};Comet.prototype={setNameCtrl:function(n){this.nameCtrl=n},TODAY:function(){var n=new Date;return n.setDate(n.getDate()),n},NOW:function(){return(new Date).getTime()},setRefresh:function(){var n=this,t=function(){n.setRefresh()};this.NOW()-this.LAST_PAGE_MOVE>=216e5?window.location.reload(!0):setTimeout(t,this.PAGE_REFRESH_TIME)},refreshData:function(){runAjax(ajaxCall(ajaxDetails().HttpType.POST,"/Rest/RefreshAppData",null,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.JSON,function(){loadStart()},function(n){alert(n);this.updateRefreshTime();location.reload()},function(){}))},getNewRequests:function(){var n=this,t=function(){n.getNewRequests()};this.NOW()-this.LAST_REQUEST_CHECK_TIME>=this.REFRESH_REQUESTS_TIME&&(runAjax(ajaxCall(ajaxDetails().HttpType.POST,"/Rest/Requests",null,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(n){if(n.length>0){if($("#consoleUnread").length===0){var t=document.createElement("div");$(t).attr("id","consoleUnread").addClass("notification");CorrectNotification();$("#menuDiv").append(t)}$("#consoleUnread").html(n.length)}else $("#consoleUnread")!==null&&typeof $("#consoleUnread")!="undefined"&&$("#consoleUnread").remove()},function(){})),this.updateRequestCheckTime());setTimeout(t,this.REFRESH_REQUESTS_TIME)},CorrectNotification:function(){$("#consoleUnread").css({left:$("#consoleAnchor").offset().left+$("#consoleAnchor").width()-15,top:$("#consoleAnchor").offset().top-8})}};userTimer=null;$(document).ready(function(){var n=new Comet,t;n.setRefresh();n.LAST_REQUEST_CHECK_TIME=n.LAST_REQUEST_CHECK_TIME-n.REFRESH_REQUESTS_TIME;n.getNewRequests();$(window).resize(n.CorrectNotification);t=getInternetExplorerVersion();t>-1&&t<10&&alert("Your are using an outdated version of IE. Comet recommends that you use IE10, Chrome, or Firefox.");$("div#body").scroll(function(){var n=$("div#body").scrollTop();n>0?$("header").addClass("scroll"):$("header").removeClass("scroll")});$("#sawNewVersion").html().toLowerCase()==="false"&&($.ajax({type:"GET",url:"/Rest/ShowNav",async:!0,success:function(n){$("#showNav").html(n)},error:function(n,t,i){var r=n.responseText+" --- "+i,u=new ErrorInsert(Global.PAGE_NAME,"showNav","g-r-sn-01",r);u.logError()}}),$("#showNav").css("display","block"));$("a#refresh").click(function(){n.refreshData()});$("input[type='date']").each(function(){this.type!=="date"&&($.datepicker.formatDate("MM/dd/yyyy"),$(this).datepicker({buttonImage:"calendar.gif",buttonText:"Pick a date",beforeShowDay:$.datepicker.noWeekends}))})});dimensions=[];google.load("visualization","1.0",{packages:["corechart"]});var iconURLPrefix="http://maps.google.com/mapfiles/ms/icons/",icons=["../../Images/CircleFire.png","../../Images/CircleBlue.png","../../Images/CircleGreen.png","../../Images/CirclePurple.png","../../Images/CircleRed.png","../../Images/CircleYellow.png","../../Images/CircleBrown.png","../../Images/CircleGrey.png","../../Images/CircleOrange.png","../../Images/CircleForest.png","../../Images/CirclePink.png","../../Images/CircleBlue1.png","../../Images/CircleTeal.png","../../Images/CirclePurple1.png","../../Images/CircleExtra.png"],locationIcons=["../../Images/SSDP01.png","../../Images/SSDP02.png","../../Images/SSDP03.png","../../Images/SSDP04.png","../../Images/SSDP05.png","../../Images/SSDP06.png","../../Images/SSDP07.png","../../Images/SSDP08.png","../../Images/SSDP09.png","../../Images/SSDP10.png","../../Images/SSDP11.png","../../Images/SSDP12.png","../../Images/SSDP13.png","../../Images/SSDP14.png","../../Images/SSDP15.png"],MapColors={yellow:"#F2FA00",white:"#eee",black:"#111",purple:"#4000BF",orange:"#FF7700",darkWhite:"#ddd",lightBlack:"#333",red:"#FF0000"},LatLng=function(n,t){var n=n,t=t;return{latlng:function(){return new{lat:n,lng:t}},lat:function(){return n},lng:function(){return t}}},PAGE=PAGE||{},requestInfo;var localStorageAllowed,markers=[],clecMarkers=[],assetLocations=[],vendorFiberMarkers=[],twLayer=new google.maps.FusionTablesLayer({suppressInfoWindows:!1,query:{select:"col2",from:"1V_70gH0H3SaS0gRSPvf_b1C1zI6z0IQES6zyC5po"},options:{styleId:2,templateId:2}}),boundaryMarker={lata:[],swc:[]},circle,map,infowindow,infoHover,infoFiber=new google.maps.InfoWindow,searchBox,djConfig={parseOnLoad:!0,packages:[{name:"agsjs",location:"https://gmaps-utility-gis.googlecode.com/svn/tags/agsjs/2.04/xbuild/agsjs"}]};$(document).ready(function(){"use strict";localStorageAllowed=supportsHtml5Storage();$("#slider-vertical").slider({orientation:"horizontal",range:"min",min:0,max:50,value:2,slide:function(){$("label[for='amount']").text("Range: "+$("#slider-vertical").slider("value")+" miles")}});$("#lat-input, #lng-input").keypress(function(n){n.which===13&&searchProviders()});$("#MinMaxSearch").click(function(){minMaxParent(this)});requestInfo=new RequestData;requestInfo.lat=38.850033;requestInfo.lng=-95.6500523;requestInfo.latLng=new LatLng(38.850033,-95.6500523);requestInfo.zip="";requestInfo.range=$("#slider-vertical").slider("value")<1?1:$("#slider-vertical").slider("value");requestInfo.addressConcat=" ||";requestInfo.contoller=null;map=new google.maps.Map(document.getElementById("map-canvas"),{center:new google.maps.LatLng(requestInfo.latLng.lat(),requestInfo.latLng.lng()),zoom:5,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM,style:google.maps.ZoomControlStyle.SMALL},panControl:!1,mapTypeId:google.maps.MapTypeId.HYBRID});infowindow=new google.maps.InfoWindow;infoHover=new google.maps.InfoWindow;var n=document.getElementById("pac-input");searchBox=new google.maps.places.Autocomplete(n);$("#addressSearch").click(function(){searchProviders()});$("#clli-input").autocomplete({delay:200,focus:function(n,t){n.preventDefault();$(this).val(t.item.label.replace("<mark>","").replace("<\/mark>",""))},source:function(n,t){var i={input:$("#clli-input").val()};$.get("/Main/JsonCLLIMatch",i,function(n){for(var r=[],i=0;i<n.length;i++)r.push({label:n[i].CLLI,value:n[i],id:n[i].AddressID});t(r)})},select:function(n,t){n.preventDefault();searchProviders(t.item.value.FullStreet,t.item.value.City,t.item.value.State,t.item.value.LatLng.Lat,t.item.value.LatLng.Lng)},open:function(){$(".ui-autocomplete").css({"background-color":"#FFFFFF","font-size":"0.7em","max-height":"350px","overflow-y":"scroll","overflow-x":"hidden",width:$(this).width()+"px"});$(".ui-autocomplete li").css({outline:"1px"})}}).data("ui-autocomplete")._renderItem=function(n,t){return $("<li title='"+t.label+"'>").data("ui-autocomplete-item",t).append($("<a>").html(t.label)).appendTo(n)};google.maps.event.addListener(searchBox,"place_changed",function(){searchProviders()});google.maps.event.addListener(map,"rightclick",function(n){showContextMenu(n.latLng)});google.maps.event.addListener(map,"maptypeid_changed",function(){var n=this.getMapTypeId()==="hybrid";$("div#boundarySpan input").each(function(){var o=this,s=$(o).prop("id"),t=s.slice(0,s.indexOf("ShowHide")),r,u,f,e,i;if(t!=="mso"&&(t==="swc"?(u=n?MapColors.yellow:MapColors.purple,f=n?MapColors.yellow:MapColors.purple,r=n?MapColors.yellow:MapColors.purple,e=n?MapColors.purple:MapColors.yellow):t==="lata"&&(u=n?MapColors.white:MapColors.black,f=n?MapColors.darkWhite:MapColors.lightBlack,r=n?MapColors.white:MapColors.black,e=n?MapColors.black:MapColors.white),$(o).prop("checked")&&typeof boundaryMarker[t]!="undefined"&&boundaryMarker[t]!==null))for(i=boundaryMarker[t].length;i--;)boundaryMarker[t][i].polygon.setMap(null),boundaryMarker[t][i].label.setMap(null),boundaryMarker[t][i].polygon.setOptions({fillColor:f,strokeColor:u}),boundaryMarker[t][i].label.setOptions({strokeColor:r,fontColor:e}),boundaryMarker[t][i].polygon.setMap(map),boundaryMarker[t][i].label.setMap(t==="mso"?null:map)})});google.maps.event.addListener(map,"idle",function(){var n,t=google.maps.event.addListener(map,"bounds_changed",function(){clearTimeout(n)});n=setTimeout(function(){var n=map.getBounds();map.getZoom()>=9?($("#swcShowHideMap").prop("disabled",!1),$("#swcShowHideMap").prop("checked")&&getBoundary("swc")):($("#swcShowHideMap").prop("disabled",!0),removeFromMap("swc"));$("#lataShowHideMap").prop("checked")&&getBoundary("lata");$("#msoShowHideMap").prop("checked")&&getBoundary("mso");$("#fiberSpan input[type='checkbox']:checked").each(function(){var n=$(this).prop("id"),t;if(n in vendorFiberMarkers)for(t=vendorFiberMarkers[n].length;t--;)vendorFiberMarkers[n][t].setMap(null);getFiber($(this).prop("id"))});searchBox.setBounds(n);google.maps.event.removeListener(t)},1e3)});$("#cableLegend").bind("click",function(){$(this).hasClass("SearchResultDivDisplay")?$(this).removeClass("SearchResultDivDisplay"):$(this).addClass("SearchResultDivDisplay")});addSDPToMap()});$(document).ready(function(){$("input[type='radio']").click(function(){calculateTotal()});$("input[type='number']").change(function(){calculateTotal()});loadEnd()});
//# sourceMappingURL=comet.min.js.map
