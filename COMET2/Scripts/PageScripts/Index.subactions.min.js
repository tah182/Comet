function fillContactInfo(n){var t,i;if($("#subcontent").empty(),n===null||typeof n=="undefined"){$("#subcontent").html("Please select a vendor on the right");return}raiseDetails(!0,"cog");t=document.createElement("div");t.id="contact";$(t).css("padding-bottom","10px");$("#subcontent").append(t);t=document.createElement("div");t.id="quote";$("#subcontent").append(t);n={vendorName:n};$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Main/MSOContactList",data:JSON.stringify(n),async:!0,beforeSend:function(){$("#contact").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><\/div>")},success:function(n){$("#contact").html(n)},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="DrawDetailsUp";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-ddu-01",logError(r,"#Contact"));n.readyState===0&&(r.ErrorCode="c-i-j-ddu-02",logError(r,"#Contact"))}});i={};i.vendorName=n.vendorName;i.lat=requestInfo.lat;i.lng=requestInfo.lng;i.range=requestInfo.range;$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Main/QuoteDetails",data:JSON.stringify(i),async:!0,beforeSend:function(){$("#quote").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><\/div>")},success:function(n){$("#quote").html(n)},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="DrawDetailsUp";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-ddu-01",logError(r,"#Contact"));n.readyState===0&&(r.ErrorCode="c-i-j-ddu-02",logError(r,"#Contact"))}})}function fillNNIInfo(n){var t={lat:requestInfo.lat,lng:requestInfo.lng,range:requestInfo.range};n!=null&&typeof n!="undefined"&&(t.addressID=n,raiseDetails(!0,"nni"));$("#subcontent").empty();$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Main/NNIInRange",data:JSON.stringify(t),async:!0,beforeSend:function(){$("#subcontent").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><\/div>")},success:function(n){$("#subcontent").html(n)},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="DrawDetailsUp";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-ddu-01",logError(r,"#nni"));n.readyState===0&&(r.ErrorCode="c-i-j-ddu-02",logError(r,"#nni"))}})}function fillQuoteInfo(){$("#subcontent").empty();$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Main/QuoteDetails",data:JSON.stringify(requestInfo),async:!0,beforeSend:function(){$("#subcontent").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><\/div>")},success:function(n){$("#subcontent").html(n)},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="DrawDetailsUp";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-ddu-01",logError(r,"#quoteLookup"));n.readyState===0&&(r.ErrorCode="c-i-j-ddu-02",logError(r,"#quoteLookup"))}})}function fillEfInfo(n,t,i){(n===null||typeof n=="undefined")&&(odering=1);var r={lat:requestInfo.lat,lng:requestInfo.lng,range:requestInfo.range,ordering:n};t!=null&&typeof t!="undefined"&&(r.addressID=t,r.isHighSpeed=i==="true",raiseDetails(!0,"ef"));$.ajax({type:"POST",url:"/Main/EFInRange",data:r,async:!0,beforeSend:function(){$("#subcontent").html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><\/div>")},success:function(n){$("#subcontent").html(n)},error:function(n,t,i){var r=new ErrorInsert;r.PageName="Index";r.StepName="ShowEfDetails";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-sed-01",logError(r,"#ef"));n.readyState===0&&(r.ErrorCode="c-i-j-sed-02",logError(r,"#ef"))}})}function showHideDetails(n){switch(n){case"ef":fillEfInfo(1);break;case"cog":fillContactInfo();break;case"nni":fillNNIInfo();break;case"quote":fillQuoteInfo()}raiseDetails(!0,n)}function raiseDetails(n,t){if(n){$("#detailsLayer").animate({height:"630px"},300).addClass("show");$("#header").children().find("li").each(function(){$(this).text().toLowerCase()===t?$(this).addClass("selected"):$(this).removeClass("selected")});return}$("#detailsLayer").animate({height:"24px"},300,function(){$(this).removeClass("show")})}function addContact(n){var i=$("tr").remove("#addcontact"),t=$("#contact").html();$("#contact").children().each(function(){$(this).remove()});$("#contact").append($("<form id='addContactForm' action='/Rest/RemoveContact' method='post'>"));$("#addContactForm").append(t);$("#contactsGrid tbody").append("<tr id='newContact'><td><input data-val='true' style='width:100%' id='company' name='vendor' value='"+n+"' /><\/td><td><input data-val='true' style='width:100%' id='name' name='contactName' /><\/td><td><input data-val='true' style='width:100%' id='office' name='officePhone' /><\/td><td><input data-val='true' style='width:100%' id='mobile' name='mobilePhone' /><\/td><td><input data-val='true' style='width:100%' id='email' name='email' /><\/td><td id='addContact' class='cursor'><img src='../../images/upload.png' style='height: 12px;' /><\/td><\/tr>");$("#addContact").bind("click",function(){$("#addContactForm").submit()})}function submitContact(){var t=!0,n;$("#contactUpdateContent label").each(function(){if($(this).hasClass("important"))return t=!1,alert("Please check input. All values must be filled and phone numbers should be in xxx-xxx-xxxx format."),!1});$("#contactUpdateContent input[type=text]").each(function(){if($(this).val().length<1)return t=!1,alert("Please check input. All values must be filled and phone numbers should be in xxx-xxx-xxxx format."),!1});t&&(n=new cableContact,n.vendorNormName=$("#CompanyInput").val(),n.parentVendor=$("#CompanyInput").val(),n.contactName=$("#ContactInput").val(),n.contactOffice=$("#OfficeInput").val(),n.contactMobile=$("#MobileInput").val(),n.contactEmail=$("#EmailInput").val(),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/InsertContact",data:JSON.stringify(n),async:!0,success:function(){$(".loading").css("z-index","-10");$(".loading").animate({opacity:0},500);$("#contactUpdatePanel").fadeOut(500);setTimeout(function(){$("#Contact").empty();var n=$("#hiddenCompany").val();fillContactInfo({vendorName:n})},10)},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="submitContact";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-sc-01",logError(r,"#Contact"));n.readyState===0&&(r.ErrorCode="c-i-j-sc-02",logError(r,"#Contact"))}}))}function deleteContact(n,t){yesNoDialog("confirm","Don't delete","Delete","Are you sure you want to delete this contact?",0,n,t)}function confirmReturn(n,t,i,r){switch(n){case 0:DeleteConfirmed(t,i,r)}}function DeleteConfirmed(n,t){if(n){var i=new cableContact;i.id=t;$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Main/RemoveContact",data:JSON.stringify(i),async:!0,success:function(){var n=n;fillContactInfo({vendorName:n})},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="deleteContact";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-dc-01",logError(r,"#Contact"));n.readyState===0&&(r.ErrorCode="c-i-j-dc-02",logError(r,"#Contact"))}})}}function ExportToQuotesToExcel(){var n=searchBox.getPlace();setTimeout(function(){var t=new requestData;t.lat=n.geometry.location.lat();t.lon=n.geometry.location.lng();t.range=$("#slider-vertical").slider("value")<1?1:$("#slider-vertical").slider("value");$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/Partial/ExportQuotes",data:JSON.stringify(t),async:!0,success:function(){},error:function(n,t,i){var r=new r;r.PageName="Index";r.StepName="ExportQuotes";r.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(r.ErrorCode="c-i-j-ddu-01",logError(r,"#quote"));n.readyState===0&&(r.ErrorCode="c-i-j-ddu-02",logError(r,"#quote"))}})},50)}function plotLatLon(n,t,i){raiseDetails(!1);var u=map.getBounds(),f={url:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",origin:new google.maps.Point(0,0)},r=new google.maps.Marker({map:map,icon:f,title:n,position:new google.maps.LatLng(t,i),Zindex:4});infowindow.setContent("<div style='font-size: 0.9em'><strong>"+n+"<\/strong><p style='font-size: 0.8em'><b>Latitude: <\/b>"+t+"<br /><b>Longitude: <\/b>"+i+"<\/p><\/div>");google.maps.event.addListener(r,"click",function(n){return function(){infowindow.open(map,n)}}(r));u.extend(new google.maps.LatLng(t,i));infowindow.open(map,r);markers.push(r);map.fitBounds(u)}function getTrend(n,t){var i=new google.visualization.DataTable,r;i.addColumn("string","Week");i.addColumn("number","Utilization");r={backgroundColor:"#fff",titlePosition:"none",lineWidth:3,width:"100%",height:"90%",legend:{position:"none"},chartArea:{left:0,top:0,width:"100%",height:"90%"},animation:{duration:1e3,easing:"out"},hAxis:{textPosition:"none",gridlines:{color:"#fff"},minorGridlines:{color:"#fff",count:0}},vAxis:{textPosition:"in",maxValue:100,minValue:0,viewWindowMode:"maximized",gridlines:{color:"#fff"},minorGridlines:{color:"#fff"}}};$.ajax({type:"GET",url:"Rest/SDPTrend",async:!0,data:{addressID:n,type:t},success:function(n){for(var u,t=0;t<n.length;t++)i.addRow([8-t+(t===n.length-1?" week ago":" weeks ago"),Math.round(n[t]*1e4)/100]);u=new google.visualization.LineChart(document.getElementById("graph"));u.draw(i,r);$("#trendGraph").css({opacity:1,"z-index":3})},error:function(n,t,i){var r=new ErrorInsert;return(r.PageName="Index",r.StepName="ajaxgetTrend",r.ErrorDetails=n.responseText+" -- "+i,n.readyState===4)?(r.ErrorCode="c-i-j-agt-01",r):n.readyState===0?(r.ErrorCode="c-i-j-agt-02",r):void 0}})}function hideTrend(){$("#trendGraph").css({opacity:0,"z-index":-10})}function cableContact(){}function ErrorInsert(){}google.load("visualization","1.0",{packages:["corechart"]});
//# sourceMappingURL=Index.subactions.min.js.map
