function indexAjax(n,t,i,r){"use strict";function o(n){return{SUCCESS:function(t){removeFromMarkers(t,n);addNewMarkers(t,n);showMarkers(n)},FAILURE:function(t,i,r){u.ErrorDetails=t.responseText+" -- "+r;t.readyState===4&&(u.ErrorCode="c-e-j-"+n+"-01");t.readyState===2&&(u.ErrorCode="c-e-j-"+n+"-02");u.logError(e)}}}var f,e="#map-canvas",u=new ErrorInsert("E911",n),s,h,c;s=h=c=null;i=i!==null&&typeof i=="object"?i:null;switch(r){case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:f="./E911/JsonRcBoundaries";break;case BoundaryType.PSAP:f="./E911/JsonPsapBoundaries";break;case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:f="./E911/JsonCountyBoundaries";break;case BoundaryType.LATA:f="./E911/JsonLataBoundaries";break;default:f=""}return t!==null&&typeof t=="string"&&(e=t),{OnMap:new ajaxCall(ajaxDetails().HttpType.GET,f,i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,o(r).SUCCESS,o(r).FAILURE),LocDetails:ajaxCall(ajaxDetails().HttpType.GET,"./E911/LocationDetails",i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,function(){$(t).html("<div style='text-align:center;width=100%'><img src='../../Images/loading.gif'><\/div>")},function(n){$(t).html(n).parent().removeClass("minimized").fadeIn(500).find(".title").fadeOut(0);$("#map-right").bind("mouseenter",function(){$(t).parent().addClass("minimized").find(".title").css("display","");$(this).unbind("mouseenter")})},function(n,t,i){u.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(u.ErrorCode="c-e-j-ld-01");n.readyState===2&&(u.ErrorCode="c-e-j-ld-02");u.logError()}),LocInfo:ajaxCall(ajaxDetails().HttpType.GET,"./E911/LocationDetails",i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(n){var t=r.clickMarker===!0?clickInfowindow:infowindow,i;t.close();i="<div style='font-size: 0.9em; width: 260px; height: 300px;'><strong>"+r.name+"<\/strong><p style='font-size: 0.83em'>"+n+"<\/p><\/div>";t.setContent(i);t.open(map,r.marker)},function(n,t,i){u.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(u.ErrorCode="c-e-j-ld-01");n.readyState===2&&(u.ErrorCode="c-e-j-ld-02");u.logError()}),Centroid:ajaxCall(ajaxDetails().HttpType.GET,"./E911/ProjectCentroid",i,ajaxDetails().Synchronous.TRUE,ajaxDetails().ContentType.DEFAULT,ajaxDetails().nullBeforeSend,function(n){getProjectInfo(n,r)},function(n,t,i){u.ErrorDetails=n.responseText+" -- "+i;n.readyState===4&&(u.ErrorCode="c-e-j-c-01");n.readyState===2&&(u.ErrorCode="c-e-j-c-02");u.logError()})}}function PageMap(){this.polygonMarkers=[];this.map}function searchProject(n,t){var i=trimFuncName(arguments.callee.toString()),r={searchType:n,searchString:t};runAjax(indexAjax(i,"#map-canvas",r,n).Centroid)}function searchLatLng(){var n=$("#lat-input").val(),t=$("#lng-input").val(),i=new google.maps.Geocoder;i.geocode({latLng:new google.maps.LatLng(n,t)},function(i,r){var e,s,u,f,o;if(r==google.maps.GeocoderStatus.OK)for(i[2]&&(s=i[2].formatted_address),u=0;u<i.length;u++)for(f=0;f<i[u].address_components.length;f++)i[u].address_components[f].types[0]==="postal_code"&&(e=i[u].address_components[0].short_name);else console.log(r);o={name:"Lat:"+n+" - Lng:"+t,address_components:[{short_name:e,types:["postal_code"]}]};getDetails(o,n,t,!0)})}function searchProviders(){var n=searchBox.getPlace();getDetails(n,n.geometry.location.lat(),n.geometry.location.lng(),!0)}function setMapNull(){for(marker!==null&&typeof marker!="undefined"&&marker.setMap(null),i=0;i<highlight.length;i++)highlight[i].setMap(null);highlight=[]}function getClickDetails(n){var r;clickMarker!==null&&typeof clickMarker!="undefined"&&clickMarker.setMap(null);var t=n.latLng.lat(),i=n.latLng.lng(),u=trimFuncName(arguments.callee.toString());clickMarker=createMarker("Lat:"+t+" Lng:"+i,t,i,iconURLPrefix+"blue-dot.png",2,!1);r=new google.maps.Geocoder;r.geocode({latLng:new google.maps.LatLng(t,i)},function(n,r){var o,s,f,e,h,c;if(r==google.maps.GeocoderStatus.OK)for(n[2]&&(o=n[2].formatted_address),f=0;f<n.length;f++)for(e=0;e<n[f].address_components.length;e++)n[f].address_components[e].types[0]==="postal_code"&&(s=n[f].address_components[0].short_name);else console.log(r);h={lat:t,lng:i,zip:s,showIcon:!1};c={name:o,marker:clickMarker,clickMarker:!0};runAjax(indexAjax(u,null,h,c).LocInfo)})}function getDetails(n,t,i,r){var f,e,u,o,s;for(setMapNull(),f=trimFuncName(arguments.callee.toString()),marker=createMarker("Searched Location",t,i,null,2,!1),u=0;u<n.address_components.length;u++)n.address_components[u].types[0]==="postal_code"&&(e=n.address_components[u].short_name);google.maps.event.addListener(marker,"click",function(r){return function(){var u={lat:t,lng:i,zip:e,showIcon:!1},o={name:n.name,marker:r,clickMarker:!1};runAjax(indexAjax(f,null,u,o).LocInfo)}}(marker));o=new google.maps.LatLngBounds;o.extend(new google.maps.LatLng(t,i));r&&(map.fitBounds(o),setTimeout(function(){var n=google.maps.event.addListener(map,"idle",function(){map.getZoom()>14&&map.setZoom(14)});google.maps.event.removeListener(n)},15));s={lat:t,lng:i,zip:e,showIcon:!0};runAjax(indexAjax(f,$("#selectDetail .content"),s,null).LocDetails)}function getProjectInfo(n,t){var r,e,i,u,o,f,s,h;if(setMapNull(),n.length>0){r=MapColors.white;switch(t.toLowerCase()){case"fips":case"counties":r=MapColors.black;break;case"rate center":r=MapColors.red;break;case"fcc id":case"psap agency":r=MapColors.blue}for(e=new google.maps.LatLngBounds,i=0;i<n.length;i++)for(u=0;u<n[i].Polygon.length;u++){for(o=[],f=0;f<n[i].Polygon[u].Coordinates.length;f++)s=new google.maps.LatLng(n[i].Polygon[u].Coordinates[f].Lat,n[i].Polygon[u].Coordinates[f].Lng),o.push(s),e.extend(s);h=new google.maps.Polygon({path:o,strokeColor:r,fillColor:r,strokeWeight:2,strokeOpacity:.8,fillOpacity:.2,zIndex:0,map:map});google.maps.event.addListener(h,"click",function(n){n.alreadyCalled_||getClickDetails(n)});highlight.push(h)}map.fitBounds(e);map.getZoom()>10?($("#selectDetail .content").html("Please click on map to get full details.").parent().removeClass("minimized").fadeIn(500).find(".title").fadeOut(0),$("#map-right").bind("mouseenter",function(){$("#selectDetail").addClass("minimized").find(".title").css("display","");$(this).unbind("mouseenter")})):($("#selectDetail .content").html("Please zoom in and click on map to get full details").parent().removeClass("minimized").fadeIn(500).find(".title").fadeOut(0),$("#map-right").bind("mouseenter",function(){$("#selectDetail").addClass("minimized").find(".title").css("display","");$(this).unbind("mouseenter")}))}else alert("We're sorry, but we were unable to locate this project on a map.")}function getCounty(n){var t=$(n).attr("id")==="CountyPolyShowHideMap"?BoundaryType.COUNTY:BoundaryType.COUNTYLABEL;$(n).prop("checked")?(t===BoundaryType.COUNTYLABEL&&$("#CountyPolyShowHideMap").prop("checked",!0),getBoundary(t)):(t===BoundaryType.COUNTY&&$("#CountyLabelShowHideMap").prop("checked",!1),showMarkers(t))}function getRateCenter(n){var t=$(n).attr("id")==="RateCenterPolyShowHideMap"?BoundaryType.RATECENTER:BoundaryType.RATECENTERLABEL;$(n).prop("checked")?(t===BoundaryType.RATECENTERLABEL&&$("#RateCenterPolyShowHideMap").prop("checked",!0),getBoundary(t)):(t===BoundaryType.RATECENTER&&$("#RateCenterLabelShowHideMap").prop("checked",!1),showMarkers(t))}function getLata(n){$(n).prop("checked")?getBoundary(BoundaryType.LATA):showMarkers(BoundaryType.LATA)}function getPsap(n){$(n).prop("checked")?getBoundary(BoundaryType.PSAP):showMarkers(BoundaryType.PSAP)}function getBoundary(n){if(n!==null&&typeof n=="string"){var t=map.getBounds(),i=trimFuncName(arguments.callee.toString()),r={bottomLeftLat:t.getSouthWest().lat().toFixed(6),bottomLeftLng:t.getSouthWest().lng().toFixed(6),topRightLat:t.getNorthEast().lat().toFixed(6),topRightLng:t.getNorthEast().lng().toFixed(6)};runAjax(indexAjax(i,"#map-canvas",r,n).OnMap)}}function removeFromMarkers(n,t){var i,r;switch(t){case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:for(i=0;i<countyMarkers.length;i++)r=$.grep(n,function(n){return n.ObjectID===countyMarkers[i].text}),r.length===0&&(countyMarkers[i].polygon.setMap(null),countyMarkers[i].label.setMap(null),countyMarkers[i]=null,countyMarkers.splice(i,1));break;case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:for(i=0;i<rateCenterMarkers.length;i++)r=$.grep(n,function(n){return n.ID===rateCenterMarkers[i].text}),r.length===0&&(rateCenterMarkers[i].polygon.setMap(null),rateCenterMarkers[i].label.setMap(null),rateCenterMarkers[i]=null,rateCenterMarkers.splice(i,1));break;case BoundaryType.PSAP:for(i=0;i<psapMarkers.length;i++)r=$.grep(n,function(n){return n.ObjectID===psapMarkers[i].text}),r.length===0&&(psapMarkers[i].polygon.setMap(null),psapMarkers[i]=null,psapMarkers.splice(i,1));break;case BoundaryType.LATA:for(i=0;i<lataMarkers.length;i++)r=$.grep(n,function(n){return n.ObjectID===lataMarkers[i].text}),r.length===0&&(lataMarkers[i].polygon.setMap(null),lataMarkers[i]=null,lataMarkers.splice(i,1))}}function addNewMarkers(n,t){var i,u,r;switch(t){case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:for(i=0;i<n.length;i++)if(u=$.grep(countyMarkers,function(t){return t.text===n[i].ObjectID}),u.length===0)for(r=0;r<n[i].Polygon.length;r++)countyMarkers.push(createShape(n[i].Polygon[r],t,n[i].ObjectID,n[i].Name));break;case BoundaryType.PSAP:for(i=0;i<n.length;i++)if(u=$.grep(psapMarkers,function(t){return t.text===n[i].ObjectID}),u.length===0)for(r=0;r<n[i].Polygon.length;r++)psapMarkers.push(createShape(n[i].Polygon[r],t,n[i].ObjectID,null));break;case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:for(i=0;i<n.length;i++)if(u=$.grep(rateCenterMarkers,function(t){return t.text===n[i].ID}),u.length===0)for(r=0;r<n[i].Polygon.length;r++)rateCenterMarkers.push(createShape(n[i].Polygon[r],t,n[i].ID,n[i].Name));break;case BoundaryType.LATA:for(i=0;i<n.length;i++)if(u=$.grep(lataMarkers,function(t){return t.text===n[i].ObjectID}),u.length===0)for(r=0;r<n[i].Polygon.length;r++)lataMarkers.push(createShape(n[i].Polygon[r],t,null))}}function createShape(n,t,i,r){var u=MapColors.white,e,f;switch(t){case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:u=MapColors.black;break;case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:u=MapColors.red;break;case BoundaryType.PSAP:u=MapColors.blue;break;case BoundaryType.LATA:u=MapColors.pink}for(e=[],f=0;f<n.Coordinates.length;f++)e.push(new google.maps.LatLng(n.Coordinates[f].Lat,n.Coordinates[f].Lng));return t===BoundaryType.PSAP||t===BoundaryType.LATA?{polygon:new google.maps.Polyline({path:e,strokeColor:u,fillColor:u,strokeWeight:2,strokeOpacity:.8,fillOpacity:.8,zIndex:1}),text:i}:{polygon:new google.maps.Polyline({path:e,strokeColor:u,fillColor:u,strokeWeight:2,strokeOpacity:.8,fillOpacity:.8,zIndex:1}),text:i,label:new MapLabel({text:r.toUpperCase(),position:new google.maps.LatLng(n.Centroid.Lat,n.Centroid.Lng),fontSize:10,fontColor:u,labelInBackground:!0,strokeColor:u,strokeWeight:.4})}}function showMarkers(n){var r,u,i,t;if(n!==null&&typeof n!="undefined")switch(n){case BoundaryType.COUNTYLABEL:case BoundaryType.COUNTY:for(r="#CountyPolyShowHideMap",i=$(r).prop("checked"),r="#CountyLabelShowHideMap",u=$(r).prop("checked"),t=0;t<countyMarkers.length;t++)countyMarkers[t].polygon.getMap()===map&&i||countyMarkers[t].polygon.getMap()===null&&!i||countyMarkers[t].polygon.setMap(i?map:null),countyMarkers[t].label.getMap()===map&&u||countyMarkers[t].label.getMap()===null&&!u||countyMarkers[t].label.setMap(u?map:null);break;case BoundaryType.PSAP:for(r="#PsapPolyShowHideMap",i=$(r).prop("checked"),t=0;t<psapMarkers.length;t++)psapMarkers[t].polygon.getMap()===map&&i||psapMarkers[t].polygon.getMap()===null&&!i||psapMarkers[t].polygon.setMap(i?map:null);break;case BoundaryType.RATECENTERLABEL:case BoundaryType.RATECENTER:for(r="#RateCenterPolyShowHideMap",i=$(r).prop("checked"),r="#RateCenterLabelShowHideMap",u=$(r).prop("checked"),t=0;t<rateCenterMarkers.length;t++)rateCenterMarkers[t].polygon.getMap()===map&&i||rateCenterMarkers[t].polygon.getMap()===null&&!i||rateCenterMarkers[t].polygon.setMap(i?map:null),rateCenterMarkers[t].label.getMap()===map&&u||rateCenterMarkers[t].label.getMap()===null&&!u||rateCenterMarkers[t].label.setMap(u?map:null);break;case BoundaryType.LATA:for(r="#LataPolyShowHideMap",i=$(r).prop("checked"),t=0;t<lataMarkers.length;t++)lataMarkers[t].polygon.getMap()===map&&i||lataMarkers[t].polygon.getMap()===null&&!i||lataMarkers[t].polygon.setMap(i?map:null)}}function searchTableSelect(n){var t=function(n,t){that=$("#"+t.id+"SearchDiv");$(n).css("display","none");that.css("display","block");setTimeout(function(){that.animate({opacity:1},500).addClass("selected")},10);$("#searchCriteria").children("span").each(function(){$(this).attr("onclick","searchTableSelect(this)")})};$(".tab").each(function(){$(this).removeClass("selected")});$("#"+n.id).addClass("selected");$("#searchCriteria").children("span").each(function(){$(this).attr("onclick","")});$("#searchMethods").children().each(function(){$(this).hasClass("selected")&&$(this).animate({opacity:0},500,null,t(this,n)).removeClass("selected")})}function createMarker(n,t,i,r,u,f){return new google.maps.Marker({position:new google.maps.LatLng(t,i),map:map,icon:r===null?iconURLPrefix+"red-dot.png":r,title:n.toString(),id:n,zIndex:u,draggable:f})}/*@cc_on@*/var iconURLPrefix="http://maps.google.com/mapfiles/ms/icons/",MapColors={yellow:"#F2FA00",white:"#eee",black:"#111",blue:"#0000FF",purple:"#4000BF",orange:"#FF7700",darkWhite:"#ddd",lightBlack:"#333",red:"#FF0000"},BoundaryType={RATECENTER:"rateCenter",RATECENTERLABEL:"rateCenterLabel",PSAP:"psap",COUNTY:"county",COUNTYLABEL:"countyLabel",LATA:"lata"},Coordinate=function(n,t){this.Lat=n;this.Lng=t},Boundary=function(n){this.Coordinate=[];for(var t=0;t<n.length;t++)this.Coordinate.push(Coordinate.call(this,n.lat,n.lng))};PageMap.prototype={clearMarkers:function(n){if(this.boundaryType!==null&&typeof this.boundaryType!="undefined"){for(var t=this.polygonMarkers[n].length-1;t>=0;t--)this.polygonMarkers[n][t].label!==null&&typeof this.polygonMarkers[n][t].label!="undefined"&&this.polygonMarkers[n][t].label.setMap(null),this.polygonMarkers[n][t].polygon.setMap(null);this.polygonMarkers[n]=[]}},addMarkers:function(n,t,i){if(this.boundaryType!==null&&typeof this.boundaryType!="undefined"){this.polygonMarkers[n]!==null&&typeof this.polygonMarkers[n]!="undefined"&&clearMarkers(n);var r=new{polygon:t,label:i};t.setMap(this.map);i!==null&&typeof i!="undefined"&&i.setMap(this.map);this.polygonMarkers[n].push(r)}}};var mapListener,localStorageAllowed,countyMarkers=[],rateCenterMarkers=[],psapMarkers=[],lataMarkers=[],highlight=[],marker,clickMarker,map,infowindow,clickInfowindow,searchBox,djConfig={parseOnLoad:!0,packages:[{name:"agsjs",location:"https://gmaps-utility-gis.googlecode.com/svn/tags/agsjs/2.04/xbuild/agsjs"}]};$(document).ready(function(){"use strict";var n=getInternetExplorerVersion(),t;n>-1&&n<10&&alert("Your are using an outdated version of IE. Comet recommends that you use IE10, Chrome, or Firefox.");localStorageAllowed=supportsHtml5Storage();$("#lat-input, #lng-input").keypress(function(n){n.which==13&&searchLatLng()});$("#MinMaxSearch").click(function(){minMaxParent(this)});map=new google.maps.Map(document.getElementById("map-canvas"),{center:new google.maps.LatLng(38.850033,-95.6500523),zoom:5,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM,style:google.maps.ZoomControlStyle.SMALL},panControl:!1,scaleControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP});infowindow=new google.maps.InfoWindow;clickInfowindow=new google.maps.InfoWindow;t=document.getElementById("pac-input");searchBox=new google.maps.places.Autocomplete(t);google.maps.event.addListener(searchBox,"place_changed",function(){searchProviders()});$("#project-input").autocomplete({delay:500,focus:function(n,t){n.preventDefault();var i=t.item.label.split(": ");$(this).val(i[1].replace("<mark>","").replace("<\/mark>",""))},source:function(n,t){var i={search:$("#project-input").val()};$.get("./E911/ShowProject",i,function(n){for(var r=[],i=0;i<n.length;i++)r.push({label:n[i][0],value:n[i][1],id:i});t(r)})},select:function(n,t){n.preventDefault();var i=t.item.label.split(": "),r=i[0].replace("<b>","").replace("<\/b>","").replace("<u>","").replace("<\/u>",""),u=i[1].replace("<mark>","").replace("<\/mark>","");$(this).val(u);searchProject(r,t.item.value)},open:function(){$(".ui-autocomplete").css({"background-color":"#FFFFFF","font-size":"0.7em","max-height":"350px","overflow-y":"scroll","overflow-x":"hidden",width:$(this).width()+5+"px"});$(".ui-autocomplete li").css({outline:"1px"})}}).data("ui-autocomplete")._renderItem=function(n,t){return $("<li title='"+t.title+"'>").data("ui-autocomplete-item",t).append($("<a>").html(t.label)).appendTo(n)};google.maps.event.addListener(map,"idle",function(){var n,t=google.maps.event.addListener(map,"bounds_changed",function(){clearTimeout(n)});n=setTimeout(function(){var n;if(map.getZoom()>=10)$("#CountyPolyShowHideMap").prop("disabled",!1),$("#CountyPolyShowHideMap").prop("checked")&&getCounty($("#CountyPolyShowHideMap")),$("#CountyLabelShowHideMap").prop("disabled",!1),$("#RateCenterPolyShowHideMap").prop("disabled",!1),$("#RateCenterPolyShowHideMap").prop("checked")&&getRateCenter($("#RateCenterPolyShowHideMap")),$("#RateCenterLabelShowHideMap").prop("disabled",!1),$("#PsapPolyShowHideMap").prop("disabled",!1),$("#PsapPolyShowHideMap").prop("checked")&&getPsap($("#PsapPolyShowHideMap")),$("#LataPolyShowHideMap").prop("disabled",!1),$("#LataPolyShowHideMap").prop("checked")&&getLata($("#LataPolyShowHideMap")),(mapListener===null||typeof mapListener=="undefined")&&(mapListener=google.maps.event.addListener(map,"click",function(n){getClickDetails(n)}));else{for($("#CountyPolyShowHideMap").prop("disabled",!0),$("#CountyLabelShowHideMap").prop("disabled",!0),n=0;n<countyMarkers.length;n++)countyMarkers[n].polygon.setMap(null),countyMarkers[n].label.setMap(null);for($("#RateCenterPolyShowHideMap").prop("disabled",!0),$("#RateCenterLabelShowHideMap").prop("disabled",!0),n=0;n<rateCenterMarkers.length;n++)rateCenterMarkers[n].polygon.setMap(null),rateCenterMarkers[n].label.setMap(null);for($("#PsapShowHideMap").prop("disabled",!0),n=0;n<psapMarkers.length;n++)psapMarkers[n].polygon.setMap(null);for($("#LataShowHideMap").prop("disabled",!0),n=0;n<lataMarkers.length;n++)lataMarkers[n].polygon.setMap(null);google.maps.event.clearListeners(map,"click");google.maps.event.removeListener(t);searchBox.setBounds(map.getBounds())}},500)});$("#selectDetail").bind("click",function(){$(this).hasClass("SearchResultDivDisplay")?$(this).removeClass("SearchResultDivDisplay"):$(this).addClass("SearchResultDivDisplay")})});
//# sourceMappingURL=E911JS.min.js.map
